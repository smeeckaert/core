var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijcarousel",r="wijmo-wijcarousel-",i="wijmo-wijcarousel ",s=r+"list",o=r+"item ",u=r+"clip",a=r+"current",f=r+"horizontal-multi",l=r+"horizontal",c=r+"button",h=r+"vertical-multi",p=r+"vertical",d=r+"button-next",v=r+"button-previous",m=r+"preview",g="<a><span></span></a>",y=".wijmo-wijcarousel-pager,."+c+",."+d+",."+v,b="<div></div>",w='<li class="wijmo-wijcarousel-page"><a></a></li>',E="li.wijmo-wijcarousel-page",S=".wijmo-wijcarousel-text,.wijmo-wijcarousel-caption",x=1,T=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._handleDisabledOption=function(e,n){var r=this,i=r.options;r.pager&&!r.pager.is(":hidden")&&(r.disabledEles=r.disabledEles.add(r.pager)),e?(r.element.addClass(i.wijCSS.stateDisabled),r.disabledDiv.length||r._createDisabledDiv(),r.disabledDiv.appendTo("body")):r.disabledDiv&&(r.element.removeClass(i.wijCSS.stateDisabled),r.disabledDiv.remove(),r.disabledDiv=t())},n.prototype._createDisabledDiv=function(){var e=this,n=e.options;e.disabledEles.each(function(r,i){var s=t(i),o=s.offset(),u=s.outerWidth(),a=s.outerHeight(),f=t("<div></div>").addClass(n.wijCSS.stateDisabled).css({"z-index":"99999",position:"absolute",width:u,height:a,left:o.left,top:o.top});t.browser.msie&&(f.css("background-color","white"),t.browser.version==="9.0"&&f.css("opacity","0.1")),e.disabledDiv=e.disabledDiv.add(f)})},n.prototype._initStates=function(e,n){var r=this;r.count=0,r.currentIdx=e.start,r.timeout=null,r.isHorizontal=e.orientation==="horizontal",r.width=n.width()||640,r.height=n.height()||480,r.offset=0,r.disabledEles=n,r.disabledDiv=t()},n.prototype._create=function(){var e=this,n=e.options,r=e.element;window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),e._initStates(n,r),e._createDom(e.isHorizontal),e.list.bind("click."+e.widgetName,t.proxy(e._itemClick,e)),n.showControlsOnHover&&(e.container.bind("mouseenter."+e.widgetName,function(){e._showControls()}).bind("mouseleave."+e.widgetName,function(){e._hideControls()}),e.container.find(y).hide()),n.loadCallback&&t.isFunction(n.loadCallback)&&e._trigger("loadCallback",null,e);if(n.disabledState){var i=n.disabled;e.disable(),n.disabled=i}else n.auto&&e.play();e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.refresh(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijcarousel")},n.prototype._showControls=function(){this.container.find(y).stop(!0,!0).fadeIn(600,function(){t(this).css("opacity","")})},n.prototype._hideControls=function(){this.container.find(y).stop(!0,!0).fadeOut(600)},n.prototype._applyContainerStyle=function(e,t){var n=this,r=n.options,i={},s=n.list,o=0,u,a=0,f=e?"left":"top",l=0,c,h=e?"width":"height";u=n.itemBound[e?"w":"h"],n.count=n.list.children("li").length,o=n.count*u,n.list[h](o),n.clip[h](r.display*u),n.clip[e?"height":"width"](n.itemBound[e?"h":"w"]);if(!r.loop)i[f]=-u*n.currentIdx,s.css(i);else{c=s.find(">li:first"),r.preview&&!!t&&(c=c.next()),l=c.data("itemIndex");for(l;l<n.currentIdx;l++)s.children("li:first").appendTo(s);if(r.preview){if(!t)for(l=0;l<x;l++)s.children("li:last").prependTo(s);a=-u*x}i[f]=a,s.css(i)}},n.prototype._applyListStyle=function(){var e=this,t=e.options,n=t.orientation==="horizontal",r=0,i,s=n?"width":"height";e.itemBound=e._getItemBound(),i=e.itemBound[n?"w":"h"],r=e.count*i,e.list[s](r)},n.prototype._createButtons=function(e,n){var r=this,i=r.options,s,o=i.wijCSS.stateDisabled;t.each(["prevBtn","nextBtn"],function(u,a){var f=i[a+"Class"],l=a==="nextBtn",c=l?"next":"previous",h=l?d:v,p=l?n:e;f&&f.defaultClass?(o=f.disableClass||o,s=f.hoverClass,r[a]=t('<a class="'+i.wijCSS.stateDefault+'"></a>').addClass(f.defaultClass).mouseover(function(){t(this).hasClass(o)||t(this).addClass(s)}).mouseout(function(){t(this).hasClass(o)||t(this).removeClass(s)})):r[a]=t(r._createBtn(h,p)),r[a].bind("click."+r.widgetName,function(e){var n=t(this);if(n.hasClass(i.wijCSS.stateDisabled))return;r[c].call(r)}).appendTo(r.container)})},n.prototype._applyBtnClass=function(){var e=this,n=e.options,r=n.wijCSS.stateDisabled,i=n.wijCSS.stateHover;t.each(["prevBtn","nextBtn"],function(t,s){var o=n[s+"Class"],u,a=e[s];o&&(r=o.disableClass||r,i=o.hoverClass||i),u=s==="prevBtn"?e.currentIdx<=0:e.currentIdx+n.display>=e.count,u&&!n.loop?a.removeClass(i).addClass(r):a.hasClass(r)&&a.removeClass(r)})},n.prototype._applyBtnStyle=function(e){var t=this,n=0,r,i=t.options.wijCSS,s={collision:"none",of:t.container,my:e?"right{offset} center":"center bottom{offset}",at:e?"right center":"center bottom"},o={collision:"none",of:t.container,my:e?"left{offset} center":"center top{offset}",at:e?"left center":"center top"},u=t.options.buttonPosition==="inside",a,f,l=["cornerBottom","cornerTop","cornerRight","cornerLeft"],c=(e?1:0)*2+(u?1:0),h=(e?1:0)*2+(u?0:1),p=function(e,t,n,r,i){var s="";e.removeClass(t).addClass(n),!isNaN(r)&&r!==0&&(r>0?s="+"+r:s="-"+ -r),i.my=i.my.replace(/\{offset\}/,s),e.position(i)};n=e?t.prevBtn.width():t.prevBtn.height(),r=u?0:n,a=i[l[c]],f=i[l[h]],p(t.nextBtn,f,a,r,s),p(t.prevBtn,a,f,-r,o),t._applyBtnClass()},n.prototype._createDom=function(e){var n=this,r=n.options,o=n.element,u,a,c,d;if(o.is("div"))n.list=o.children("ul:eq(0)"),n.container=n.element,n.list.length||(n.list=t("<ul></ul>").appendTo(n.container));else{if(!o.is("ul"))return;n.list=o,n.container=o.parent()}n.itemBound=n._getItemBound(),e?(u=r.display>1&&!r.preview?f:l,a=r.wijCSS.iconArrowRight,c=r.wijCSS.iconArrowLeft):(u=r.display>1&&!r.preview?h:p,a=r.wijCSS.iconArrowDown,c=r.wijCSS.iconArrowUp),n.list.addClass(s).addClass(r.wijCSS.helperClearFix),d=i+r.wijCSS.widget+" "+u+" "+(r.preview?m+" ":"")+(r.display>1?r.wijCSS.content+" "+r.wijCSS.cornerAll:""),n.container.addClass(d),n._createItems(e),n._createClip(e),n._applyContainerStyle(e),n._createButtons(c,a),n._applyBtnStyle(e),r.preview&&n._createPreview(),r.showTimer&&n._createTimer(),r.showPager&&n._createPager(),r.showControls&&n._createControls()},n.prototype._createPreview=function(){var e=this,t=e.options,n,r,i=t.orientation==="horizontal",s=i?"left":"top",o=i?"right":"bottom",u,a;r=e.itemBound[i?"w":"h"],n=e.offset=Math.round(r/4),u=t.display*r+n*2,e.clip[i?"width":"height"](u),e.list.css(s,function(e,t){return parseFloat(t)+n}),e.clip.css(s,function(e,t){return-n}),e.container.css("margin-"+s,n+"px").css("margin-"+o,n+"px"),e.list.find(S).hide();for(a=0;a<t.display;a++)e._getItemByIndex(e.currentIdx+a).find(S).show()},n.prototype._createItemsFromData=function(e){var n=this;if(!t.isArray(e)||!e.length||!t.isPlainObject(e[0])||t.isEmptyObject(e[0]))return;n.list.empty(),t.each(e,function(e,r){var i;if(!t.isPlainObject(r))return!0;i=n._generateMarkup(r),n.list.append(i)})},n.prototype._generateMarkup=function(e){var n,r;if(!t.isPlainObject(e))return;return n=t("<li></li>"),typeof e.linkUrl=="string"&&e.linkUrl&&(r=t("<a>").attr("href",e.linkUrl),r.appendTo(n)),typeof e.imageUrl=="string"&&e.imageUrl&&t("<img>").attr("src",e.imageUrl).appendTo(r||n),typeof e.caption=="string"&&e.caption&&t("<span>").html(e.caption).appendTo(n),n},n.prototype._createItems=function(e){var n=this,r,i,s=n.options,o,u;if(n.list){n._createItemsFromData(s.data),n.list.children("li").each(function(e,r){var i=t(r);n._createItem(i,e)}),o=n.list.children("li").eq(n.currentIdx).addClass(a);if(s.preview&&s.display>1){r=u=o;for(i=0;i<s.display-1;i++)u=u.next(),r=r.add(u);r.find("div.wijmo-wijcarousel-mask").css({opacity:0})}}},n.prototype._createItem=function(e,n){var r=this,i=r.options,s,u;return s=e.addClass(o).addClass(i.wijCSS.helperClearFix).find("img:eq(0)").attr("role","img").addClass("wijmo-wijcarousel-image"),r._applyItemBound(e),u=e.children("span:eq(0)").hide(),r._createCaption(e,s,u),i.preview&&t('<div class="wijmo-wijcarousel-mask">').appendTo(e),e.data("itemIndex",n),e},n.prototype._applyItemBound=function(e){var t=this,n=t.itemBound.w,r=t.itemBound.h;if(!t.itemWidth||!t.itemHeight)e.width(n).height(r),t.itemWidth=n-(e.outerWidth(!0)-n),t.itemHeight=r-(e.outerHeight(!0)-r);e.width(t.itemWidth).height(t.itemHeight)},n.prototype._createCaption=function(e,n,r){var i=this,s=i.options,o,u,a,f,l;s.showCaption&&(o=r.html()||n.attr("title"),o&&o.length&&(a=t("<span></span>").html(o),f=t(b).addClass([s.wijCSS.helperClearFix,"wijmo-wijcarousel-caption"].join(" ")).appendTo(e),u=t(b).addClass([s.wijCSS.helperClearFix,s.wijCSS.content,"wijmo-wijcarousel-text"].join(" ")).append(a).appendTo(e),i._applyCaptionStyle(f,u)))},n.prototype._applyCaptionStyle=function(e,n){var r=e.add(n),i;r.width(this.itemWidth),t.browser.webkit?(i=n.children("span").css("display","inline-block").height(),n.children("span").css("display","")):i=n.children("span").height(),r.height(i)},n.prototype._showCaption=function(e,t){var n=this,r=n._getItemByIndex(e),i=r.find(".wijmo-wijcarousel-text"),s=r.find(".wijmo-wijcarousel-caption");i.length&&i.fadeIn(300,function(){e<t&&n._showCaption(e+1,t)}),s.length&&(s.show(),s.animate({opacity:.5},300))},n.prototype._hideCaption=function(){this.element.find(S).hide()},n.prototype._createClip=function(e){this.clip=this.list.wrap("<div></div>").parent().addClass(u)},n.prototype._createBtn=function(e,n){var r=t(g),i=this.options;return r.addClass(i.wijCSS.stateDefault+" "+e).attr("role","button").mouseover(function(){t(this).hasClass(i.wijCSS.stateDisabled)||t(this).addClass(i.wijCSS.stateHover)}).mouseout(function(){t(this).hasClass(i.wijCSS.stateDisabled)||t(this).removeClass(i.wijCSS.stateHover)}).children("span:eq(0)").addClass(i.wijCSS.icon+" "+n),r},n.prototype._createControls=function(){var e=this,n=e.options,r={collision:"none",of:e.container,my:"center bottom",at:"center bottom"};n.control&&(e.controls=t(n.control).css({position:"absolute"}).appendTo(e.container),t.extend(r,n.controlPosition),e.controls.position(r))},n.prototype._createTimer=function(){var e=this,n=e.options;e._createPausePlay(),e.progressBar=t("<div></div>").addClass("wijmo-wijcarousel-timerbar-inner "+n.wijCSS.cornerAll).css({width:"0%"}).attr("role","progressbar"),e.timer=t("<div></div>").addClass("wijmo-wijcarousel-timerbar "+n.wijCSS.cornerAll).appendTo(e.container).append(e.progressBar).append(e.playPauseBtn)},n.prototype._createPausePlay=function(){var e=this,n=e.options;e.playPauseBtn=t(e._createBtn(c,n.auto?n.wijCSS.iconPause:n.wijCSS.iconPlay)).bind("click."+e.widgetName,function(){var r=t(this).children("span:eq(0)");e[r.hasClass(n.wijCSS.iconPlay)?"play":"pause"]()})},n.prototype._createPagingItem=function(e,n,r,i){var s=t(w).attr({role:"tab","aria-label":i+1,title:i+1}).addClass(this.options.wijCSS.stateDefault),o,u;if(e)s.addClass("wijmo-wijcarousel-dot");else{if(!(n&&n.images&&n.images[i]))return;o=n.imageWidth,u=n.imageHeight,o&&u&&s.width(o).height(u),s.children("a").append(t("<img>").attr("src",n.images[i]))}r.append(s)},n.prototype._createPaging=function(e){var n=this,r=n.options,i,s,o,u=r.thumbnails,a=e==="dots";n.container.append(n.pager=t('<div><ul class="wijmo-list '+r.wijCSS.cornerAll+" "+r.wijCSS.helperClearFix+' role="tablist"></ul></div>')),a||n.pager.addClass("wijmo-wijcarousel-thumbnails"),s=n.pager.children("ul.wijmo-list");for(i=0;i<n.count;i++)n._createPagingItem(a,u,s,i);o=n.pager.find("li").eq(n.currentIdx),o.length&&n._activePagerItem(o),u&&t.each(["mousedown","mouseup","mouseover","mouseout","click"],function(e,t){var n=u[t];n&&typeof n=="string"&&window[n]&&(u[t]=window[n])}),n.pager.bind("mouseover."+n.widgetName,function(e){n._pageingEvents(e,"mouseover",u,a,function(e){e.addClass(r.wijCSS.stateHover)})}).bind("mouseout."+n.widgetName,function(e){n._pageingEvents(e,"mouseout",u,a,function(e){e.removeClass(r.wijCSS.stateHover)})}).bind("click."+n.widgetName,function(e){n._pageingEvents(e,"click",u,a,function(e){n.scrollTo(e.index()),n._activePagerItem(e)})}),a||t.each(["mousedown","mouseup"],function(e,r){t.isFunction(u[r])&&n.pager.bind(r,function(e){var n=t(e.target).closest(E);n.length&&u[r].call(n,e)})})},n.prototype._pageingEvents=function(e,n,r,i,s){var o=t(e.target).closest(E);o.length&&(t.isFunction(s)&&s.call(e,o),!i&&t.isFunction(r[n])&&r[n].call(o,e))},n.prototype._activePagerItem=function(e){var t=this.options.wijCSS.stateActive;e.addClass(t).attr("aria-selected","true").siblings("li").removeClass(t).removeAttr("aria-selected")},n.prototype._createWijSlider=function(){var e=this,n=e.options.sliderOrientation,r={orientation:n,range:!1,min:0,max:e.count-1,step:1,value:e.currentIdx,buttonClick:function(t,n){var r=n.value;e.scrollTo(r)},slide:function(t,n){var r=n.value;e.scrollTo(r)}},i=t("<div></div>").css("margin-bottom","10px").css(n==="horizontal"?"width":"height","200px").appendTo(e.container);e.pager=i.wijslider(r).parent().wrap("<div>").parent().addClass("wijmo-wijcarousel-slider-wrapper")},n.prototype._createWijPager=function(){var e=this,n={pageCount:e.count,pageIndex:e.currentIdx,pageButtonCount:e.count,mode:"numeric",pageIndexChanged:function(t,n){var r=n.newPageIndex;e.scrollTo(r)}},r=t("<div></div>").appendTo(e.container);e.pager=r.wijpager(n).css({position:"absolute"})},n.prototype._createPager=function(){var e=this,n=e.options,r={collision:"none",of:e.container,my:"right top",at:"right bottom"};if(n.pagerType==="numbers")e._createWijPager();else if(n.pagerType==="dots"||n.pagerType==="thumbnails")e._createPaging(n.pagerType),e.pager.css({position:"absolute"});else{if(!t.wijmo.wijslider||n.pagerType!=="slider")return;e._createWijSlider(),n.sliderOrientation!=="horizontal"&&(r.my="left center",r.at="right center")}e.pager.width(e.pager.width()+1),t.extend(r,n.pagerPosition),n.pagerPosition=r,e.pager.addClass("wijmo-wijcarousel-pager").position(r)},n.prototype._setOption=function(e,n){var r=this,i=r.options,s,o,u,a=i.orientation==="horizontal";if(e==="pagerPosition"||e==="animation"||e==="controlPosition")t.extend(!0,i[e],n);else{u=i[e],t.Widget.prototype._setOption.apply(r,arguments);switch(e){case"showControls":case"showPager":case"showTimer":if(n===u)break;s=e.replace(/show/i,"").toLowerCase(),o=e.replace(/show/i,"_create"),n===!0?r[s]?r[s].jquery&&r[s].show():r[o]():r[s].hide();break;case"loop":case"orientation":case"display":case"preview":n!==u&&(r._wijdestroy(),r._create());break;case"data":r._createItems(a),r._applyContainerStyle(a),r._applyBtnClass(),i.showPager&&r._createPager();break;case"showCaption":n?r._createItems(a):r.element.find(S).remove();break;case"buttonPosition":r._applyBtnStyle(a);break;case"pagerType":n!==u&&(r.pager&&r.pager.jquery&&(r.pager.remove(),r.pager=null),r._createPager());break;case"disabled":r._handleDisabledOption(n,r.element);break;default:}}},n.prototype._getItemBound=function(){var e={},t=this,n=t.options;return n.orientation==="horizontal"?e={w:Math.round(t.width/n.display),h:t.height}:e={w:t.width,h:Math.round(t.height/n.display)},e},n.prototype._stopAnimation=function(){var e=this;e.isPlaying&&e.progressBar&&e.progressBar.stop().css({width:"0%"}),e.list.stop(!0,!0)},n.prototype._itemClick=function(e){var n=t(e.target),r=this,i=r.options,s=r.currentIdx,u=n.closest("li."+o),a=u.data("itemIndex"),f,l;if(u.length>0){if(i.preview&&a<s||a>s+i.display-1)f=r._getItemByIndex(s).index(),l=u.index()>f?"next":"previous",r[l]();r._trigger("itemClick",e,{index:a,el:u})}},n.prototype._wijdestroy=function(){var e=this,n=e.options.wijCSS;e.container.removeClass("wijmo-wijcarousel "+n.widget).removeClass("wijmo-wijcarousel-horizontal").removeClass("wijmo-wijcarousel-vertical"),e.timeout&&(e.list.stop(!0),window.clearTimeout(e.timeout),e.timeout=null),e.list.unwrap().removeClass("wijmo-wijcarousel-list").removeClass(n.helperClearFix).unbind("."+e.widgetName).removeAttr("style").children("li").each(function(e,r){var i=t(r);i.removeClass("wijmo-wijcarousel-item").removeClass(n.helperClearFix).removeClass(a),i.children("img").removeClass("wijmo-wijcarousel-image"),i.children(S).remove(),i.css({width:"",height:""}),i.removeData("itemIndex")}),e.itemWidth=e.itemHeight=undefined,e.element.find(y+",.wijmo-wijcarousel-timerbar").remove(),e.pager&&e.pager.remove(),e.element.find("li>span").css("display",""),e.disabledDiv.length&&(e.disabledDiv.remove(),e.disabledDiv=t())},n.prototype.destroy=function(){this._wijdestroy(),t.Widget.prototype.destroy.apply(this)},n.prototype._resetDom=function(){var e=this;e._applyListStyle(),e.list.children("li").each(function(n,r){var i=t(r),s=i.children("div.wijmo-wijcarousel-caption"),o=i.children("div.wijmo-wijcarousel-text");e._applyItemBound(i),e._setStyle(s.add(o),function(){e._applyCaptionStyle(s,o)})}),e._applyContainerStyle(e.isHorizontal,!0),e.options.preview&&e._createPreview(),e._setStyle(e.prevBtn.add(e.nextBtn),function(){e._applyBtnStyle(e.isHorizontal)}),e._setStyle(e.pager,function(){e.pager.position(e.options.pagerPosition)}),e._setStyle(e.controls,function(){e.controls.position(e.options.controlPosition)})},n.prototype._setStyle=function(e,t){var n=!0;if(!e||e.length===0)return;e.css("display")=="none"&&(n=!1,e.css("display","")),t.call(this),n||e.css("display","none")},n.prototype.refresh=function(){var e=this,t=e.options,n=e.element;e.width=n.width()||640,e.height=n.height()||480,e.itemWidth=e.itemHeight=0,e._resetDom(),e.pause()},n.prototype.play=function(){var e=this,t=e.options;if(e.isPlaying||t.disabled)return;if(t.interval===0)return e.pause();if(t.showTimer&&e.progressBar)e.progressBar.css({width:"0%"}),e.playPauseBtn.children("span:eq(0)").removeClass(t.wijCSS.iconPlay).addClass(t.wijCSS.iconPause),e.progressBar.animate({width:"100%"},t.interval,null,function(){e._scroll("next",t.step)});else{if(e.timeout)return;e.timeout=window.setTimeout(function(){e.next()},t.interval)}e.isPlaying=!0},n.prototype.pause=function(){var e=this,t=e.options;if(t.showTimer&&e.progressBar)e.progressBar.stop().css({width:"0%"}),e.playPauseBtn.children("span:eq(0)").removeClass(t.wijCSS.iconPause).addClass(t.wijCSS.iconPlay);else{if(e.timeout===null)return;window.clearTimeout(e.timeout),e.timeout=null}e.isPlaying=!1},n.prototype.next=function(){var e=this,t=e.options.step;if(typeof t!="number"||t<1)return;e._stopAnimation(),e._scroll("next",t)},n.prototype.previous=function(){var e=this,t=e.options.step;if(typeof t!="number"||t<1)return;e._stopAnimation(),e._scroll("previous",t)},n.prototype.scrollTo=function(e){var t=this,n,r;t._stopAnimation(),n=e>t.currentIdx?"next":"previous",r=Math.abs(e-t.currentIdx),e!==t.currentIdx&&t._scroll(n,r)},n.prototype._scroll=function(e,n){var r=this,i=r.options,s=r.list,o=0,u,f,l=i.orientation==="horizontal",c={},h=r.itemBound[l?"w":"h"],p=l?"left":"top",d=n,v={},m=0,g=r.currentIdx*h;if(!i.loop){if(e==="next")if(r.currentIdx+i.display+n<=r.count)o=-g-h*d;else{if(!(r.currentIdx+i.display<r.count))return;d=r.count-r.currentIdx-i.display,o=-g-h*d}else r.currentIdx-n>=0?o=-g+h*d:r.currentIdx>0&&(d=r.currentIdx,o=0);o!==undefined&&(c[p]=o+r.offset,r._doAnimation(e,c,d))}else{i.preview&&(o=m=-h*x+r.offset);if(e==="next")o+=-h*d,c[p]=o;else{for(f=0;f<n;f++)o-=h,s.children("li:last").prependTo(s);v[p]=o,c[p]=m,s.css(v)}r._doAnimation(e,c,n,p,h)}if(i.preview){u=t();for(f=0;f<i.display;f++)u=u.add(r._getItemByIndex(r.currentIdx+f).find("div.wijmo-wijcarousel-mask:eq(0)"));u.stop(!0).animate({opacity:.6},i.animation.duration/2,function(){r._getItemByIndex(r.currentIdx).removeClass(a)})}},n.prototype._doAnimation=function(e,n,r,i,s){var o=this,u=o.list,a=o.options,f,l,c={complete:null},h,p={},d;if(!o.list.children().length)return;e==="next"?d=o.currentIdx+r:d=o.currentIdx-r,a.loop?(d=d%o.count+(d<0?o.count:0),h=function(){var t=0;a.preview&&(t=o.offset-x*s);if(e==="next"){for(l=0;l<r;l++)u.children("li:first").appendTo(u);i&&(p[i]=t,u.css(p))}o.currentIdx=d,o._setCurrentState(o.currentIdx)}):h=function(){o.currentIdx=d,o._setCurrentState(o.currentIdx)},c.complete=h,f={index:o.currentIdx,to:d,el:o._getItemByIndex(o.currentIdx)};if(!o._trigger("beforeScroll",null,f))return;a.animation&&a.animation.complete&&(a.animation.complete=undefined),t.extend(c,a.animation),o._hideCaption(),u.animate(n,c)},n.prototype._setCurrentState=function(e){var n=this,r=n.options,i,s,o,u=e+r.display-1,f,l,c;r.loop?n.isPlaying&&(window.clearTimeout(n.timeout),n.timeout=null,n.isPlaying=!1,n.play()):(o=e+r.display<n.count,n.isPlaying&&o?(window.clearTimeout(n.timeout),n.timeout=null,n.isPlaying=!1,n.play()):n.progressBar&&n.pause(),n._applyBtnClass());if(r.preview){l=t(),f=n._getItemByIndex(e);for(c=0;c<r.display;c++)l=l.add(n._getItemByIndex(e+c).find("div.wijmo-wijcarousel-mask:eq(0)"));l.animate({opacity:0},r.animation.duration/2,function(){f.addClass(a),n._showCaption(e,u)})}else n._showCaption(e,u);n.pager&&(t.wijmo.wijslider&&n.pager.find(":wijmo-wijslider").length?n.pager.find(":wijmo-wijslider:eq(0)").wijslider("value",e):t.wijmo.wijpager&&n.pager.is(":wijmo-wijpager")?n.pager.wijpager("option","pageIndex",e):n.pager.jquery&&(i=n.pager.find(">ul:eq(0)>li").eq(e),i.length&&n._activePagerItem(i))),s={firstIndex:e,lastIndex:u},n._trigger("afterScroll",null,s)},n.prototype._getItemByIndex=function(e){var n=this,r=n.list,i,s=e%n.count;return n.options.loop?(r.children("li").each(function(e){var n=t(this);if(n.data("itemIndex")===s)return i=n,!1}),i):r.children("li").eq(s)},n.prototype._collectionChanged=function(e){var t=this;t.count=t.count+(e==="add"?1:-1),t._applyListStyle(),t.pager&&t.pager.jquery&&(t.pager.remove(),t.pager=null,t._createPager()),t._applyBtnClass()},n.prototype.add=function(e,n){var r=this,i,s;if(typeof e=="string")i=t(e);else if(e.jquery)i=e;else{if(!t.isPlainObject(e))return;i=r._generateMarkup(e)}i.is("li")||(i=i.wrap("<li></li>").parent()),s=i,typeof n=="number"&&n>=0&&n<r.count?(s.insertBefore(r._getItemByIndex(n)),r.list.children("li").each(function(e,r){var i=t(r);i.data("itemIndex")>=n&&i.data("itemIndex",i.data("itemIndex")+1)})):(n==0&&s.appendTo(r.list),s.insertAfter(r._getItemByIndex(r.count-1))),r._createItem(i,n!==undefined?n:r.count),r._collectionChanged("add")},n.prototype.remove=function(e){var n=this,r;typeof e=="number"&&e>=0&&e<n.count?(r=n._getItemByIndex(e),n.list.children("li").each(function(n,r){var i=t(r);i.data("itemIndex")>e&&i.data("itemIndex",i.data("itemIndex")-1)})):r=n._getItemByIndex(n.count-1),r&&r.remove(),n._collectionChanged("remove")},n}(e.wijmoWidget);e.WijCarousel=T,T.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-a",stateDefault:"ui-btn-up-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-b",iconPlay:"ui-icon-arrow-r",iconPause:"ui-icon-grid"},initSelector:":jqmData(role='wijcarousel')",data:[],auto:!1,interval:5e3,showTimer:!1,buttonPosition:"inside",showPager:!1,prevBtnClass:{defaultClass:"",hoverClass:"",disableClass:""},nextBtnClass:{defaultClass:"",hoverClass:"",disableClass:""},pagerType:"numbers",thumbnails:{mouseover:null,mouseout:null,mousedown:null,mouseup:null,click:null,imageWidth:58,imageHeight:74,images:[]},pagerPosition:{},orientation:"horizontal",sliderOrientation:"horizontal",loop:!0,animation:{queue:!0,disable:!1,duration:1e3,easing:"linear"},start:0,display:1,preview:!1,step:1,showControls:!1,control:"",controlPosition:{},showCaption:!0,showControlsOnHover:!1,itemClick:null,beforeScroll:null,afterScroll:null,loadCallback:null}),t.wijmo.registerWidget("wijcarousel",T.prototype)})(wijmo||(wijmo={}));