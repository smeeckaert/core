var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijsplitter",r=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._setFullSplit=function(e){var t=this,n=t._fields,r=e?"100%":n.width,i=e?"100%":n.height;t.element.css("width",r).css("height",i)},n.prototype._setOption=function(e,n){var r=this,i=r.options,s,o=t.extend({},i[e]);if(e==="fullSplit")r._setFullSplit(n);else if(t.isPlainObject(i[e])){e==="panel1"&&n.collapsed!==undefined?r._setPanel1Collapsed(n.collapsed):e==="panel2"&&n.collapsed!==undefined&&r._setPanel2Collapsed(n.collapsed),i[e]=t.extend(!0,i[e],n);return}t.Widget.prototype._setOption.apply(r,arguments),o!==n&&(e==="orientation"?r.refresh():e==="collapsingPanel"?r.refresh():e==="fullSplit"?r.refresh(!0,!1):e==="splitterDistance"?(r.refresh(!1,!1),r._trigger("sized")):e==="showExpander"&&(s=r._fields.expander,s&&s.length&&s.css("display",n?"":"none"))),e==="disabled"&&r._handleDisabledOption(n,r.element)},n.prototype._create=function(){var e=this,n=e.element,r=e.options,i;window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),r.splitterDistance==100&&(i=this.element.width()-r.panel2.minSize,r.panel1.minSize>r.splitterDistance?r.splitterDistance=r.panel1.minSize:i<r.splitterDistance&&(r.splitterDistance=i)),e._fields={width:n.width(),height:n.height()},r.fullSplit&&e._setFullSplit(!0),e._splitterify(),e._updateElementsCss(),e._updateElements(),e._bindEvents(),e._initResizer(),r.disabled&&e.disable(),e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){r.fullSplit&&(e.refresh(),e._updateElements(),e._initResizer())},"wijsplitter"),e._trigger("load",null,e)},n.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},n.prototype.destroy=function(){var e=this,n=e.options,r=e.element,i=e._fields,s=i.wrapper,o=i.expander,u=i.bar,a=i.panel1,f=i.panel2,l=i.originalStyle,c=e.widgetName,h=i.oriPnl1Content,p=i.oriPnl2Content,d=i.oriPnl1ContentStyle,v=i.oriPnl2ContentStyle,m=n.wijCSS,g=m.vSplitterCss,y=m.vSplitterCssPrefix,b=m.hSplitterCss,w=m.hSplitterCssPrefix,E=m.panelCss;t.fn.resizable&&a&&a.n.is(":ui-resizable")&&a.n.resizable("destroy"),h&&(h.removeClass(y+a.contentCss+" "+n.wijCSS.hSplitterCssPrefix+a.contentCss+" "+n.wijCSS.content),d===undefined?h.removeAttr("style"):h.attr("style",d),h.appendTo(r)),p&&(p.removeClass(y+f.contentCss+" "+n.wijCSS.hSplitterCssPrefix+f.contentCss+" "+n.wijCSS.content),v===undefined?p.removeAttr("style"):p.attr("style",v),p.appendTo(r)),a.n.unbind("."+c),o.unbind("."+c),u.unbind("."+c),t(window).unbind("."+c),s.remove(),r.removeClass(g+" "+b),l===undefined?r.removeAttr("style"):r.attr("style",l),e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null),e._fields=null},n.prototype.refresh=function(e,n){var r=this,i=r._fields,s=i.panel1;if(i._isResizing)return;(n||n===undefined)&&r._updateElementsCss(),r._updateElements();if(e||e===undefined){if(!t.fn.resizable)return;s&&s.n.is(":ui-resizable")&&s.n.resizable("destroy"),r._initResizer()}},n.prototype._createDisabledDiv=function(e){var n=this,r=e?e:n.element,i=r.offset(),s=r.outerWidth(),o=r.outerHeight(),u={"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top};return t.browser.msie&&t.extend(u,{"background-color":"#fff",opacity:.1}),t("<div></div>").addClass("ui-disabled").css(u)},n.prototype._splitterify=function(){var e=this,n=e.element,r=e.options,i=e._fields,s,o,u,a,f={n:undefined,content:n.find(">div:eq(0)")},l={n:undefined,content:n.find(">div:eq(1)")};i.originalStyle=n.attr("style"),s=t("<div></div>").appendTo(n),f.n=t("<div></div>").appendTo(s),f.content.length===0?f.content=t("<div></div>"):(i.oriPnl1Content=f.content,i.oriPnl1ContentStyle=f.content.attr("style")),f.content.appendTo(f.n),o=t("<div></div>").appendTo(s),r.barZIndex!==-1&&o.css("z-index",r.barZIndex),u=t("<div></div>").appendTo(o).attr("role","button"),a=t("<span></span>").appendTo(u),l.n=t("<div></div>").appendTo(s),l.content.length===0?l.content=t("<div></div>"):(i.oriPnl2Content=l.content,i.oriPnl2ContentStyle=l.content.attr("style")),l.content.appendTo(l.n),i.wrapper=s,i.panel1=f,i.panel2=l,i.bar=o,i.expander=u,i.icon=a},n.prototype._updateElementsCss=function(){var e=this,t=e.element,n=e.options,r=n.orientation==="vertical",i=e._fields,s=i.wrapper,o=n.collapsingPanel,u=n.collapsingPanel==="panel1"?"panel2":"panel1",a=i.bar,f=i.expander,l=i.icon,c=n.wijCSS,h=c.vSplitterCss,p=c.vSplitterCssPrefix,d=c.hSplitterCss,v=c.hSplitterCssPrefix,m=c.panelCss;t.removeClass(h+" "+d).addClass(r?h:d),s.attr("class",c.wrapperCss),i[o].n.removeClass(p+m[o].n+" "+v+m[o].n).addClass((r?p:v)+m[o].n),i[o].content.removeClass(p+m[o].content+" "+v+m[o].content+" "+c.content).addClass((r?p:v)+m[o].content+" "+c.content),a.attr("class",(r?p:v)+c.barCss+" "+c.header).css("width","").css("height",""),f.attr("class",c.cornerCssPrefix+(r?"bl "+p:"tr "+v)+c.expanderCss+" "+c.stateDefault).css("left","").css("top",""),l.attr("class",c.icon+" "+(r?c.iconArrowLeft:c.iconArrowUp)),i[u].n.removeClass(p+m[u].n+" "+v+m[u].n).addClass((r?p:v)+m[u].n),i[u].content.removeClass(p+m[u].content+" "+v+m[u].content+" "+c.content).addClass((r?p:v)+m[u].content+" "+c.content),e._updateExpanderCss()},n.prototype._updateExpanderCss=function(){var e=this,t=e.options,n=e._fields,r=n.expander,i=n.icon,s=t.wijCSS,o=s.cornerCssPrefix,u=t.orientation==="vertical",a=t.collapsingPanel!=="panel1",f=u?s.vSplitterCssPrefix:s.hSplitterCssPrefix,l=(u?1:0)*2+(a?1:0),c=["bl","tr","tr","bl"][l],h=["br","tl"][+a],p=[s.iconArrowDown,s.iconArrowUp,s.iconArrowRight,s.iconArrowLeft][l],d=["tr","bl","bl","tr"][l],v=["tl","br"][+a],m=[s.iconArrowUp,s.iconArrowDown,s.iconArrowLeft,s.iconArrowRight][l];r.removeClass(f+t.collapsingPanel+"-"+s.expandedCss+" "+f+t.collapsingPanel+"-"+s.collapsedCss+" "+o+c+" "+o+h+" "+o+d+" "+o+v),i.removeClass(p+" "+m),t.panel1.collapsed||t.panel2.collapsed?(r.addClass(o+c+" "+o+h+" "+f+t.collapsingPanel+"-"+s.collapsedCss),i.addClass(p)):(r.addClass(o+d+" "+o+v+" "+f+t.collapsingPanel+"-"+s.expandedCss),i.addClass(m))},n.prototype._updateElements=function(){var e=this,t=e.element,n=e.options,r=n.splitterDistance,i=n.collapsingPanel,s=n.collapsingPanel==="panel1"?"panel2":"panel1",o=e._fields,u=o.wrapper,a=o.panel1,f=o.panel2,l=o.bar,c=o.expander,h=t.width(),p=t.height(),d,v;u.height(p),e._setPanelsScrollMode(),n.orientation==="vertical"?(d=l.outerWidth(!0),r>h-d&&(r=h-d),u.width(h*2),n.panel1.collapsed?(i==="panel1"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel1"+"-"+n.wijCSS.collapsedCss),o.panel1.n.css("display","none"),o.panel2.n.css("display",""),r=0):(i==="panel1"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel1"+"-"+n.wijCSS.expandedCss),o.panel1.n.css("display",""),o.panel2.n.css("display",n.panel2.collapsed?"none":"")),n.panel2.collapsed?(i==="panel2"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel2"+"-"+n.wijCSS.collapsedCss),o.panel2.n.css("display","none"),r=i==="panel1"?h-d:h):(i==="panel2"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel2"+"-"+n.wijCSS.expandedCss),o.panel2.n.css("display","")),!n.panel1.collapsed&&!n.panel2.collapsed&&c.addClass(n.wijCSS.vSplitterCssPrefix+n.collapsingPanel+"-"+n.wijCSS.expandedCss),i==="panel1"?(o.panel1.n.height(p).width(r),o.panel2.n.height(p).width(h-r-d)):(o.panel1.n.height(p).width(r-d),o.panel2.n.height(p).width(h-r)),o.panel1.content.outerHeight(p,!0),l.outerHeight(p,!0),o.panel2.content.outerHeight(p,!0),c.css("cursor","pointer").css("top",p/2-c.outerHeight(!0)/2)):(v=l.outerHeight(!0),r>p-v&&(r=p-v),n.panel1.collapsed?(i==="panel1"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel1"+"-"+n.wijCSS.collapsedCss),o.panel1.n.css("display","none"),o.panel2.n.css("display",""),r=0):(i==="panel1"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel1"+"-"+n.wijCSS.expandedCss),o.panel1.n.css("display",""),o.panel2.n.css("display",n.panel2.collapsed?"none":"")),n.panel2.collapsed?(i==="panel2"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel2"+"-"+n.wijCSS.collapsedCss),o.panel2.n.css("display","none"),r=i==="panel1"?p-v:p):(i==="panel2"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel2"+"-"+n.wijCSS.expandedCss),o.panel2.n.css("display","")),i==="panel1"?(o.panel1.n.width(h).height(r),o.panel2.n.width(h).height(p-r-v),o.panel1.content.outerHeight(r,!0),o.panel2.content.outerHeight(p-r-v,!0)):(o.panel1.n.width(h).height(r-v),o.panel2.n.width(h).height(p-r),o.panel1.content.outerHeight(r-v,!0),o.panel2.content.outerHeight(p-r,!0)),c.css("cursor","pointer").css("left",h/2-c.outerWidth(!0)/2)),c.css("display",n.showExpander?"":"none")},n.prototype._bindEvents=function(){var e=this,n=e.options,r=e._fields,i=r.bar,s=r.expander,o=e.widgetName;s.bind("mouseover."+o,function(e){if(n.disabled)return;s.addClass(n.wijCSS.stateHover)}).bind("mouseout."+o,function(e){if(n.disabled)return;s.removeClass(n.wijCSS.stateHover).removeClass(n.wijCSS.stateActive)}).bind("mousedown."+o,function(e){if(n.disabled)return;s.addClass(n.wijCSS.stateActive)}).bind("mouseup."+o,function(t){if(n.disabled)return;s.removeClass(n.wijCSS.stateActive),n.collapsingPanel==="panel1"?e._setPanel1Collapsed(!n.panel1.collapsed,t):e._setPanel2Collapsed(!n.panel2.collapsed,t)}),i.bind("mouseover."+o,function(e){if(n.disabled)return;i.addClass(n.wijCSS.stateHover)}).bind("mouseout."+o,function(e){if(n.disabled)return;i.removeClass(n.wijCSS.stateHover)}),r.panel1.n.bind("animating."+o,function(t){if(n.disabled)return;e._adjustLayout(e),e._trigger("sizing",t,null)}).bind("animated."+o,function(t){if(n.disabled)return;e._adjustLayout(e),e._trigger("sized",t,null)}),e.element.on("mouseover."+o,".ui-resizable-handle",function(e){if(n.disabled)return;i.addClass(n.wijCSS.stateHover)}).on("mouseout."+o,".ui-resizable-handle",function(e){if(n.disabled)return;i.removeClass(n.wijCSS.stateHover)}),t(window).bind("resize."+o,function(t){if(n.disabled)return;n.fullSplit&&e.element.is(":visible")&&(e._updateElements(),e._initResizer())})},n.prototype._setPanel1Collapsed=function(e,n){var r=this,i=r.options,s=i.panel1.collapsed,o=t(".ui-resizable-handle",r.element);if(s===e)return;if(i.collapsingPanel==="panel1"&&!r._trigger(s?"expand":"collapse",n,null))return;i.panel1.collapsed=e,e?(i.panel2.collapsed=!1,i.collapsingPanel==="panel2"&&o.hide()):o.show(),r._updateElements(),r._updateExpanderCss(),i.collapsingPanel==="panel1"&&r._trigger(e?"collapsed":"expanded",n,null)},n.prototype._setPanel2Collapsed=function(e,n){var r=this,i=r.options,s=i.panel2.collapsed,o=t(".ui-resizable-handle",r.element);if(s===e)return;if(i.collapsingPanel==="panel2"&&!r._trigger(s?"expand":"collapse",n,null))return;i.panel2.collapsed=e,e?(i.panel1.collapsed=!1,i.collapsingPanel==="panel1"&&o.hide()):o.show(),r._updateElements(),r._updateExpanderCss(),i.collapsingPanel==="panel2"&&r._trigger(e?"collapsed":"expanded",n,null)},n.prototype._initResizer=function(){var e=this,n=e.element,r=e.options,i=e._fields,s=i.bar,o=r.collapsingPanel,u=r.collapsingPanel==="panel1"?"panel2":"panel1",a=r.resizeSettings,f=a.animationOptions,l=f.disabled?0:f.duration,c=n.width(),h=n.height(),p,d,v,m,g,y,b;if(!t.fn.resizable)return;r.orientation==="vertical"?(p=s.outerWidth(!0),d=c-p-r[u].minSize,v=r[o].minSize,v<2&&(v=2),i.panel1.n.resizable({wijanimate:!0,minWidth:v,maxWidth:d,handles:"e",helper:r.wijCSS.vSplitterCssPrefix+r.wijCSS.resizeHelperCss,animateDuration:l,animateEasing:f.easing,ghost:a.ghost,start:function(){i._isResizing=!0},stop:function(){i._isResizing=!1}})):(m=s.outerHeight(!0),g=h-m-r[u].minSize,y=r[o].minSize,y<2&&(y=2),i.panel1.n.resizable({wijanimate:!0,minHeight:y,maxHeight:g,handles:"s",helper:r.wijCSS.hSplitterCssPrefix+r.wijCSS.resizeHelperCss,animateDuration:l,animateEasing:f.easing,ghost:a.ghost,start:function(){i._isResizing=!0},stop:function(){i._isResizing=!1}})),b=t(".ui-resizable-handle",n),r[u].collapsed?b.hide():b.show(),t.browser.msie&&parseInt(t.browser.version)<7&&r.orientation==="vertical"&&b.height(n.height())},n.prototype._adjustLayout=function(e){var t=e.options,n=e._fields,r=n.panel1,i=t.orientation==="vertical"?r.n.width():r.n.height();if(t.splitterDistance===i)return;t.splitterDistance=i,e._updateElements()},n.prototype._setPanelsScrollMode=function(){var e=this,n=e._fields,r=e.options,i=[r.panel1.scrollBars,r.panel2.scrollBars];t.each([n.panel1,n.panel2],function(e,t){i[e]==="auto"?t.content.css("overflow","auto"):i[e]==="both"?t.content.css("overflow","scroll"):i[e]==="none"?t.content.css("overflow","hidden"):i[e]==="horizontal"?t.content.css("overflow-x","scroll").css("overflow-y","hidden"):i[e]==="vertical"&&t.content.css("overflow-x","hidden").css("overflow-y","scroll")})},n}(e.wijmoWidget);e.WijSplitter=r,r.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{initSelector:":jqmData(role='wijsplitter')",sizing:null,sized:null,expand:null,collapse:null,expanded:null,collapsed:null,barZIndex:-1,showExpander:!0,splitterDistance:100,orientation:"vertical",fullSplit:!1,resizeSettings:{animationOptions:{duration:100,easing:"swing",disabled:!1},ghost:!1},panel1:{minSize:1,collapsed:!1,scrollBars:"auto"},panel2:{minSize:1,collapsed:!1,scrollBars:"auto"},collapsingPanel:"panel1",wijCSS:{cornerCssPrefix:"ui-corner-",arrowCssPrefix:"ui-icon-triangle-1-",panelCss:{panel1:{n:"panel1",content:"panel1-content"},panel2:{n:"panel2",content:"panel2-content"}},wrapperCss:"wijmo-wijsplitter-wrapper",hSplitterCss:"wijmo-wijsplitter-horizontal",vSplitterCss:"wijmo-wijsplitter-vertical",hSplitterCssPrefix:"wijmo-wijsplitter-h-",vSplitterCssPrefix:"wijmo-wijsplitter-v-",collapsedCss:"collapsed",expandedCss:"expanded",resizeHelperCss:"resize-helper",barCss:"bar",expanderCss:"expander"},wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c"}}),t.wijmo.registerWidget("wijsplitter",r.prototype),t.ui!=null&&t.ui.plugin!=null&&t.ui.plugin.add("resizable","wijanimate",{stop:function(e,n){var r=t(this).data("uiResizable"),i=r.options,s=r.element,o=r._proportionallyResizeElements,u=o.length&&/textarea/i.test(o[0].nodeName),a=u&&t.ui.hasScroll(o[0],"left")?0:r.sizeDiff.height,f=u?0:r.sizeDiff.width,l,c,h;s.css("width",r.originalSize.width).css("height",r.originalSize.height),l={width:r.size.width-f,height:r.size.height-a},c=parseInt(s.css("left"),10)+(r.position.left-r.originalPosition.left)||null,h=parseInt(s.css("top"),10)+(r.position.top-r.originalPosition.top)||null,s.animate(t.extend(l,h&&c?{top:h,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(s.css("width"),10),height:parseInt(s.css("height"),10),top:parseInt(s.css("top"),10),left:parseInt(s.css("left"),10)};o&&o.length&&t(o[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",e),s.trigger("animating")},complete:function(){s.trigger("animated")}})}})})(wijmo||(wijmo={}));