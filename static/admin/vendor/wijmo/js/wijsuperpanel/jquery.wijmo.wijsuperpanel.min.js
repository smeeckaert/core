var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(m){var h=jQuery;var j=(function(){function q(){this.wijCSS={superpanelHeader:"wijmo-wijsuperpanel-header",superpanelFooter:"wijmo-wijsuperpanel-footer",superpanelHandle:"",superpanelVBarbuttonTop:"",superpanelVBarbuttonBottom:"",superpanelHBarbuttonLeft:"",superpanelHBarbuttonRight:"",superpanelHBarContainer:"",superpanelVBarContainer:"",superpanelButton:"",superpanelButtonLeft:"",superpanelButtonRight:"",superpanelButtonTop:"",superpanelButtonBottom:""};this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"};this.initSelector=":jqmData(role='wijsuperpanel')";this.allowResize=false;this.autoRefresh=false;this.animationOptions={queue:false,disabled:false,duration:250,easing:undefined};this.hScrollerActivating=null;this.hScroller={scrollBarPosition:"bottom",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0};this.keyboardSupport=false;this.keyDownInterval=100;this.mouseWheelSupport=true;this.bubbleScrollingEvent=true;this.resizableOptions={handles:"all",helper:"ui-widget-content wijmo-wijsuperpanel-helper"};this.resized=null;this.dragStop=null;this.painted=null;this.scrolling=null;this.scroll=null;this.scrolled=null;this.showRounder=true;this.vScrollerActivating=null;this.vScroller={scrollBarPosition:"right",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0};this.customScrolling=false;this.listenContentScroll=false}return q})();var i=(function(r){__extends(q,r);function q(){r.apply(this,arguments)}q.prototype.destroy=function(){};q.prototype.needToScroll=function(s){};q.prototype.scrollChildIntoView=function(s){};q.prototype.hScrollTo=function(s,t){};q.prototype.vScrollTo=function(t,s){};q.prototype.scrollPxToValue=function(t,s){};q.prototype.scrollTo=function(s,u,t){};q.prototype.refresh=function(){};q.prototype.paintPanel=function(s){};q.prototype.getContentElement=function(){};return q})(b.wijmoWidget);m.wijsuperpanel=i;var g;if(!h.support.isTouchEnabled||!h.support.isTouchEnabled()){var c="wijmo-wijsuperpanel-handle",n="wijmo-wijsuperpanel-hbarcontainer",p="wijmo-wijsuperpanel-vbarcontainer",f="",d="<div class='wijmo-wijsuperpanel-statecontainer'><div class='wijmo-wijsuperpanel-contentwrapper'><div class='wijmo-wijsuperpanel-templateouterwrapper'></div></div></div>",e="<div class='wijmo-wijsuperpanel-hbarcontainer {superpanelHBarContainer} {header}'><div class='wijmo-wijsuperpanel-handle {superpanelHandle} {stateDefault} {cornerAll}'><span class='{icon} {iconVGripSolid}'></span></div><div class='wijmo-wijsuperpanel-hbar-buttonleft {superpanelHBarbuttonLeft} {stateDefault} {cornerBL}'><span class='{icon} {iconArrowLeft}'></span></div><div class='wijmo-wijsuperpanel-hbar-buttonright {superpanelHBarbuttonRight} {stateDefault} {cornerBR}'><span class='{icon} {iconArrowRight}'></span></div></div>",l="<div class='wijmo-wijsuperpanel-vbarcontainer {superpanelVBarContainer} {header}'><div class='wijmo-wijsuperpanel-handle {superpanelHandle} {stateDefault} {cornerAll}'><span class='{icon} {iconHGripSolid}'></span></div><div class='wijmo-wijsuperpanel-vbar-buttontop {superpanelVBarbuttonTop} {stateDefault} {cornerTR}'><span class='{icon} {iconArrowUp}'></span></div><div class='wijmo-wijsuperpanel-vbar-buttonbottom {superpanelVBarbuttonBottom} {stateDefault} {cornerBR}'><span class='{icon} {iconArrowDown}'></span></div></div>",k="<div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonleft {superpanelButtonLeft}'><span class='{icon} {iconCaratLeft}'></span></div><div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonright {superpanelButtonRight}'><span class='{icon} {iconCaratRight}'></span></div>",o="<div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton}  wijmo-wijsuperpanel-buttontop {superpanelButtonTop}'><span class='{icon} {iconCaratUp}'></span></div><div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonbottom {superpanelButtonBottom}'><span class='{icon} {iconCaratDown}'> </span></div>";i.prototype=h.extend(true,{},h.Widget.prototype,{widgetEventPrefix:"wijsuperpanel",_setOption:function(t,w){var q=this,y=q.options,v=q._fields(),x=v.hbarDrag,s=v.vbarDrag,u=v.resizer;if(t==="animationOptions"){w=h.extend(y.animationOptions,w)}else{if(t==="hScroller"){if(w.scrollLargeChange!==undefined&&w.scrollLargeChange!==null){q._autoHLarge=false}w=h.extend(y.hScroller,w);q.refresh()}else{if(t==="vScroller"){if(w.scrollLargeChange!==undefined&&w.scrollLargeChange!==null){q._autoVLarge=false}w=h.extend(y.vScroller,w);q.refresh()}else{if(t==="resizableOptions"){w=h.extend(q.resizableOptions,w)}}}}h.Widget.prototype._setOption.apply(q,arguments);if(h.isPlainObject(w)){q.options[t]=w}switch(t){case"allowResize":q._initResizer();break;case"disabled":if(w){if(x!==undefined){x.draggable("disable")}if(s!==undefined){s.draggable("disable")}if(u!==undefined){u.resizable("disable")}}else{if(x!==undefined){x.draggable("enable")}if(s!==undefined){s.draggable("enable")}if(u!==undefined){u.resizable("enable")}}break;case"mouseWheelSupport":case"keyboardSupport":q._bindElementEvents(q,v,q.element,y);break}return q},_create:function(){var q=this,r=q.options;r.vScroller.dir="v";r.hScroller.dir="h";q._initMarkup();q.paintPanel();q._initResizer();if(q.options.disabled){q.disable()}q._detectAutoRefresh();if(r.listenContentScroll){q._listenContentScroll()}if(q.element.is(":hidden")&&q.element.wijAddVisibilityObserver){q.element.wijAddVisibilityObserver(function(){if(q.element.wijRemoveVisibilityObserver){q.element.wijRemoveVisibilityObserver()}q.refresh()},"wijsuperpanel")}},_initMarkup:function(){var q=this.options.wijCSS,r=/\{(\w+?)\}/ig,s=function(u,t){return q[t]};f=q.stateActive;e=e.replace(r,s);l=l.replace(r,s);k=k.replace(r,s);o=o.replace(r,s)},_detectAutoRefresh:function(){var q=this,r=h.wijmo.wijsuperpanel.panels;if(r===undefined){r=[];h.wijmo.wijsuperpanel.panels=r}r.push(q);if(q.options.autoRefresh){if(!h.wijmo.wijsuperpanel.setAutoRefreshInterval){h.wijmo.wijsuperpanel.setAutoRefreshInterval=q._setAutoRefreshInterval;h.wijmo.wijsuperpanel.setAutoRefreshInterval()}}},_setAutoRefreshInterval:function(){var q=h.wijmo.wijsuperpanel.autoRereshInterval,r=h.wijmo.wijsuperpanel.panels,s;s=window.setInterval(function(){window.clearInterval(s);var w=r.length,y=false,v,t,A,u,x,z;for(v=0;v<w;v++){t=r[v];A=t.element[0];u=t.options.autoRefresh;if(u){y=true}x=t.getContentElement();z=t._paintedMark;if(u&&x.is(":visible")&&(z===undefined||z.width!==x[0].offsetWidth||z.height!==x[0].offsetHeight||z.mainWidth!==A.offsetWidth||z.mainHeight!==A.offsetHeight)){t.paintPanel()}}if(y){window.setTimeout(h.wijmo.wijsuperpanel.setAutoRefreshInterval,0)}},q===undefined?500:q)},destroy:function(){var q=this,u=q._fields(),t=q.element,s,r,v=q.options.wijCSS;h.wijmo.wijsuperpanel.panels=h.grep(h.wijmo.wijsuperpanel.panels,function(w){return w!==q},false);if(!u.initialized){return}if(q._radiusKey){q.element.css(q._radiusKey,"")}if(u.intervalID!==undefined){window.clearInterval(u.intervalID);u.intervalID=undefined}if(u.resizer!==undefined){u.resizer.resizable("destroy")}if(u.hbarContainer!==undefined){u.hbarDrag.remove();u.hbarContainer.unbind("."+q.widgetName)}if(u.vbarContainer!==undefined){u.vbarDrag.remove();u.vbarContainer.unbind("."+q.widgetName)}t.unbind("."+q.widgetName);u.contentWrapper.unbind("."+q.widgetName);s=u.stateContainer.find(">.wijmo-wijsuperpanel-button");s.unbind("."+q.widgetName);r=u.templateWrapper;r.contents().each(function(w,x){t.append(x)});u.stateContainer.remove();if(u.tabindex){t.removeAttr("tabindex")}t.removeClass(["wijmo-wijsuperpanel",v.widget,v.content,v.cornerAll].join(" "));h.Widget.prototype.destroy.apply(q,arguments)},_fields:function(){var q=this,s=q.element,r=q.widgetName+"-fields",t=q._fieldsStore;if(t===undefined){t={};s.data(r,t);q._fieldsStore=t}return t},_hasMode:function(q,s){var r=q.scrollMode.split(",");r=h.map(r,function(t){return h.trim(t).toLowerCase()});return h.inArray(s.toLowerCase(),r)>-1},_bindElementEvents:function(r,v,u,w){var q=r._hasMode(w.hScroller,"edge"),t=r._hasMode(w.vScroller,"edge"),s=r.widgetName;if(q||t){if(r._mousemoveBind===undefined){r._mousemoveBind=true;u.bind("mousemove."+s,r,r._contentMouseMove);u.bind("mouseleave."+s,null,function(){r._clearInterval()})}}else{u.unbind("mousemove",r._contentMouseMove);r._mousemoveBind=undefined}if(w.mouseWheelSupport){if(r._mouseWheelBind===undefined){r._mouseWheelBind=true;u.bind("mousewheel."+s,r,r._panelMouseWheel)}}else{u.unbind("mousewheel",r._panelMouseWheel);r._mouseWheelBind=undefined}if(w.keyboardSupport){if(r._keyboardBind===undefined){r._keyboardBind=true;u.bind("keydown."+s,r,r._panelKeyDown)}}else{u.unbind("keydown",r._panelKeyDown);r._keyboardBind=undefined}},_dragStop:function(t,q,r){var s={dragHandle:r};q._trigger("dragStop",t,s)},_contentMouseMove:function(E){if(E.data.options.disabled){return}var x=E.data,z=x.options,t=z.hScroller,q=z.vScroller,u=h(E.currentTarget),D=x._fields(),F=x._hasMode(t,"edge"),w=x._hasMode(q,"edge"),H={X:E.pageX,Y:E.pageY},G=u.offset(),r=G.left,v=G.top,B=t.hoverEdgeSpan,s=q.hoverEdgeSpan,C=u.innerHeight(),A=u.innerWidth(),y="";r=H.X-r;v=H.Y-v;x._clearInterval();if(F){if(r<B){y="left"}if(r>(A-B)){y="right"}}if(w){if(v<s){y="top"}if(v>(C-s)){y="bottom"}}x._setScrollingInterval(D,y,x,false)},_setScrollingInterval:function(t,r,q,s){var u=q.options;if(r.length>0){t.internalFuncID=window.setInterval(function(){q._doScrolling(r,q,s)},u.keyDownInterval)}},_scrollButtonMouseOver:function(s){var q=s.data,t=q.options,r=h(s.currentTarget);if(t.disabled){return}if(!r.hasAllClasses(t.wijCSS.stateDisabled)){r.bind("mouseout."+q.widgetName,q,q._buttonMouseOut).bind("mousedown."+q.widgetName,q,q._buttonMouseDown).bind("mouseup."+q.widgetName,q,q._buttonMouseUp).addClass(t.wijCSS.stateHover);q._buttonScroll(r,q,"buttonshover")}},_buttonScroll:function(t,q,w){var s="",v=q.options,u=q._fields(),r=q._hasMode(v.hScroller,w),x=q._hasMode(v.vScroller,w);if(t.hasClass("wijmo-wijsuperpanel-buttonleft")&&r){s="left"}else{if(t.hasClass("wijmo-wijsuperpanel-buttonright")&&r){s="right"}else{if(t.hasClass("wijmo-wijsuperpanel-buttontop")&&x){s="top"}else{if(t.hasClass("wijmo-wijsuperpanel-buttonbottom")&&x){s="bottom"}}}}if(s.length>0){q._clearInterval();q._doScrolling(s,q,true);q._setScrollingInterval(u,s,q,true)}},_listenContentScroll:function(){var G=this,t=G.options,B=G._fields(),A=B.hbarContainer,v=B.hbarDrag,D=B.vbarContainer,C=B.vbarDrag,u=B.templateWrapper,z=B.contentWrapper,F=z.width(),y=z.height(),x=u&&u.offset(),s=x&&x.left,r=x&&x.top,q=B.contentWidth,E=B.contentHeight;z.bind("scroll",function(H){var J=u.position(),w=J.left,I=J.top;z.scrollTop(0).scrollLeft(0);u.css({left:w,top:I});if(w<=0&&w>F-q){G._updateScrollValue(G.scrollPxToValue(-w,"h"),t.hScroller);G._scrollDrag("h",A,v,true)}if(I<=0&&I>y-E){G._updateScrollValue(G.scrollPxToValue(-I,"v"),t.vScroller);G._scrollDrag("v",D,C,true)}})},_buttonMouseDown:function(s){var q=s.data,r=h(s.currentTarget),t=q.options.wijCSS;if(q.options.disabled){return}if(!r.hasAllClasses(t.stateDisabled)){r.addClass(t.stateActive);q._buttonScroll(r,q,"buttons")}},_buttonMouseUp:function(s){var q=s.data,r=h(s.currentTarget);r.removeClass(q.options.wijCSS.stateActive);q._clearInterval()},_buttonMouseOut:function(s){var q=s.data,t=q.options.wijCSS,r=h(s.currentTarget);r.unbind("mouseout",q._buttonMouseOut).unbind("mousedown",q._buttonMouseDown).unbind("mouseup",q._buttonMouseUp).removeClass(t.stateHover).removeClass(t.stateActive);q._clearInterval()},_updateScrollValue:function(s,q){var r=h.Event("scrollValueChanged");q.scrollValue=s;this._trigger("scrollValueChanged",r,q)},_panelKeyDown:function(u){var s=u.data,v=s.options,r=u.shiftKey,q=u.keyCode,t=b.getKeyCodeEnum();if(!v.keyboardSupport||v.disabled){return}if(q===t.LEFT){s._doScrolling("left",s,r)}else{if(q===t.RIGHT){s._doScrolling("right",s,r)}else{if(q===t.UP){s._doScrolling("top",s,r)}else{if(q===t.DOWN){s._doScrolling("bottom",s,r)}}}}u.stopPropagation();u.preventDefault()},_draggingInternal:function(y,F,A,D){var u=A.dir,z=u==="h",C=z?"left":"top",t=y.position[C]-F._getScrollContainerPadding(C),r=F._getTrackLen(u)-D[z?"outerWidth":"outerHeight"](true),x=t/r,w=(A.scrollMax-A.scrollLargeChange+1),B=x*w,E,q,s;if(B<A.scrollMin){B=A.scrollMin}if(B>w){B=w}E={oldValue:A.scrollValue,newValue:B,dir:u};if(!F._scrolling(true,F,E)){return}if(F.customScroll){s=Math.abs(F.customScroll);q=F.scrollPxToValue(s,A.dir)}F._updateScrollValue(q||B,A);F.customScroll=undefined;F._setDragAndContentPosition(true,false,u,"dragging")},_dragging:function(u,s,r){var v=r.options,q=h(u.target),t=q.parent();if(t.hasAllClasses(n)){r._draggingInternal(s,r,v.hScroller,q)}else{r._draggingInternal(s,r,v.vScroller,q)}},_panelMouseWheel:function(v,x){var z=v.data,q=z.options,y,r="",s,u=q.hScroller,t=q.vScroller,w;if(!q.mouseWheelSupport||q.disabled){return}y=h(v.srcElement||v.originalEvent.target);s=y.closest("."+n,z.element).size()>0;if(x>0){r=s?"left":"top"}else{r=s?"right":"bottom"}if(r.length>0){z._doScrolling(r,z)}w=false;if(r==="left"){w=!z.hNeedScrollBar||Math.abs(u.scrollValue-u.scrollMin)<0.001}if(r==="right"){w=!z.hNeedScrollBar||Math.abs(u.scrollValue-(u.scrollMax-z._getHScrollBarLargeChange()+1))<0.001}if(r==="top"){w=!z.vNeedScrollBar||Math.abs(t.scrollValue-t.scrollMin)<0.001}if(r==="bottom"){w=!z.vNeedScrollBar||Math.abs(t.scrollValue-(t.scrollMax-z._getVScrollBarLargeChange()+1))<0.001}if(!w||!q.bubbleScrollingEvent||r==="left"||r==="right"){v.stopPropagation();v.preventDefault()}},_documentMouseUp:function(s){var q=s.data.self,r=s.data.ele;r.removeClass(q.options.wijCSS.stateActive);q._clearInterval();h(document).unbind("mouseup",q._documentMouseUp)},_scrollerMouseOver:function(t){var r=t.data,u=r.options,q,s=null,v=false;if(u.disabled){return}q=h(t.srcElement||t.originalEvent.target||t.originalEvent.srcElement);if(q.hasAllClasses(u.wijCSS.stateDefault)){s=q;v=true}else{if(q.parent().hasAllClasses(u.wijCSS.stateDefault)){s=q.parent();v=true}else{if(q.hasAllClasses(p)||q.hasAllClasses(n)){s=q}}}if(s){if(v){s.addClass(u.wijCSS.stateHover)}s.bind("mouseout."+r.widgetName,r,r._elementMouseOut);s.bind("mousedown."+r.widgetName,r,r._elementMouseDown);s.bind("mouseup."+r.widgetName,r,r._elementMouseUp)}},_elementMouseUp:function(r){var q=h(r.currentTarget);q.removeClass(f)},_elementMouseDown:function(v){var A=h(v.currentTarget),z=v.data,r,u,q="",y=false,s=false,x,w,t;if(z.options.disabled||v.which!==1){return}if(A.hasClass("wijmo-wijsuperpanel-vbar-buttontop")){q="top";s=true}else{if(A.hasClass("wijmo-wijsuperpanel-vbar-buttonbottom")){q="bottom";s=true}else{if(A.hasClass("wijmo-wijsuperpanel-hbar-buttonleft")){q="left";s=true}else{if(A.hasClass("wijmo-wijsuperpanel-hbar-buttonright")){q="right";s=true}else{if(A.hasAllClasses(c)){A.addClass(f);return}else{if(A.hasAllClasses(n)){r=A.find("."+c);x=r.offset();if(v.pageX<x.left){q="left"}else{q="right"}y=true}else{if(A.hasAllClasses(p)){u=A.find("."+c);w=u.offset();if(v.pageY<w.top){q="top"}else{q="bottom"}y=true}}}}}}}z._clearInterval();z._doScrolling(q,z,y);t=z._fields();z._setScrollingInterval(t,q,z,y);if(s){A.addClass(f)}h(document).bind("mouseup."+z.widgetName,{self:z,ele:A},z._documentMouseUp)},doScrolling:function(q,r){this._doScrolling(q,this,r)},_setScrollerValue:function(v,y,B,r,E,C,G){var z=y.scrollMin,A=C?r:B,D=y.scrollValue,F=0,u,w,x,q,s;if(!D){D=z}if(E){u=y.scrollMax-r+1;if(Math.abs(D-u)<0.001){G._clearInterval();return false}w=y.firstStepChangeFix;F=D+A;if(!C&&Math.abs(D-z)<0.0001&&!isNaN(w)){F+=w}if(F>u){F=u}}else{if(Math.abs(D-z)<0.001){G._clearInterval();return false}F=D-A;if(F<0){F=z}}x={oldValue:y.scrollValue,newValue:F,direction:v,dir:y.dir};if(!G._scrolling(true,G,x)){return false}if(G.customScroll){s=Math.abs(G.customScroll);q=G.scrollPxToValue(s,y.dir)}G._updateScrollValue(q||F,y);G.customScroll=undefined;return true},_doScrolling:function(s,z,y){var r=z.options,u=r.vScroller,v=r.hScroller,t=z._getVScrollBarSmallChange(),x=z._getVScrollBarLargeChange(),w=z._getHScrollBarLargeChange(),q=z._getHScrollBarSmallChange();if(s==="top"||s==="bottom"){if(!z._setScrollerValue(s,u,t,x,s==="bottom",y,z)){return}s="v"}else{if(s==="left"||s==="right"){if(!z._setScrollerValue(s,v,q,w,s==="right",y,z)){return}s="h"}}z._setDragAndContentPosition(true,true,s)},_disableButtonIfNeeded:function(C){var w=C._fields(),q=C.options,r=w.buttonLeft,t=w.buttonRight,u=w.buttonTop,D=w.buttonBottom,y,z,v,x,B,E,A,s;if(w.intervalID>0){window.clearInterval(w.intervalID)}if(r!==undefined){y=C._getHScrollBarLargeChange();z=q.hScroller.scrollMax-y+1;v=q.hScroller.scrollValue;x=q.hScroller.scrollMin;if(v===undefined){v=x}if(Math.abs(v-x)<0.001||!w.hScrolling){r.addClass(q.wijCSS.stateDisabled)}else{r.removeClass(q.wijCSS.stateDisabled)}if(Math.abs(v-z)<0.001||!w.hScrolling){t.addClass(q.wijCSS.stateDisabled)}else{t.removeClass(q.wijCSS.stateDisabled)}}if(u!==undefined){B=C._getVScrollBarLargeChange();E=q.vScroller.scrollMax-B+1;A=q.vScroller.scrollValue;s=q.vScroller.scrollMin;if(A===undefined){A=s}if(Math.abs(A-s)<0.001||!w.vScrolling){u.addClass(q.wijCSS.stateDisabled)}else{u.removeClass(q.wijCSS.stateDisabled)}if(Math.abs(A-E)<0.001||!w.vScrolling){D.addClass(q.wijCSS.stateDisabled)}else{D.removeClass(q.wijCSS.stateDisabled)}}},_clearInterval:function(){var r=this._fields(),q=r.internalFuncID;if(q>0){window.clearInterval(q);r.internalFuncID=-1}},_elementMouseOut:function(r){var s=h(r.currentTarget),q=r.data;s.unbind("mouseout",q._elementMouseOut);s.unbind("mousedown",q._elementMouseDown);s.unbind("mouseup",q._elementMouseUp);s.removeClass(q.options.wijCSS.stateHover)},_getScrollOffset:function(w){var s=h(w),x=this._fields(),A=x.contentWrapper,C=x.templateWrapper,y,u,t,z,q,v,r,B={left:null,top:null};if(s.length===0){return B}y=s.offset();u=C.offset();y.leftWidth=y.left+s.outerWidth();y.topHeight=y.top+s.outerHeight();t=A.offset();t.leftWidth=t.left+A.outerWidth();t.topHeight=t.top+A.outerHeight();v=y.left-u.left;if(y.left<t.left){B.left=v}else{if(y.leftWidth>t.leftWidth){r=y.leftWidth-u.left-A.innerWidth();if(v<r){B.left=v}else{B.left=r}}}z=y.top-u.top;if(y.top<t.top){B.top=z}else{if(y.topHeight>t.topHeight){q=y.topHeight-u.top-A.innerHeight();if(z<q){B.top=z}else{B.top=q}}}return B},_scrollDrag:function(u,y,t,q){var H=this,s=H.options,F=u==="v",A=F?s.vScroller:s.hScroller,w=A.scrollMin,C=A.scrollMax,z=A.scrollValue===undefined?w:(A.scrollValue-w),B=H._getLargeChange(u),D=C-w-B+1,G=-1,r,x,E;if(z>D){z=D}if(y!==undefined){r=H._getTrackLen(u);x=t[F?"outerHeight":"outerWidth"]();E=H._getScrollContainerPadding(F?"top":"left");G=(z/D)*(r-x)+E}if(G>=0){t.css(F?"top":"left",G+"px")}H._scrollEnd(q,H,u)},needToScroll:function(r){var q=this._getScrollOffset(r);return q.top!==null||q.left!==null},scrollChildIntoView:function(t){var s=this._getScrollOffset(t),r=s.left,q=s.top;if(r!==null){this.hScrollTo(r)}if(q!==null){this.vScrollTo(q)}},hScrollTo:function(q,r){var s=this.options;this._updateScrollValue(!!r?q:this.scrollPxToValue(q,"h"),s.hScroller);this._setDragAndContentPosition(true,true,"h","nonestop")},vScrollTo:function(s,q){var r=this.options;this._updateScrollValue(!!q?s:this.scrollPxToValue(s,"v"),r.vScroller);this._setDragAndContentPosition(true,true,"v","nonestop")},scrollPxToValue:function(B,r){var q=this.options,s=(r==="h"?"outerWidth":"outerHeight"),D=(r==="h"?"contentWidth":"contentHeight"),u=(r==="h"?"hScroller":"vScroller"),v=this._fields(),C=v.contentWrapper,F=v[D],A=C[s](),x=q[u].scrollMin,E=q[u].scrollMax,t=E-x,z=(r==="h"?this._getHScrollBarLargeChange():this._getVScrollBarLargeChange()),y=t-z+1,w=y*(B/(F-A));if(w<x){w=x}if(w>y){w=y}return w},scrollTo:function(q,s,r){this.hScrollTo(q,r);this.vScrollTo(s,r)},refresh:function(){this.paintPanel()},paintPanel:function(r){var q=this,u=q.element,v,w,t,s;if(u.is(":visible")){v=typeof document.activeElement!="unknown"?document.activeElement:undefined;w=q.options;t=q._fields();if(!t.initialized){q._initialize(t,u,q)}q._resetLargeChange(q,t,w);q._bindElementEvents(q,t,u,w);s=t.templateWrapper;s.css({"float":"left",left:"0px",top:"0px",width:"auto",height:"auto"});s.hide();s.show();t.contentWidth=s.width();t.contentHeight=s.height();s.css("float","");q._setRounder(q,u);q._setInnerElementsSize(t,u);if(q._testScroll(q,t,w)===false){return false}q._initScrollBars(q,t,w);q._initScrollButtons(q,t,w);q._trigger("painted");q._paintedMark={date:new Date(),mainWidth:u[0].offsetWidth,mainHeight:u[0].offsetHeight,width:t.contentWidth,height:t.contentWidth};if(v!==undefined&&!r){h(v).focus()}return true}return false},_resetLargeChange:function(q,s,t){var r;if(q._autoVLarge){t.vScroller.scrollLargeChange=null}if(q._autoHLarge){t.hScroller.scrollLargeChange=null}s.vTrackLen=undefined;s.hTrackLen=undefined;if(s.vbarContainer){r=s.vbarContainer.children("."+c+":eq(0)");r.detach();s.vbarContainer.remove();s.vbarContainer=undefined}if(s.hbarContainer){r=s.hbarContainer.children("."+c+":eq(0)");r.detach();s.hbarContainer.remove();s.hbarContainer=undefined}},_initialize:function(t,s,r){var u=r.options.wijCSS;t.initialized=true;s.addClass(["wijmo-wijsuperpanel",u.widget,u.content].join(" "));t.oldHeight=s.css("height");var q=s.css("overflow");s.css("overflow","");s.height(s.height());s.css("overflow",q);r._createAdditionalDom(r,t,s)},getContentElement:function(){return this._fields().templateWrapper},_setButtonPosition:function(E,r,w,s,y,x,q){var v=s==="h",C="mouseover."+E.widgetName,F=v?"buttonLeft":"buttonTop",B=v?"buttonRight":"buttonBottom",t=x[F],D=x[B],u,z,A;if(E._hasMode(w,"buttons")||E._hasMode(w,"buttonshover")){u=v?k:o;if(t===undefined){z=h(u).appendTo(q);z.bind(C,E,E._scrollButtonMouseOver);x[F]=t=q.children(v?".wijmo-wijsuperpanel-buttonleft":".wijmo-wijsuperpanel-buttontop");x[B]=D=q.children(v?".wijmo-wijsuperpanel-buttonright":".wijmo-wijsuperpanel-buttonbottom")}A={my:v?"left":"top",of:y,at:v?"left":"top",collision:"none"};h.extend(A,w.decreaseButtonPosition);t.position(A);A={my:v?"right":"bottom",of:y,at:v?"right":"bottom",collision:"none"};h.extend(A,w.increaseButtonPosition);D.position(A)}else{if(t!==undefined){t.remove();D.remove();x[F]=x[B]=undefined}}},_initScrollButtons:function(r,t,u){var q=t.contentWrapper,s=t.stateContainer;r._setButtonPosition(r,u,u.hScroller,"h",q,t,s);r._setButtonPosition(r,u,u.vScroller,"v",q,t,s)},_getVScrollBarSmallChange:function(){var r=this.options,q;if(!r.vScroller.scrollSmallChange){q=this._getVScrollBarLargeChange();r.vScroller.scrollSmallChange=q/2}return r.vScroller.scrollSmallChange},_getVScrollBarLargeChange:function(){return this._getLargeChange("v")},_getLargeChange:function(t){var H=this,s=H.options,A=H._fields(),G=t==="v",z=G?s.vScroller:s.hScroller,B=G?"innerHeight":"innerWidth",x=G?"contentHeight":"contentWidth",y=G?"_autoVLarge":"_autoHLarge",E,w,r,D,q,u,C,F;if(z.scrollLargeChange){return z.scrollLargeChange}E=z.scrollMax;w=z.scrollMin;r=E-w;D=A.contentWrapper;q=D[B]();u=A[x];C=q/(u-q);F=((r+1)*C)/(1+C);if(isNaN(F)){F=0}z.scrollLargeChange=F;H[y]=true;return z.scrollLargeChange},_getHScrollBarSmallChange:function(){var r=this.options,q;if(!r.hScroller.scrollSmallChange){q=this._getHScrollBarLargeChange();r.hScroller.scrollSmallChange=q/2}return r.hScroller.scrollSmallChange},_getHScrollBarLargeChange:function(){return this._getLargeChange("h")},_initScrollBars:function(F,K,H){var y=H.hScroller,C=y.scrollMax,A=y.scrollMin,B=C-A,s=H.vScroller,G=s.scrollMax,E=s.scrollMin,v=G-E,u=K.hbarDrag,J=K.vbarDrag,r,I,x,M,L,z,t,D,q,w;if(F.hNeedScrollBar&&u.is(":visible")){r=F._getHScrollBarLargeChange();I=F._getTrackLen("h");x=F._getDragLength(B,r,I,H.hScroller.scrollMinDragLength);u.width(x);M=u.outerWidth(true)-u.width();u.width(x-M);L=u.children("span");L.css("margin-left",(u.width()-L[0].offsetWidth)/2);if(I<=u.outerWidth(true)){u.hide()}else{u.show()}if(F._isDragging==true){h(document).trigger("mouseup");F._isDragging=false}}if(F.vNeedScrollBar&&J.is(":visible")){z=F._getVScrollBarLargeChange();t=F._getTrackLen("v");D=F._getDragLength(v,z,t,H.vScroller.scrollMinDragLength);J.height(D);q=J.outerHeight(true)-J.height();J.height(D-q);w=J.children("span");w.css("margin-top",(J.height()-w[0].offsetHeight)/2);if(t<=J.outerHeight(true)){J.hide()}else{J.show()}if(F._isDragging==true){h(document).trigger("mouseup");F._isDragging=false}}F._setDragAndContentPosition(false,false,"both")},_getTrackLen:function(t){var s=this,v=s._fields(),u=t+"TrackLen",r=v.hbarContainer,x=v.vbarContainer,q=0,w=0;if(v[u]!==undefined){return v[u]}if(t==="h"){w=s._getScrollContainerPadding("h");q=r.innerWidth()}if(t==="v"){w=s._getScrollContainerPadding("v");q=x.innerHeight()}v[u]=(q-w);return v[u]},_getScrollContainerPadding:function(q){var s=this,u=s._fields(),v=0,r,t;if(q==="h"){v=s._getScrollContainerPadding("left")+s._getScrollContainerPadding("right")}else{if(q==="v"){v=s._getScrollContainerPadding("top")+s._getScrollContainerPadding("bottom")}else{if(q==="left"||q==="right"){r=u.hbarContainer}else{r=u.vbarContainer}t=q+"Padding";if(u[t]!==undefined){v=u[t];return v}if(r&&r.css){v=parseFloat(r.css("padding-"+q))}u[t]=v}}return v},_triggerScroll:function(q,r,t){var s={position:q,dir:r,animationOptions:t};this._trigger("scroll",null,s)},_contentDragAnimate:function(ab,O,U,D,J,x,y){var B=this,X=B.options,T=ab==="v",H=T?X.vScroller:X.hScroller,S=T?"outerHeight":"outerWidth",P=T?"innerHeight":"innerWidth",M=T?"contentHeight":"contentWidth",z=T?"top":"left",G=H.scrollMin,Y=H.scrollMax,Q=Y-G,C=H.scrollValue===undefined?G:(H.scrollValue-G),V=B._getLargeChange(ab),L=Q-V+1,aa=B._fields(),s=aa.contentWrapper,A=aa.templateWrapper,N,w,K,u,W,Z,t,q,E,R,F,I;if(C>L){C=L}N=(aa[M]-s[P]())*(C/L);if(Math.abs(N)<0.001){N=0}N=Math.round(N);w=-1;if(U!==undefined){if(O&&D.is(":animated")&&J!=="nonestop"){D.stop(true,false)}K=B._getTrackLen(ab);u=D[S](true);W=K-u;Z=B._getScrollContainerPadding(z);w=(C/L)*W+Z}if(O&&X.animationOptions&&!X.animationOptions.disabled){if(w>=0&&y!=="dragging"){t=h.extend({},X.animationOptions);t.complete=undefined;if(T){q={top:w}}else{q={left:w}}D.animate(q,t)}E=h.extend({},X.animationOptions);R=X.animationOptions.complete;E.complete=function(){B._scrollEnd(x,B,ab);if(h.isFunction(R)){R(arguments)}};if(O&&A.is(":animated")&&J!=="nonestop"){A.stop(true,false)}if(T){F={top:-N}}else{F={left:-N}}if(!X.customScrolling){A.animate(F,E)}else{B._scrollEnd(x,B,ab,C)}B._triggerScroll(N,ab,E)}else{I=T?"top":"left";if(w>=0&&y!=="dragging"){D[0].style[I]=w+"px"}if(!X.customScrolling){A[0].style[I]=-N+"px"}B._triggerScroll(N,ab);B._scrollEnd(x,B,ab,C)}},_setDragAndContentPosition:function(q,t,s,y,z){var A=this,v=A._fields(),u=v.hbarContainer,r=v.hbarDrag,x=v.vbarContainer,w=v.vbarDrag;if((s==="both"||s==="h")&&v.hScrolling){A._contentDragAnimate("h",t,u,r,y,q,z)}if((s==="both"||s==="v")&&v.vScrolling){A._contentDragAnimate("v",t,x,w,y,q,z)}if(v.intervalID>0){window.clearInterval(v.intervalID)}v.intervalID=window.setInterval(function(){A._disableButtonIfNeeded(A)},500)},_scrolling:function(s,q,u){var t=true;if(s){u.beforePosition=q.getContentElement().position();q._beforePosition=u.beforePosition;t=q._trigger("scrolling",null,u);q.customScroll=u.customScroll}return t},_scrollEnd:function(s,q,r,t){if(s){window.setTimeout(function(){var u=q.getContentElement(),w,v;if(!u.is(":visible")){return}w=q.getContentElement().position();v={dir:r,beforePosition:q._beforePosition,afterPosition:w};if(!isNaN(t)){v.newValue=t}q._trigger("scrolled",null,v)},0)}},_getDragLength:function(t,q,r,u){var w=t/q,v=r/w,s=u;if(v<s){v=s}else{if((v+1)>=r){v=r-1}}return Math.round(v)},_needScrollbar:function(r,s){var q=this._hasMode(r,"scrollbar"),t=r.scrollBarVisibility,u=q&&(t==="visible"||(t==="auto"&&s));return u},_bindBarEvent:function(s,t,r){var q=this;s.bind("mouseover."+q.widgetName,q,q._scrollerMouseOver);if(!h.fn.draggable){return}t.draggable({axis:r==="h"?"x":"y",start:function(v,u){if(q.options.disabled){return false}q._isDragging=true},drag:function(v,u){q._dragging(v,u,q)},containment:"parent",stop:function(u){q._dragStop(u,q,r);h(u.target).removeClass(f);q._isDragging=false}})},_createBarIfNeeded:function(D,v,t,y,A){if(D){var E=this,w,z=E._fields(),s=t+"barContainer",u=t+"barDrag",x=t==="h",q=A[x?"innerHeight":"innerWidth"](),C=z[s]=h(y),r,B;v.append(C);r=C[0][x?"offsetHeight":"offsetWidth"];q=q-r;w={direction:x?"horizontal":"vertical",targetBarLen:r,contentLength:q};if(E._trigger(x?"hScrollerActivating":"vScrollerActivating",null,w)===false){return false}B=z[u]=C.find("."+c);E._bindBarEvent(C,B,t);A[x?"height":"width"](q)}},_setScrollbarPosition:function(s,C,F,r,D,x,q,J,L,E,B){var t=E==="h",z,K,v,A,I,y,H,G,w,u=C.options.wijCSS;if(x){z=r[0][t?"offsetHeight":"offsetWidth"];K=C._getScrollContainerPadding(E);v=t?"top":"left";A=t?{top:"0px",bottom:"auto",left:"auto",right:"auto"}:{left:"0px",right:"auto",top:"auto",bottom:"auto"};I=t?{top:z+"px",left:null}:{left:z+"px"};y=t?{top:"auto",right:"auto",left:"auto",bottom:"0px"}:{left:"auto",right:"0px",top:"auto",bottom:"auto"};H=t?{top:"",left:null}:{left:""};G=F[t?"innerWidth":"innerHeight"]();if(J===v){r.css(A);F.css(I);if(t){r.children(".wijmo-wijsuperpanel-hbar-buttonleft").removeClass(u.cornerBL).addClass(u.cornerTL);r.children(".wijmo-wijsuperpanel-hbar-buttonright").removeClass(u.cornerBR).addClass(u.cornerTR);r.removeClass(u.cornerBottom).addClass(u.cornerTop)}else{r.children(".wijmo-wijsuperpanel-vbar-buttontop").removeClass(u.cornerTR).addClass(u.cornerTL);r.children(".wijmo-wijsuperpanel-vbar-buttonbottom").removeClass(u.cornerBR).addClass(u.cornerBL);r.removeClass(u.cornerRight).addClass(u.cornerLeft)}}else{r.css(y);F.css(H);if(t){r.children(".wijmo-wijsuperpanel-hbar-buttonleft").removeClass(u.cornerTL).addClass(u.cornerBL);r.children(".wijmo-wijsuperpanel-hbar-buttonright").removeClass(u.cornerBL).addClass(u.cornerBR);r.removeClass(u.cornerTop).addClass(u.cornerBottom)}else{r.children(".wijmo-wijsuperpanel-vbar-buttontop").removeClass(u.cornerTL).addClass(u.cornerTR);r.children(".wijmo-wijsuperpanel-vbar-buttonbottom").removeClass(u.cornerBL).addClass(u.cornerBR);r.removeClass(u.cornerLeft).addClass(u.cornerRight)}}w=0;if(q){w=D[0][t?"offsetWidth":"offsetHeight"];if(L==="left"){r.css("right","0px")}else{if(L==="right"){r.css("left","0px")}else{if(L==="top"){r.css("bottom","0px")}else{if(L==="bottom"){r.css("top","0px")}}}}}if(!t&&q){w=0}r[t?"width":"height"](G-K);C._enableDisableScrollBar(E,r,!B)}else{s.css(t?"left":"top","")}},_testScroll:function(F,y,t){var r=y.templateWrapper,z=y.contentWrapper,w=y.stateContainer,q=z.innerWidth(),D=z.innerHeight(),v=y.contentWidth,u=y.contentHeight,C,E,x,A,B,s;y.hScrolling=v>q;y.vScrolling=u>D;C=F.hNeedScrollBar=F._needScrollbar(t.hScroller,y.hScrolling);if(F._createBarIfNeeded(C,w,"h",e,z)===false){return false}if(C&&!y.vScrolling){r.css("float","left");y.contentHeight=r.height();y.vScrolling=y.contentHeight>(D-y.hbarContainer[0].offsetHeight);r.css("float","")}E=F.vNeedScrollBar=F._needScrollbar(t.vScroller,y.vScrolling);if(F._createBarIfNeeded(E,w,"v",l,z)===false){return false}if(E&&!y.hScrolling){r.css("float","left");y.contentWidth=r.width();y.hScrolling=y.contentWidth>(q-y.vbarContainer[0].offsetWidth);r.css("float","");if(y.hScrolling&&!C){C=F.hNeedScrollBar=F._needScrollbar(t.hScroller,y.hScrolling);if(F._createBarIfNeeded(C,w,"h",e,z)===false){return false}}}x=y.hbarContainer;A=y.vbarContainer;B=t.hScroller.scrollBarPosition;s=t.vScroller.scrollBarPosition;F._setScrollbarPosition(r,F,z,x,A,C,E,B,s,"h",y.hScrolling);F._setScrollbarPosition(r,F,z,A,x,E,C,s,B,"v",y.vScrolling)},_enableDisableScrollBar:function(r,s,q){var t=this.options;if(r==="v"){s[q?"addClass":"removeClass"]("wijmo-wijsuperpanel-vbarcontainer-disabled");s.find("."+t.wijCSS.stateDefault)[q?"addClass":"removeClass"](t.wijCSS.stateDisabled)}else{if(r==="h"){s[q?"addClass":"removeClass"]("wijmo-wijsuperpanel-hbarcontainer-disabled");s.find("."+t.wijCSS.stateDefault)[q?"addClass":"removeClass"](t.wijCSS.stateDisabled)}}s.children("."+c)[q?"hide":"show"]()},_initResizer:function(){var r=this,u=r.options,s=r._fields(),v=s.resizer,q,t;if(!h.fn.resizable){return}if(!v&&u.allowResize){q=u.resizableOptions;t=q.stop;q.stop=function(w){r._resizeStop(w,r);if(h.isFunction(t)){t(w)}};s.resizer=v=r.element.resizable(q)}if(!u.allowResize&&s.resizer){v.resizable("destroy");s.resizer=null}},_resizeStop:function(r,q){if(!this.options.autoRefresh){q.paintPanel(true)}q._trigger("resized")},_createAdditionalDom:function(r,t,s){if(!s.attr("tabindex")){s.attr("tabindex","-1");t.tabindex=true}var q=t.stateContainer=h(d),v,u=r.options.wijCSS;t.contentWrapper=q.children();v=t.templateWrapper=t.contentWrapper.children();s.contents().each(function(w,x){var y=h(x);if(y.hasAllClasses(u.superpanelHeader)){t.header=y;return}if(y.hasAllClasses(u.superpanelFooter)){t.footer=y;return}v[0].appendChild(x)});if(t.header!==undefined){s.prepend(t.header)}s[0].appendChild(q[0]);if(t.footer!==undefined){t.footer.insertAfter(q)}},_setRounder:function(q,v){if(this.options.showRounder){v.addClass(this.options.wijCSS.cornerAll);if(q._rounderAdded){return}if(h.browser.msie){return}var t="",s="",u,r;if(h.browser.webkit){s="WebkitBorderTopLeftRadius";t="WebkitBorderRadius"}else{if(h.browser.mozilla){s="MozBorderRadiusBottomleft";t="MozBorderRadius"}else{s="border-top-left-radius";t="border-radius"}}u=v.css(s);r=parseInt(u,10);v.css(t,r+1);q._rounderAdded=true;q._radiusKey=t}else{v.removeClass(this.options.wijCSS.cornerAll)}},_setInnerElementsSize:function(t,y){var q=t.stateContainer,u=t.contentWrapper,x=0,r,s,w,v;if(t.header!==undefined){x+=t.header.outerHeight()}if(t.footer!==undefined){x+=t.footer.outerHeight()}r=q[0].style;s=y.innerHeight()-x;w=y.innerWidth();r.display="none";r.height=s+"px";r.width=w+"px";v=u[0].style;v.height=s+"px";v.width=w+"px";r.display=""}});i.prototype.options=h.extend(true,{},b.wijmoWidget.prototype.options,new j());h.wijmo.registerWidget("wijsuperpanel",i.prototype)}else{var c="wijmo-wijsuperpanel-handle",d="<div class='wijmo-wijsuperpanel-statecontainer'><div class='wijmo-wijsuperpanel-contentwrapper-touch'></div></div>";i.prototype=h.extend(true,{},h.Widget.prototype,{widgetEventPrefix:"wijsuperpanel",_setOption:function(r,t){var q=this,u=q.options,s=q._fields();if(r==="animationOptions"||r==="resizableOptions"){t=h.extend(u[r],t)}else{if(r==="hScroller"||r==="vScroller"){t=h.extend(u[r],t);q.refresh()}}h.Widget.prototype._setOption.apply(q,arguments);switch(r){case"allowResize":q._initResizer();break;case"disabled":q._handleDisabledOption(t,q.element);break;case"mouseWheelSupport":case"keyboardSupport":q._bindElementEvents(q,s,q.element,u);break}},_create:function(){var q=this,r=q.options;r.vScroller.dir="v";r.hScroller.dir="h";q._createDom();if(q.options.disabled){q.disable()}if(q.element.is(":hidden")&&q.element.wijAddVisibilityObserver){q.element.wijAddVisibilityObserver(function(){q.refresh();if(q.element.wijRemoveVisibilityObserver){q.element.wijRemoveVisibilityObserver()}},"wijsuperpanel")}},_handleDisabledOption:function(r,s){var q=this;if(r){if(!q.disabledDiv){q.disabledDiv=q._createDisabledDiv(s)}q.disabledDiv.appendTo("body")}else{if(q.disabledDiv){q.disabledDiv.remove();q.disabledDiv=null}}},_createDisabledDiv:function(s){var r=this,v=s?s:r.element,u=v.offset(),t=v.outerWidth(),q=v.outerHeight();return h("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:t,height:q,left:u.left,top:u.top})},_createDom:function(){var q=this,r=q.element;q.paintPanel();q._initResizer();q._bindElementEvents()},_applyOverflow:function(q){var s={},t=this.options,r=t.hScroller.scrollBarVisibility,u=t.vScroller.scrollBarVisibility;s["overflow-x"]=r;s["overflow-y"]=u;if(h.support.isTouchEnabled&&h.support.isTouchEnabled()){if(r==="visible"&&u==="visible"){s["overflow-x"]="auto";s["overflow-y"]="auto"}}q.css(s)},_createAdditionalDom:function(r,t,s){if(!s.attr("tabindex")){s.attr("tabindex","-1");t.tabindex=true}var q=t.stateContainer=h(d),v,u=r.options.wijCSS;r._applyOverflow(t.stateContainer);t.contentWrapper=q.children();s.contents().each(function(w,x){var y=h(x);if(y.hasAllClasses(u.superpanelHeader)){t.header=y;return}if(y.hasAllClasses(u.superpanelFooter)){t.footer=y;return}t.contentWrapper[0].appendChild(x)});if(t.header!==undefined){s.prepend(t.header)}s[0].appendChild(q[0]);if(t.footer!==undefined){t.footer.insertAfter(q)}r._resetDom();t.contentWrapper.css("float","left");t.contentWidth=t.contentWrapper.width();t.contentHeight=t.contentWrapper.height();t.contentWrapper.css("float","")},_bindElementEvents:function(){var q=this,t=q.element,w=q.options,r=q.widgetName,s=t.find(".wijmo-wijsuperpanel-statecontainer"),u=s.scrollTop(),v=s.scrollLeft();s.bind("scroll",function(z,C){var x=h(this).scrollTop(),E=h(this).scrollLeft(),F,B,y,A,D;if(x===u&&E===v){return}if(x===u){B="h";if(E>v){F="right"}else{F="left"}y=w.hScroller.scrollValue;D=E}else{B="v";if(x>u){F="bottom"}else{F="top"}y=w.vScroller.scrollValue;D=x}A=q.scrollPxToValue(D,B);q._trigger("scrolling",null,{dir:B,direction:F,oldValue:y,newValue:A,beforePosition:{left:-v,top:-u}});q._triggerScroll(D,B);q._updateScrollValue(D,B);q._trigger("scrolled",null,{dir:B,beforePosition:{left:-v,top:-u},afterPosition:{left:-E,top:-x},newValue:A});v=E;u=x});if(w.keyboardSupport){if(q._keyboardBind===undefined){q._keyboardBind=true;t.bind("keydown."+r,q,q._panelKeyDown)}}else{t.unbind("keydown."+r,q._panelKeyDown);q._keyboardBind=undefined}if(!w.mouseWheelSupport){t.bind("mousewheel",function(x){x.stopPropagation();return false})}},_setScrollingInterval:function(t,r,q,s){var u=q.options;if(r.length>0){t.internalFuncID=window.setInterval(function(){q._doScrolling(r,q,s)},u.keyDownInterval)}},_triggerScroll:function(q,r){var s={position:q,dir:r};this._trigger("scroll",null,s)},_panelKeyDown:function(u){var s=u.data,v=s.options,r,q,t=b.getKeyCodeEnum();if(!v.keyboardSupport||v.disabled){return}r=u.shiftKey;q=u.keyCode;if(q===t.LEFT){s._doScrolling("left",s,r)}else{if(q===t.RIGHT){s._doScrolling("right",s,r)}else{if(q===t.UP){s._doScrolling("top",s,r)}else{if(q===t.DOWN){s._doScrolling("bottom",s,r)}}}}u.stopPropagation();u.preventDefault()},_doScrolling:function(r,y,x){var w,t,q,u=y._fields(),z=u.stateContainer[0],s={},v;if(r==="top"||r==="bottom"){t="v";q="scrollTop"}else{if(r==="left"||r==="right"){t="h";q="scrollLeft"}}if(x){w=y._getLargeChange(t)}else{w=y._getSmallChange(t)}v=z[q];if(r==="top"||r==="left"){s[q]=v-w}else{s[q]=v+w}y._animateTo(s)},_getLargeChange:function(u){var r=this,t=r._fields(),q,s=u=="h"?t.clientWidth:t.clientHeight;if(s){q=s}else{q=t.stateContainer[u=="h"?"width":"height"]()}return q},_getSmallChange:function(){return this._getLargeChange()/2},_setRounder:function(q,w){var v=this.options.wijCSS.cornerAll;if(this.options.showRounder){w.addClass(v);if(q._rounderAdded){return}if(h.browser.msie){return}var t="",s="",u,r;if(h.browser.webkit){s="WebkitBorderTopLeftRadius";t="WebkitBorderRadius"}else{if(h.browser.mozilla){s="MozBorderRadiusBottomleft";t="MozBorderRadius"}else{s="border-top-left-radius";t="border-radius"}}u=w.css(s);r=parseInt(u,10);w.css(t,r+1);q._rounderAdded=true;q._radiusKey=t}else{w.removeClass(v)}},_initResizer:function(){var r=this,u=r.options,s=r._fields(),v=s.resizer,q,t;if(!h.fn.resizable){return}if(!v&&u.allowResize){q=u.resizableOptions;t=q.stop;q.stop=function(w){r._resetDom();r._trigger("resized");if(h.isFunction(t)){t(w)}};s.resizer=v=r.element.resizable(q)}if(!u.allowResize&&s.resizer){v.resizable("destroy");s.resizer=null}},_resetDom:function(){var r=this,v=r.options,u=r.element,t=r._fields(),s=u.width(),q=u.height();if(t.header!==undefined){q-=t.header.outerHeight()}if(t.footer!==undefined){q-=t.footer.outerHeight()}if(t.stateContainer.length){t.stateContainer.css({width:s,height:q});t.clientWidth=t.stateContainer[0].clientWidth;t.clientHeight=t.stateContainer[0].clientHeight}},_fields:function(){var q=this,s=q.element,r=q.widgetName+"-fields",t=q._fieldsStore;if(t===undefined){t={};s.data(r,t);q._fieldsStore=t}return t},_getScrollOffset:function(w){var s=h(w),x,A,y,u,t,z,q,v,r,B={left:null,top:null};if(s.length===0){return B}x=this._fields();A=x.contentWrapper;y=s.offset();y.leftWidth=y.left+s.outerWidth();y.topHeight=y.top+s.outerHeight();t=A.offset();t.leftWidth=t.left+x.clientWidth;t.topHeight=t.top+x.clientHeight;v=y.left-t.left;if(y.left<t.left){B.left=v}else{if(y.leftWidth>t.leftWidth){r=y.leftWidth-t.left-x.clientWidth;if(v<r){B.left=v}else{B.left=r}}}z=y.top-t.top;if(y.top<t.top){B.top=z}else{if(y.topHeight>t.topHeight){q=y.topHeight-t.top-x.clientHeight;if(z<q){B.top=z}else{B.top=q}}}return B},_initialize:function(s,r,q){var t=q.options.wijCSS;s.initialized=true;r.addClass(["wijmo-wijsuperpanel",t.widget,t.content].join(" "));q._setRounder(q,r);q._createAdditionalDom(q,s,r);q._trigger("painted");q._initScrollPosition()},_initScrollPosition:function(){var x=this.options,v=x.hScroller,w=x.vScroller,u=v.scrollValue,t=w.scrollValue,s=this._fields(),q=u?this._scrollValueToPx(u,"h"):0,r=t?this._scrollValueToPx(t,"v"):0;if(u){s.stateContainer.prop("scrollLeft",q)}if(t){s.stateContainer.prop("scrollTop",r)}},_updateScrollValue:function(s,r){var u=this.scrollPxToValue(s,r),v=this.options,q=(r==="h"?"hScroller":"vScroller"),t=h.Event("scrollValueChanged");v[q].scrollValue=u;this._trigger("scrollValueChanged",t,v[q])},scrollPxToValue:function(B,t){var s=this.options,A=(t==="h"?"clientWidth":"clientHeight"),r=(t==="h"?"scrollWidth":"scrollHeight"),w=(t==="h"?"hScroller":"vScroller"),x=this._fields(),C=x.stateContainer[0],u=C[A],q=C[r],z=s[w].scrollMin,D=s[w].scrollMax,v=D-z,y=v*B/(q-u)+z;return y},_scrollValueToPx:function(B,t){var s=this.options,A=(t==="h"?"clientWidth":"clientHeight"),r=(t==="h"?"scrollWidth":"scrollHeight"),w=(t==="h"?"hScroller":"vScroller"),x=this._fields(),C=x.stateContainer[0],u=C[A],q=C[r],z=s[w].scrollMin,D=s[w].scrollMax,v=D-z,y=(B-z)*(q-u)/v;return y},_animateTo:function(v){var q=this,t=q.element,u=q.options,r=u.animationOptions,s=q._fields();s.stateContainer.animate(v,r)},destroy:function(){var q=this,t=q.element,v=q.options,s=q._fields(),r,u=v.wijCSS;if(q.disabledDiv){q.disabledDiv.remove();q.disabledDiv=null}if(s.resizer!==undefined){s.resizer.resizable("destroy")}t.unbind("."+q.widgetName);t.removeClass(["wijmo-wijsuperpanel",u.widget,u.content,u.cornerAll].join(" "));r=s.contentWrapper;r.contents().each(function(w,x){t.append(x)});s.stateContainer.remove();h.Widget.prototype.destroy.apply(q,arguments)},doScrolling:function(q,r){this._doScrolling(q,this,r)},paintPanel:function(r){var q=this,t=q.element,s=q._fields();if(!s.initialized){this._initialize(s,t,q)}},needToScroll:function(q){var r=this._getScrollOffset(q);return r.top!==null||r.left!==null},scrollChildIntoView:function(q){var t=this._getScrollOffset(q),s=t.left,r=t.top;this.scrollTo(s,r)},getContentElement:function(){return this._fields().contentWrapper},hScrollTo:function(q,r){var s=!!r?this._scrollValueToPx(q):q;this._animateTo({scrollLeft:s})},vScrollTo:function(s,q){var r=!!q?this._scrollValueToPx(s):s;this._animateTo({scrollTop:r})},refresh:function(){var q=this,r=q._fields();q._applyOverflow(r.stateContainer);q._resetDom()},scrollTo:function(r,u,t){var s=!!t?this._scrollValueToPx(r):r,q=!!t?this._scrollValueToPx(u):u;this._animateTo({scrollTop:q});this._animateTo({scrollLeft:s})}});i.prototype.options=h.extend(true,{},b.wijmoWidget.prototype.options,{wijCSS:{superpanelHeader:"wijmo-wijsuperpanel-header",superpanelFooter:"wijmo-wijsuperpanel-footer",superpanelHandle:"",superpanelVBarbuttonTop:"",superpanelVBarbuttonBottom:"",superpanelHBarbuttonLeft:"",superpanelHBarbuttonRight:"",superpanelHBarContainer:"",superpanelVBarContainer:"",superpanelButton:"",superpanelButtonLeft:"",superpanelButtonRight:"",superpanelButtonTop:"",superpanelButtonBottom:""},wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},initSelector:":jqmData(role='wijsuperpanel')",allowResize:false,animationOptions:{queue:false,disabled:false,duration:250,easing:undefined},hScroller:{scrollBarVisibility:"auto",scrollValue:null,scrollMax:100,firstStepChangeFix:0,scrollMin:0,hoverEdgeSpan:20},keyboardSupport:false,keyDownInterval:100,mouseWheelSupport:true,resizableOptions:{handles:"all",helper:"ui-widget-content wijmo-wijsuperpanel-helper"},resized:null,painted:null,scroll:null,showRounder:true,vScroller:{scrollBarVisibility:"auto",scrollValue:null,scrollMax:100,scrollMin:0,firstStepChangeFix:0,hoverEdgeSpan:20}});h.wijmo.registerWidget("wijsuperpanel",i.prototype)}})(b.superpanel||(b.superpanel={}));var a=b.superpanel})(wijmo||(wijmo={}));