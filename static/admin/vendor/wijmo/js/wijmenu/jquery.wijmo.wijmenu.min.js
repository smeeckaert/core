var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijmenu",r=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n._itemWidgetName="wijmenuitem",n.prototype._preventEvent=function(e){e.preventDefault(),e.stopImmediatePropagation()},n.prototype._initState=function(){var e=this;e.options.items||(e.options.items=[])},n.prototype._create=function(){var e=this,r=e.options,i=r.direction,s=r.mode,o,u=e.element,a,f,l=r.disabled;t.mobile!=null?f=t.mobile.keyCode:f=t.ui.keyCode,e._initState(),window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),u.is(":hidden")&&u.wijAddVisibilityObserver&&u.wijAddVisibilityObserver(function(){e.refresh(),u.wijRemoveVisibilityObserver&&u.wijRemoveVisibilityObserver()},"wijmenu"),u.data("wijmomenu",t.camelCase(e.widgetFullName)),e.clickNameSpace="click.wijmenudoc"+e._newId(),u.hide(),e.cssPre="wijmo-wijmenu",e.nowIndex=9999,e.activeItem=null,e.refresh(),u.attr("tabIndex",0),e._getDisabled()&&(e.disable(),r.disabledState===!0&&(r.disabled=l)),u.bind("keydown.wijmenuEvent",function(t){if(e._getDisabled())return;s==="sliding"&&e._getSublist().stop(!0,!0);var u=e.activeItem,l,c,h=r.orientation;u?(l=u._isRoot(),a=u._getSublist()):l=!0;switch(t.keyCode){case f.PAGE_UP:e.previousPage(t),e._preventEvent(t);break;case f.PAGE_DOWN:e.nextPage(t),e._preventEvent(t);break;case f.UP:if(h==="vertical"||s==="sliding"||!l)e.previous(t),e._preventEvent(t);break;case f.DOWN:h==="vertical"||s==="sliding"||!l?(e.next(t),e._preventEvent(t)):u&&s==="flyout"&&n._hasVisibleSubMenus(u)&&a.is(":hidden")&&u._showFlyoutSubmenu(t,function(){e.activate(t,u._getFirstSelectableSubItem())});break;case f.RIGHT:h==="horizontal"&&l&&s==="flyout"?(i==="rtl"?e.previous(t):e.next(t),e._preventEvent(t)):u&&(o=u.getParent(),i==="rtl"?e._keyDownToCloseSubmenu(s,t,o):e._keyDownToOpenSubmenu(u,s,t,a));break;case f.LEFT:h==="horizontal"&&l&&s==="flyout"?(i==="rtl"?e.next(t):e.previous(t),e._preventEvent(t)):(u&&(o=u.getParent()),i==="rtl"?e._keyDownToOpenSubmenu(u,s,t,a):e._keyDownToCloseSubmenu(s,t,o));break;case f.ENTER:if(!u)return;c=u._getLink();if(s==="flyout")break;e.select(),c.is("a")&&c.attr("href")==="#"&&e._preventEvent(t);break;case f.TAB:e.next(t),e._preventEvent(t)}})},n.prototype._keyDownToOpenSubmenu=function(e,t,r,i){var s=this;t==="flyout"&&n._hasVisibleSubMenus(e)?i.is(":hidden")&&e._showFlyoutSubmenu(r,function(){s.activate(r,e._getFirstSelectableSubItem())}):t==="sliding"&&i.length>0&&e._getLink().trigger("click",e._getFirstSelectableSubItem())},n.prototype._keyDownToCloseSubmenu=function(e,n,r){var i=this,s=i.options,o;e==="flyout"?r&&(r._hideCurrentSubmenu(n),i.activate(n,r)):(s.backLink&&i._backLink&&i._backLink.is(":visible")&&i._backLink.trigger("click",function(){r&&i.activate(n,r)}),o=t("."+s.wijCSS.wijmenuBreadcrumb,i.domObject.menucontainer).find("li a"),o.length>0&&o.eq(o.length-2).trigger("click",function(){r&&i.activate(n,r)}))},n.prototype._createMenuItems=function(){var e=this,r=[],i=e.options.items.length,s=e._getSublist().children("li").length,o,u;for(o=0;o<i-s;o++)e._getSublist().append("<li>");return t(">li",e._getSublist()).each(function(i,s){var o=t(this),a=n._getMenuItemOptions(e.options,i);return u=e._createItemWidget(o,a),r.push(u),e.options.items[i]=u.options,this}),r},n.prototype._createItemWidget=function(e,r){var i=n._itemWidgetName;return t.fn[i]&&e[i](r),n._getItemWidget(e)},n.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo(n.domObject.menucontainer)):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},n.prototype._getDisabled=function(){var e=this,t=e.options;return t.disabledState===!0||t.disabled===!0},n.prototype._createDisabledDiv=function(e){return t("<div></div>").css({"z-index":"99999",position:"absolute",width:"100%",height:"100%",left:0,top:0})},n.prototype._innerDestroy=function(){var e=this,t=e.options;e.destroying=!0,e[t.mode==="flyout"?"_killFlyout":"_killDrilldown"](),e._killMenuItems(),e._killtrigger(),e._killElement(),e.destroying=!1},n.prototype.destroy=function(){var t=this;this._innerDestroy(),t.disabledDiv&&(t.disabledDiv.remove(),t.disabledDiv=null),e.prototype.destroy.call(this)},n.prototype.activate=function(e,t){if(!t)return;var r=this,i=r.options,s=r.domObject.scrollcontainer,o,u,a=!1,f=!0;o=(t.jquery?t:t.element).eq(0);if(r.activeItem&&r.activeItem.element.get(0)===o.get(0))return;r.deactivate(e),r.activeItem=n._getItemWidget(o),u=o.children(":first"),r._trigger("focus",e,{item:r.activeItem}),r.options.mode==="sliding"&&(f=o.parent().is("."+i.wijCSS.wijmenuCurrent),a=f&&r._hasScroll()&&s.wijsuperpanel("needToScroll",o),a&&(r._linkContainer.link=u,r._linkContainer.needToFocus=!0,s.wijsuperpanel("scrollChildIntoView",o))),u.addClass(i.wijCSS.stateFocus).end(),r.element.removeAttr("aria-activedescendant"),r.element.attr("aria-activedescendant",o.attr("id")),f&&!a&&u.is("a")&&u.focus()},n.prototype.deactivate=function(e){var t=this,n=t.options,r=t.activeItem;if(!r)return;setTimeout(function(){r._getLink().removeClass(n.wijCSS.stateFocus).removeAttr("id"),t._trigger("blur")},0),t.activeItem=null},n.prototype.next=function(e){this._move("next",function(e){return e._getFirstSelectableSubItem()},e)},n.prototype.previous=function(e){this._move("previous",function(e){return e._getLastSelectableSubItem()},e)},n.prototype.first=function(){var e=this,t,n,r;return e.activeItem?(t=e._getActiveItemElement(),n=e.activeItem._getParentOrMenu(),r=n._getFirstSelectableSubItem(),r&&t[0]===r.element[0]):!1},n.prototype.last=function(){var e=this,t,n,r;return e.activeItem?(t=e._getActiveItemElement(),n=e.activeItem._getParentOrMenu(),r=n._getLastSelectableSubItem(),r&&t[0]===r.element[0]):!1},n.prototype.nextPage=function(e){var r=this,i=r._getActiveItemElement(),s,o,u,a,f;i?a=r.activeItem._getParentOrMenu():(a=r,i=r._getFirstSelectableSubItem());if(r.options.mode==="sliding"&&r._hasScroll()){if(!i||r.last()){r.activate(e,a._getFirstSelectableSubItem());return}s=i.offset().top,o=r.options.maxHeight,u=n._getSelectableSubItems(a,function(e){var n=t(e.element),r=o-(n.offset().top-s+n.height()),i=n.height();return r<i&&r>-i}),u.length?u=u[u.length-1]:u=a._getLastSelectableSubItem(),r.activate(e,u)}else!i||r.last()?f=a._getFirstSelectableSubItem():f=a._getLastSelectableSubItem(),r.activate(e,f)},n.prototype.previousPage=function(e){var r=this,i=r._getActiveItemElement(),s,o,u,a,f;i?a=r.activeItem._getParentOrMenu():(a=r,i=r._getFirstSelectableSubItem());if(r.options.mode==="sliding"&&r._hasScroll()){if(!i||r.first()){r.activate(e,a._getLastSelectableSubItem());return}s=i.offset().top,o=r.options.maxHeight,u=n._getSelectableSubItems(a,function(e){var n=t(e.element),r=n.offset().top-s+o-n.height(),i=n.height();return r<i&&r>-i}),u.length?u=u[0]:u=a._getFirstSelectableSubItem(),r.activate(e,u)}else!i||r.first()?f=a._getLastSelectableSubItem():f=a._getFirstSelectableSubItem(),r.activate(e,f)},n.prototype.select=function(e){var t=this,n=t.activeItem,r;t._trigger("select",e,{item:n}),t.options.checkable&&(r=!n.options.selected,n._setOption("selected",r))},n.prototype._getActiveItemElement=function(){return this.activeItem?this.activeItem.element:null},n.prototype.setItemDisabled=function(e,n){var r=t(e,this.element),i=this.options;r.find("."+i.wijCSS.wijmenuItem+">a").attr("disabled",n),r.find(">a").toggleClass(i.wijCSS.stateDisabled,n)},n.prototype._setOption=function(e,t){var n=this;if(n.destroying)return;n["_set_"+e]&&n["_set_"+e](t),n.options[e]=t,e==="disabled"&&n._handleDisabledOption(t,n.domObject.menucontainer)},n.prototype._set_items=function(e){var t=this;t._getSublist().children().remove(),t.options.items=e,t.refresh()},n.prototype._set_mode=function(e){var t=this;t._innerDestroy(),t.options.mode=e,t.refresh()},n.prototype._set_backLink=function(e){var n=this,r=n.options,i;this.options.backLink=e,n.options.mode==="sliding"&&(n._killDrilldown(),n._drilldown(),i=t("."+r.wijCSS.wijmenuBreadcrumb,n.domObject.menucontainer),n._resetDrilldownMenu(i))},n.prototype._set_direction=function(e){var t=this;t._innerDestroy(),t.refresh()},n.prototype._set_orientation=function(e){var n=this,r=n.domObject.menucontainer,i=n.options.direction,s="ui-icon-triangle-1-",o=i==="rtl"?"w":"e",u=e==="horizontal"?o:"s",a=e==="horizontal"?"s":o;r.removeClass(n.cssPre+"-vertical "+n.cssPre+"-horizontal"),n.options.mode==="flyout"?(r.addClass(n.cssPre+"-"+e),t.each(n.getItems(),function(e,t){if(t.getItems().length===0)return;t._getLink().find("."+s+u).removeClass(s+u+" "+s+a).addClass(s+a)})):r.addClass(n.cssPre+"-vertical")},n.prototype._getTriggerEle=function(){return n._getOuterElement(this.options.trigger,"."+this.options.wijCSS.wijmenu)},n.prototype._set_triggerEvent=function(e){var t=this,n=t.options,r=t._getTriggerEle();t._killtrigger(),n.triggerEvent=e,r.length>0&&t._initTrigger(r),n.mode==="flyout"&&(t._killFlyout(),t._flyout())},n.prototype._set_trigger=function(e){var t=this,n=t.options,r;t._killtrigger(),n.trigger=e,r=t._getTriggerEle(),r.length>0&&t._initTrigger(r),n.mode==="flyout"&&(t._killFlyout(),t._flyout())},n.prototype._initTrigger=function(e){var n=this.options,r=n.triggerEvent,i=this,s=i.domObject.menucontainer,o=".wijmenuEvent";e.is("iframe")&&(e=t(e.get(0).contentWindow.document));switch(r){case"click":e.bind(r+o,function(e){n.mode!=="popup"&&i._displayMenu(e),e.stopPropagation()});break;case"mouseenter":e.bind(r+o,function(e){i._displayMenu(e),e.stopPropagation()});break;case"dblclick":e.bind(r+o,function(e){i._displayMenu(e),e.stopPropagation()});break;case"rtclick":e.bind("contextmenu"+o,function(e){s.hide(),i._displayMenu(e),e.preventDefault(),e.stopPropagation()})}},n.prototype._killtrigger=function(){var e=this.options,n;e.trigger!==""&&(n=t(e.trigger),n.is("iframe")&&(n=t(n.get(0).contentWindow.document)),n&&n.length>0&&n.unbind(".wijmenuEvent").unbind("wijmenuEvent"))},n.prototype._move=function(e,t,r){var i=this,s=i._getActiveItemElement(),o,u,a;if(!s||!s.length){i.activate(r,t(i));return}a=n._getItemWidget(s),o=a[e](),u=a._getParentOrMenu(),o?i.activate(r,o):i.activate(r,t(u))},n.prototype.refresh=function(){var e=this,n=e.element,r=e.options,i=r.direction,s,o,u,a,f;e.domObject&&e._innerDestroy();if(n.is("ul"))e._rootMenu=n,s=n.wrap("<div></div>").parent(),o=s.wrap("<div></div>").parent();else{if(!n.is("div"))return;e._rootMenu=t("ul:first",n),s=n,o=n.wrap("<div></div>").parent()}i==="rtl"&&e._rootMenu.addClass(r.wijCSS.wijmenuRtl),s.addClass("scrollcontainer checkablesupport"),o.addClass(r.wijCSS.widget).addClass(r.wijCSS.header).addClass(r.wijCSS.wijmenu).addClass(r.wijCSS.cornerAll).addClass(r.wijCSS.helperClearFix).attr("aria-activedescendant",r.wijCSS.activeMenuitem),r.orientation==="horizontal"&&r.mode==="flyout"&&o.addClass(r.wijCSS.wijmenuHorizontal),u={scrollcontainer:s,menucontainer:o},e.domObject=u,e._getSublist().data("topmenu",!0),e._getSublist().hasClass(r.wijCSS.wijmenuList)||e._getSublist().addClass(r.wijCSS.wijmenuList).addClass(r.wijCSS.helperReset),e._items=e._createMenuItems(),n.show(),n.delegate("li>."+r.wijCSS.wijmenuLink,"mouseenter.wijmenuEvent",function(){var n=t(this).hasClass(r.wijCSS.stateDisabled);if(e._getDisabled()||n)return;t(this).addClass(r.wijCSS.stateHover)}).delegate("li>."+r.wijCSS.wijmenuLink,"mouseleave.wijmenuEvent",function(){var n=t(this).hasClass(r.wijCSS.stateDisabled);if(e._getDisabled()||n)return;t(this).removeClass(r.wijCSS.stateHover),t(this).data("subMenuOpened")&&t(this).addClass(r.wijCSS.stateActive)}),this[r.mode==="flyout"?"_flyout":"_drilldown"](),r.trigger!==""&&(a=e._getTriggerEle(),a.length>0&&(o.hide(),e._initTrigger(a))),t(document).bind(e.clickNameSpace,function(n){var i=r.trigger;if(t(n.target).parent().is("."+r.wijCSS.wijmenuAllLists))return;if(t(n.target).closest(r.trigger).is(r.trigger))return;var s=t(n.target).closest("."+r.wijCSS.wijmenu);if(s.length===0){if(r.mode==="sliding"){f=t("."+r.wijCSS.wijmenuBreadcrumb,o);if(r.trigger==="")return;e._resetDrilldownMenu(f)}else if(r.mode==="flyout"&&r.triggerEvent!=="mouseenter"){e._hideAllMenus(n);return}a&&a.length>0&&e._hideMenu(n)}})},n.prototype._flyout=function(){var e=this.domObject.menucontainer,n=this.options,r=this.getItems();e.attr("role","menu"),n.orientation==="horizontal"&&e.attr("role","menubar"),t.each(r,function(e,t){t._flyout()})},n.prototype._hideAllMenus=function(e){var n=this,r,i,s=function(n){n.getItems().length>0&&(t.each(n.getItems(),function(e,t){s(t)}),n._hideSubmenu(!1,e))};t.each(n._items,function(e,t){s(t)});if(n.options.trigger!==""){r=n.domObject.menucontainer;if(r.data("isAnimated"))return;i=n._getTriggerEle();if(i.length===0)return;n._hideMenu(e)}},n.prototype.hideAllMenus=function(e){this._hideAllMenus(e)},n.prototype._killFlyout=function(){t.each(this.getItems(),function(){this._killFlyout()})},n.prototype._killElement=function(){var e=this,n=e.options,r=e._getSublist();r.removeClass(n.wijCSS.wijmenuList).removeClass(n.wijCSS.helperReset).removeClass(n.wijCSS.wijmenuContent).removeClass(n.wijCSS.helperClearFix),t(document).unbind(e.clickNameSpace),e.element.is("ul")?e.element.unwrap().unwrap():e.element.unwrap(),e.domObject=null,e.element.removeData("topmenu").removeData("firstLeftValue").removeData("domObject"),r.undelegate(".wijmenuEvent")},n.prototype._killMenuItems=function(){var e=this,t=e.getItems(),n;for(n=t.length-1;n>=0;n--)t[n].destroy(!0);e._items.length=0},n.prototype._sroll=function(){var e=this.domObject.scrollcontainer,n=t.extend({hScroller:{scrollBarVisibility:"hidden"}},this.options.superPanelOptions);e.height(this.options.maxHeight),e.wijsuperpanel(n)},n.prototype._initScrollCallback=function(){var e=this,t=e.domObject.scrollcontainer;e._linkContainer={link:null,needToFocus:!1},t.wijsuperpanel({scrolled:function(){var t=e._linkContainer.link;e._linkContainer.needToFocus&&t&&t.is("a")&&(t.focus(),e._linkContainer.needToFocus=!1)}})},n.prototype._resetScroll=function(e){var t=this,n=t._rootMenu.parent(),r=5,i=t.domObject.scrollcontainer,s=e._getSublist();n.height(s.height()),i.wijsuperpanel("option","hScroller",{scrollValue:0}),i.wijsuperpanel("option","vScroller",{scrollValue:0}),i.wijsuperpanel("paintPanel"),t._hasScroll()&&(s.prev().length>0&&(r=s.prev().css("padding-left").replace(/px/g,"")),s.width(i.find(".wijmo-wijsuperpanel-contentwrapper:first").width()-r),n.height(s.height()),i.wijsuperpanel("paintPanel"))},n.prototype._hasScroll=function(){var e=this.domObject.scrollcontainer;return e.data("wijmoWijsuperpanel").vNeedScrollBar},n.prototype._resetDrillChildMenu=function(e){var t=this.options;e.removeClass(t.wijCSS.wijmenuScroll).removeClass(t.wijCSS.wijmenuCurrent).height("auto")},n.prototype._resetDrilldownMenu=function(e,n){var r=this,i=r.options,s=r._getSublist(),o=r.domObject.menucontainer,u=t("<li>"+i.crumbDefaultText+"</li>").addClass(i.wijCSS.wijmenuBreadcrumbText),a=function(e){t.each(e,function(e,t){var n=t._getSublist(),i=t.getItems();n.hide(),r._resetDrillChildMenu(n),i.length>0&&a(i)})};t("."+i.wijCSS.wijmenuCurrent,o).removeClass(i.wijCSS.wijmenuCurrent),s.animate({left:0},i.showDuration,null,function(){a(r.getItems()),s.addClass(i.wijCSS.wijmenuCurrent),n&&n()}),t("."+i.wijCSS.wijmenuAllLists,o).find("span").remove(),e.empty().append(u),t("."+i.wijCSS.wijmenuFooter,o).empty().hide(),r._resetScroll(r)},n.prototype._drilldown=function(){var e=this,r=e._getSublist(),i=e.domObject.menucontainer.attr("role","menu"),s,o=e.options,u=o.direction,a=t("<ul></ul>").addClass(o.wijCSS.wijmenuBreadcrumb).addClass(o.wijCSS.stateDefault).addClass(o.wijCSS.cornerAll).addClass(o.wijCSS.helperClearFix),f=t("<li>"+o.crumbDefaultText+"</li>").addClass(o.wijCSS.wijmenuBreadcrumbText),l=t('<li><a href="#">'+o.topLinkText+"</a></li>").addClass(o.wijCSS.wijmenuAllLists);r.wrap("<div>").parent().css("position","relative"),i.addClass(o.wijCSS.wijmenuIpod).addClass(o.wijCSS.wijmenuContainer),o.backLink?a.addClass(o.wijCSS.wijmenuFooter).appendTo(i).hide():a.addClass(o.wijCSS.wijmenuHeader).prependTo(i),o.backLink||a.append(f),s=i.width(),r.addClass(o.wijCSS.wijmenuContent).addClass(o.wijCSS.wijmenuCurrent).addClass(o.wijCSS.content).addClass(o.wijCSS.helperClearFix).css({width:s}),t.each(e.getItems(),function(e,t){t._setDrilldownUlStyle()}),e._sroll(),e._initScrollCallback(),e._resetScroll(e),e.element.data("firstLeftValue",parseFloat(r.css("left"))),r.delegate("li>."+o.wijCSS.wijmenuLink,"click",function(s,f){var c=t(this).parent(),h=c.attr("disabled"),p,d,v,m,g,y,b,w,E,S=n._getItemWidget(c),x,T;if(e._getDisabled()||h)return;if(e._isSliding)return;r.stop(!0,!0),E=n._hasVisibleSubMenus(S);if(!E){e._leafNodeClick(s,S,a);return}p=S._getSublist();if(p.hasClass(o.wijCSS.wijmenuCurrent))return;if(!e._trigger("showing",s,S))return;e._isSliding=!0,d=S._getParentOrMenu()._getSublist(),v=d.data("topmenu")?0:parseFloat(r.css("left")),u==="rtl"?y=Math.round(v+parseFloat(i.width().toString())):y=Math.round(v-parseFloat(i.width().toString())),b=t("."+o.wijCSS.wijmenuFooter,i),w=function(r,s){var u=r,a=t("."+o.wijCSS.wijmenuCurrent,i),f,l;if(a.get(0)===e._getSublist().get(0))return;s?(f=s._getSublist(),l=s):(f=a.parents("ul:eq(0)"),l=n._getItemWidget(a.parent())._getParentOrMenu()),a.hide().attr("aria-expanded","false"),e._resetDrillChildMenu(a),e._resetScroll(l),f.addClass(o.wijCSS.wijmenuCurrent).attr("aria-expanded","true"),f.hasClass(o.wijCSS.wijmenuContent)&&(u.remove(),b.hide())},e._resetDrillChildMenu(d),e._resetScroll(S),e._slidingAnimation(r,y,function(){e._trigger("shown",s,S),e.activate(s,f||S),e.select(s),e._isSliding=!1}),p.show().addClass(o.wijCSS.wijmenuCurrent).attr("aria-expanded","true"),o.backLink?b.find("a").size()===0&&(b.show(),x=t("<span></span>").addClass(o.wijCSS.icon).addClass(o.wijCSS.iconArrowLeft),T=t("<span></span>").addClass(o.wijCSS.wijmenuBacklinktext),e._backLink=t('<a href="#"></a>').append(x).append(T).appendTo(b).click(function(n,s){if(e._getDisabled())return;var o=e._getCurrentItemInSliding(),a=t(this),f;if(!e._trigger("hidding",n,o))return;r.stop(!0,!0);if(u==="rtl")f=Math.round(r.css("left").replace("px",""))-Math.round(i.width());else{f=Math.round(r.css("left").replace("px",""))+Math.round(i.width());if(f>v)return}e._slidingAnimation(r,f,function(){e._trigger("hidden",n,o),w(a),s&&s()}),n.preventDefault()}),T.width(b.width()-x.width()),T.text(o.backLinkText)):(a.find("li").size()===1&&(a.empty().append(l),l.find("a").click(function(n,r){var i=t(this).parent(),s=e._getCurrentItemInSliding();e._slidingMenu(n,i,s,null,function(t){t?(w(null,t),r&&r()):e._resetDrilldownMenu(a,r)}),n.preventDefault()})),t("."+o.wijCSS.wijmenuCurrentCrumb,i).removeClass(o.wijCSS.wijmenuCurrentCrumb),m=S._getLink().text(),g=t("<li></li>").addClass(o.wijCSS.wijmenuCurrentCrumb).append(t('<a href="#">'+m+"</a>").addClass(o.wijCSS.wijmenuCrumb)),g.appendTo(a).find("a").click(function(n,r){if(e._getDisabled())return;var i=t(this).parent(),s;i.is("."+o.wijCSS.wijmenuCurrentCrumb)||(s=e._getCurrentItemInSliding(),e._slidingMenu(n,i,s,S,function(e){w(null,e),r&&r()})),n.preventDefault()}),g.prev().append(t("<span></span>").addClass(o.wijCSS.icon).addClass(o.wijCSS.iconCaratRight))),t(this).attr("href")==="#"&&s.preventDefault()})},n.prototype._slidingMenu=function(e,t,n,r,i){var s=this,o=s._getSublist(),u=s.options.direction,a=s.domObject.menucontainer,f=a.width(),l=t.parent().children().length-1,c,h,p,d,v=function(e,t,n){c=(u==="rtl"?1:-1)*t*f,s._slidingAnimation(o,c,function(){n&&n(e)})},m=function(t,n){var r;if(t!==n){r=s._trigger("hidding",e,t);if(r)return l--,d&&d(),d=function(){s._trigger("hidden",e,t)},m(t.getParent(),n)}return t};h=m(n,r),h!==n&&(v(h,l,function(){d&&d(),i&&i(h)}),p=t.parent().children().eq(l),p.addClass("wijmo-wijmenu-current-crumb").find("span").remove(),p.nextAll().remove())},n.prototype._getCurrentItemInSliding=function(){var e=this,r=e.domObject.menucontainer,i=t(".wijmo-wijmenu-current",r),s=n._getItemWidget(i.parent());return s},n.prototype._leafNodeClick=function(e,t,n){var r=this,i=r.options,s;r.activate(e,t),r.select(e),i.trigger&&(s=r._getTriggerEle(),s.length&&(r._hideMenu(e),r._resetDrilldownMenu(n))),t._getLink().attr("href")==="#"&&e.preventDefault()},n.prototype._slidingAnimation=function(e,t,n){var r=this.options.slidingAnimation;r&&!r.disabled?e.stop(!0,!0).animate({left:t},r.duration,r.easing,n):(e.css("left",t),n.call(this))},n.prototype._killDrilldown=function(){var e=this._getSublist(),n=this.options,r=this.domObject,i={width:"",height:""};e.css(i).removeClass(n.wijCSS.content),r.scrollcontainer&&r.scrollcontainer.parent().length>0&&(r.scrollcontainer.css(i),r.scrollcontainer.wijsuperpanel("destroy"),r.scrollcontainer.removeClass("wijmo-wijsuperpanel").append(e)),e.prevAll().remove(),r.menucontainer.removeClass(n.wijCSS.wijmenuIpod).removeClass(n.wijCSS.wijmenuContainer),t("."+n.wijCSS.wijmenuCurrent,r.menucontainer).removeClass(n.wijCSS.wijmenuCurrent),t("."+n.wijCSS.wijmenuBreadcrumb,r.menucontainer).remove(),e.undelegate("li>."+n.wijCSS.wijmenuLink,"click"),t("ul",e).css({left:"",width:""}),e.css("left",""),r.scrollcontainer=r.menucontainer.children(":first")},n.prototype._displayMenu=function(e){var r=this,i=r.options,s,o,u,a=r.domObject.menucontainer,f=t(e.target),l=!n._hasVisibleSubMenus(r);if(a.is(":visible")||l)return;if(!r._trigger("showing",e,r))return;a.show(),r._setPosition(f),r.nowIndex++,r._setZindex(a,r.nowIndex),a.hide(),s={context:a,show:!0},o=i.direction==="rtl"?"right":"left",u=t.extend({},{option:{direction:o}},i.animation,i.showAnimation),n._animateFlyoutMenu(u,s,function(){r._trigger("shown",e,r)}),r._isClickToOpen=i.triggerEvent==="click",this.element.data("shown",!0)},n.prototype._hideMenu=function(e){var r=this,i=r.options,s=this.domObject.menucontainer,o=n.animations,u,a;if(!this.element.data("shown"))return;if(!r._trigger("hidding",e,r))return;this.element.data("shown",!1),t.fn.wijhide?(u={context:s,show:!1},a=t.extend({},i.animation,i.hideAnimation),s.wijhide(a,o,u,null,function(){r._setZindex(s,null),s.attr("aria-hidden",!0),r._trigger("hidden",e,r)})):(s.hide().attr("aria-hidden",!0),r._setZindex(s,null),r._trigger("hidden",e,r))},n.prototype._setZindex=function(e,n){var r=this.domObject,i;if(!r)return;i=r.menucontainer;if(e.get(0)===i.get(0)){n?i.css("z-index",n):i.css("z-index","");return}n?(e.parent().css("z-index",999),e.css("z-index",n),t.browser.msie&&parseInt(t.browser.version)<8&&i.css("z-index")===0&&i.css("z-index",9950)):(e.css("z-index",""),e.parent().css("z-index",""),t.browser.msie&&parseInt(t.browser.version)<8&&t("ul:visible",this._getSublist()).length===0&&i.css("z-index")===9950&&i.css("z-index",""))},n.prototype._setPosition=function(e){var n=this._getPosition(),r={of:e},i=this.domObject.menucontainer;i.css({left:"0",top:"0",position:"absolute"}),i.position(t.extend(r,n))},n.prototype._getPosition=function(){var e=this.options,n=e.direction,r=n==="rtl"?{my:"right top",at:"right bottom"}:{my:"left top",at:"left bottom"};return r=t.extend(r,e.position),r},n.prototype._getFirstSelectableSubItem=function(){return n._getFirstSelectableSubItem(this)},n.prototype._getLastSelectableSubItem=function(){return n._getLastSelectableSubItem(this)},n.prototype.add=function(e,t){n._add(this,e,t)},n.prototype._getSublist=function(){return this._rootMenu},n.prototype.getItems=function(){return this._items},n.prototype.remove=function(e){n._remove(this,e)},n.prototype._newId=function(){var e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t="",n;for(n=0;n<16;n++)t+=e[Math.round(Math.random()*25)];return t},n.animations={slide:function(e,n){e=t.extend({duration:400,easing:"swing"},e,n),e.show?e.context.stop(!0,!0).animate({height:"show"},e,function(){e.context.attr("aria-hidden",!1)}):e.context.stop(!0,!0).animate({height:"hide"},e,function(){e.context.attr("aria-hidden",!0)})}},n._animateFlyoutMenu=function(r,i,s){var o=i.context;t.fn.wijshow?(o.data("isAnimated",!0),o.wijshow(r,n.animations,i,null,function(){o.data("isAnimated",!1);var e=t.browser;e.msie&&e.version==="9.0"?(o.wrap("<div></div>"),o.unwrap()):e.msie&&e.version==="6.0"&&o.css("overflow",""),o.attr("aria-hidden",!1),s&&s()})):o.show().attr("aria-hidden",!1)},n._getMenuItemOptions=function(n,r){return n?!n.items||!t.isArray(n.items)?{}:r>=n.items.length?{}:n.items[r]:{}},n._getOuterElement=function(n,r){return t(n).filter(function(){return t(this).closest(r).length===0})},n._hasVisibleSubMenus=function(t){var n,r,i;t.jquery?t.data("wijmomenu")?n=t.data(t.data("wijmomenu")):t.data("wijmomenuitem")&&(n=t.data(t.data("wijmomenuitem"))):n=t;if(!n)throw"the arugment 'menuItem' must be an wijmenu or wijmenuitem";r=n.getItems();if(!r.length)return!1;for(i=0;i<r.length;i++)if(r[i].options.displayVisible)return!0;return!1},n._getFirstSelectableSubItem=function(t){var n,r=t.getItems(),i;for(n=0;n<r.length;n++){i=r[n].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return r[n]}return null},n._getLastSelectableSubItem=function(t){var n,r=t.getItems(),i;for(n=r.length-1;n>=0;n--){i=r[n].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return r[n]}return null},n._getSelectableSubItems=function(n,r){return t.grep(n.getItems(),function(e,t){var n=e.options;return n.header||n.separator||n.displayVisible===!1?!1:r(e,t)},!1)},n._add=function(r,i,s){var o=null,u=t("<li></li>"),a=r._getSublist(),f=r.getItems(),l,c,h=!1;typeof i=="string"?/<(h[1-5]|a)[\s\S]*>[\s\S]*<\/\1>/.test(i)&&u.append(i):t.isPlainObject(i)&&(c=jQuery.extend(!0,{},i));if(!a||a.length<=0)a=t("<ul></ul>"),r.element.append(a),h=!0;(!s||isNaN(s)||s>f.length)&&s!==0&&(s=f.length),f.length>0&&f.length!==s?(l=f[s].element,u.insertBefore(l)):a.append(u),o=r._createItemWidget(u,c);if(o===null||o===undefined)return;n._changeCollection(s,r.getItems(),r.options.items,o),r._bindModeEvents?r._bindModeEvents(o,h):o._bindModeEvents(o,h),h&&r._initUlCssClass()},n._changeCollection=function(t,n,r,i){if(!i){n.splice(t,1),r.splice(t,1);return}n.splice(t,0,i),r.splice(t,0,i.options)},n._remove=function(t,n){var r=t.getItems()[n];r&&r.element&&r.element.remove()},n._getItemWidget=function(t){return t.data(t.data("wijmomenuitem"))},n}(e.wijmoWidget);e.wijmenu=r,r.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{initSelector:":jqmData(role='wijmenu')",wijCSS:{wijmenu:"wijmo-wijmenu",wijmenuHorizontal:"wijmo-wijmenu-horizontal",wijmenuCurrent:"wijmo-wijmenu-current",wijmenuCurrentCrumb:"wijmo-wijmenu-current-crumb",wijmenuBreadcrumb:"wijmo-wijmenu-breadcrumb",wijmenuBreadcrumbText:"wijmo-wijmenu-breadcrumb-text",wijmenuItem:"wijmo-wijmenu-item",wijmenuLink:"wijmo-wijmenu-link",wijmenuList:"wijmo-wijmenu-list",wijmenuScroll:"wijmo-wijmenu-scroll",wijmenuContent:"wijmo-wijmenu-content",wijmenuFooter:"wijmo-wijmenu-footer",wijmenuHeader:"wijmo-wijmenu-header",wijmenuContainer:"wijmo-wijmenu-container",wijmenuIpod:"wijmo-wijmenu-ipod",wijmenuCrumb:"wijmo-wijmenu-crumb",wijmenuAllLists:"wijmo-wijmenu-all-lists",wijmenuPrevList:"wijmo-wijmenu-prev-list",wijmenuRtl:"wijmo-wijmenu-rtl",wijmenuBacklinktext:"wijmo-wijmenu-backlinktext"},wijMobileCSS:{header:"ui-header ui-bar-c",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},trigger:"",triggerEvent:"click",position:{},animation:{animated:"slide",duration:400,easing:null},showAnimation:{},hideAnimation:{animated:"fade",duration:400,easing:null},showDelay:400,hideDelay:400,slidingAnimation:{duration:400,easing:null},mode:"flyout",superPanelOptions:null,checkable:!1,orientation:"horizontal",direction:"ltr",maxHeight:200,backLink:!0,backLinkText:"Back",topLinkText:"All",crumbDefaultText:"Choose an option",select:null,focus:null,blur:null,showing:null,shown:null,hidding:null,hidden:null,items:null}),function(e){e._map=[],e.link=0,e.separator=1,e.header=2,e.other=3}(e.MarkupType||(e.MarkupType={}));var i=e.MarkupType,s=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._initState=function(){this._items=[],this._resetMarkupValue(),this.options.items||(this.options.items=[])},n.prototype._create=function(){var n=this;n._isMobile&&t.extend(!0,n.options.wijCSS,n.options.wijMobileCSS),n.element.data("wijmomenuitem",t.camelCase(n.widgetFullName)),n._initState(),n._getOrSetOptionsValues(),n._createChildMenuItems(),n._initCssClass(),e.prototype._create.call(this)},n.prototype._refresh=function(){var e=this,t=e.options;e._set_navigateUrl(t.navigateUrl),e._set_target(t.target),e._set_displayVisible(t.displayVisible),e._createChildMenuItems(),e._initCssClass()},n.prototype._setOption=function(n,r){var i=this,s=i.options,o;if(n==="items"){e.prototype._setOption.call(this,n,r),i._set_items(r);return}if(r===s[n])return;e.prototype._setOption.call(this,n,r);if(!t.isFunction(i["_set_"+n]))return;i["_set_"+n](r,!0);switch(n){case"header":case"separator":i._refresh();break;case"displayVisible":o=i.getParent(),o&&o._setSubmenuIcon();break;default:}},n.prototype.index=function(){return this.element.index()},n.prototype._set_selected=function(e){var t=this,n=t.options,r=t._getMenuItemType();r===i.link?t._getLink().toggleClass(n.wijCSS.stateActive,e):t.options.selected=!1},n.prototype._set_items=function(e){var t=this;t._getSublist().remove(),t._items=[],e.length>0&&(t._createChildMenuItems(),t._initUlCssClass()),t._setSubmenuIcon(e.length>0),t._bindModeEvents(t,!0),t._resetMarkupValue()},n.prototype._bindModeEvents=function(e,t){var n=this,r=e._getMenu(),i=r.options;t&&(n._initUlCssClass(),n._setSubmenuIcon(),n._resetMarkupValue()),i.mode==="flyout"?t?(n._killFlyout(),n._flyout()):e._flyout():(n._setDrilldownUlStyle(),e.element.parent().is(":visible")&&r._resetScroll(e._getParentOrMenu()))},n.prototype._set_value=function(e,t){this.options.value=e},n.prototype._set_text=function(e,t){var n=this,r=n.options;e||t?n._setText(e):r.text=n._getText()},n.prototype._set_navigateUrl=function(e,t){var n=this,r=n.options,i=n._getLink();i.is("a")&&(e||t?i.attr("href",e):r.navigateUrl=i.attr("href"))},n.prototype._set_target=function(e,t){var n=this,r=n.options,i=n._getLink();i.is("a")&&(r.target||t?i.attr("target",e):r.target=i.attr("target")||"")},n.prototype._set_iconClass=function(e,n){var r=this,s=r.options,o,u,a,f;if(s.header===!0||s.separator===!0)return;o=r._getLink(),u=o.find("span."+s.wijCSS.wijmenuitemIcon),e?(u.length===0&&(u=t("<span>"),a=o.children("."+s.wijCSS.wijmenuText).wrap("<span>").parent(),a.addClass(s.wijCSS.wijmenuText),a.prepend(u)),u.addClass(e).addClass(s.wijCSS.wijmenuIconLeft).addClass(s.wijCSS.wijmenuitemIcon),n&&r._set_imagePosition(s.imagePosition)):u.length!==0&&(u.remove(),a=o.children("."+s.wijCSS.wijmenuText),f=a.text(),a.html(""),a.text(f)),r._getMenuItemType()===i.other&&o.addClass(s.wijCSS.wijmenuLink).addClass(s.wijCSS.cornerAll)},n.prototype._set_imagePosition=function(e,t){var n=this,r=n.options,i=n._getLink(),s=i.find(">span>span."+r.wijCSS.wijmenuitemIcon),o=e==="right"?r.wijCSS.wijmenuIconRight:r.wijCSS.wijmenuIconLeft;if(s.length===0)return;s.removeClass(r.wijCSS.wijmenuIconRight).removeClass(r.wijCSS.wijmenuIconLeft).addClass(o)},n.prototype._set_separator=function(e,t){var n=this,r=n.element,s=n.options,o=n._getLink();t&&e===!1?(r.html("").removeClass(s.wijCSS.wijmenuSeparator).removeClass(s.wijCSS.widget).removeClass(s.wijCSS.wijmenuItem).removeClass(s.wijCSS.stateDefault).removeClass(s.wijCSS.cornerAll),n._createMenuItemMarkup(i.link).appendTo(r)):e===!0||o.length===0?(s.separator=!0,s.header=!1,n._createMenuItemMarkup(i.separator)):s.separator=!1,n._resetMarkupValue()},n.prototype._set_header=function(e,t){var n=this,r=n.element,s=n.options,o=n._getLink();t&&e===!1?(s.header=!1,r.html("").removeClass(s.wijCSS.header).removeClass(s.wijCSS.cornerAll).removeClass(s.wijCSS.widget).removeClass(s.wijCSS.wijmenuItem).removeClass(s.wijCSS.stateDefault),n._createMenuItemMarkup(i.link).appendTo(r)):e===!0||o.is("h1,h2,h3,h4,h5")?(s.header=!0,s.separator=!1,o.is("h1,h2,h3,h4,h5")||(o.remove(),o=n._createMenuItemMarkup(i.header),r.append(o))):s.header=!1,n._resetMarkupValue()},n.prototype._set_displayVisible=function(e){var t=this,n=t.element;e?n.show():n.hide()},n.prototype._createMenuItemMarkup=function(e){var n=this,r=n.options,s=n.element,o;return e===i.separator?(s.html('<span class="'+r.wijCSS.wijmenuSeparatorContent+'">&nbsp;</span>'),null):(e===i.header?o=t("<h3></h3>").text(r.text):o=t("<a>").text(r.text),o)},n.prototype._getMenuItemType=function(e){var n=this,r=n.options,s=n._getLink();return e&&(r=t.extend({},r,e)),r.separator===!0?i.separator:r.header===!0?i.header:s.length===0?r.text?i.link:i.separator:s.is("a")?i.link:s.is("h1,h2,h3,h4,h5")?i.header:i.other},n.prototype._getOrSetOptionsValues=function(){var e=this,t=e.element,n=e.options,r=e._getLink(),s=e._getMenuItemType();s===i.header?(e._set_header(n.header),e._set_text(n.text)):s===i.separator?e._set_separator(n.separator):(r.length===0?(r=e._createMenuItemMarkup(s),t.append(r)):e._set_text(n.text),e._resetMarkupValue(),e._set_navigateUrl(n.navigateUrl),e._set_target(n.target)),e._set_displayVisible(n.displayVisible),e._set_selected(n.selected)},n.prototype._getText=function(){return this._getLink().text()},n.prototype._setText=function(e){var t=this.element,n=this.options,r;r=t.find(":not(ul)a ."+n.wijCSS.wijmenuText+":first");if(r.length!==0){r.text(e);return}r=t.children("h1,h2,h3,h4,h5").filter(":first");if(r.length!==0){r.text(e);return}r=t.children("a:first");if(r.length!==0){r.text(e);return}},n.prototype._createChildMenuItems=function(){var e=this,n=e.element,i=e._items,s=e.options,o,u,a,f,l;if(s.header===!0||s.separator===!0)return;o=s.items.length,u=e._getSublist(),a=u.children("li").length;if(o>a){u.length===0&&(u=t("<ul>").appendTo(n),e._resetMarkupValue());for(f=0;f<o-a;f++)u.append("<li>")}t.each(e._getChildren(),function(n,s){var o=t(s),u;u=r._getMenuItemOptions(e.options,n),l=e._createItemWidget(o,u),i.push(l),e.options.items[n]=l.options})},n.prototype._createItemWidget=function(e,n){var r=this,i=r.widgetName;return e[i](n),e.data(t.camelCase(r.widgetFullName))},n.prototype._initCssClass=function(){var e=this,t=this.element,n=e.options,r=e._getLink(),s=e._getMenuItemType();s!==i.separator&&t.attr("role","menuitem"),s===i.separator?t.addClass(n.wijCSS.wijmenuSeparator).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll):s===i.header?t.addClass(n.wijCSS.header).addClass(n.wijCSS.cornerAll):(s===i.link?t.hasClass(n.wijCSS.wijmenuItem)||(t.addClass(n.wijCSS.widget).addClass(n.wijCSS.wijmenuItem).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll),r.addClass(n.wijCSS.wijmenuLink).addClass(n.wijCSS.cornerAll),r.wrapInner("<span>").children("span").addClass(n.wijCSS.wijmenuText)):t.addClass(n.wijCSS.widget).addClass(n.wijCSS.wijmenuItem).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll),e._setSubmenuIcon()),e._set_iconClass(n.iconClass),e._set_imagePosition(n.imagePosition),e._initUlCssClass()},n.prototype._initUlCssClass=function(){var e=this.options;this._getSublist().addClass(e.wijCSS.wijmenuList).addClass(e.wijCSS.content).addClass(e.wijCSS.cornerAll).addClass(e.wijCSS.helperClearFix).addClass(e.wijCSS.wijmenuChild).addClass(e.wijCSS.helperReset).hide()},n.prototype._setSubmenuIcon=function(e){var n=this,i=this.options,s=n._getLink(),o=n._getMenu(),u=o.options.direction,a=u==="rtl"?s.children("span."+i.wijCSS.icon+":first"):s.children("span."+i.wijCSS.icon+":last");e===undefined&&(e=r._hasVisibleSubMenus(n)),e&&!s.is(":input")?(a.length===0&&(u==="rtl"?a=t("<span>").prependTo(s):a=t("<span>").appendTo(s)),n._isRoot()&&o.options.orientation==="horizontal"&&o.options.mode==="flyout"?a.addClass(i.wijCSS.icon).addClass(i.wijCSS.iconArrowDown):u==="rtl"?a.addClass(i.wijCSS.icon).addClass(i.wijCSS.iconArrowLeft):a.addClass(i.wijCSS.icon).addClass(i.wijCSS.iconArrowRight)):a.remove()},n.prototype._killFlyout=function(){var e=this.element.attr("role",""),n=this.options;e.removeClass(n.wijCSS.wijmenuParent).unbind(".wijmenuEvent").unbind(".wijmenuitem").children(":first").unbind(".wijmenuEvent").unbind(".wijmenuitem").attr("aria-haspopup",""),this._getSublist().unbind(".wijmenuEvent").unbind(".wijmenuitem"),t.each(this.getItems(),function(){this._killFlyout()})},n.prototype._getItemTriggerEvent=function(){var e=this,n=e.element,r=e._getMenu(),i=r.options,s="default";return i.trigger!==""&&(n.is(i.trigger)||r.element.is(i.trigger)?s=i.triggerEvent:(n.parents("."+i.wijCSS.wijmenuParent).each(function(e,n){if(t(n).is(i.trigger))return s=i.triggerEvent,!1}),s==="default"&&e._isOuterTirggerEle()&&(s=i.triggerEvent))),n.data("triggerEvent",s),s},n.prototype._isOuterTirggerEle=function(){var e=this._getMenu();return r._getOuterElement(e.options.trigger,"."+e.options.wijCSS.wijmenu).length>0},n.prototype._flyout=function(){var e=this,n=e._getMenu(),r=n.options,i=".wijmenuitem",s=t(e.element).attr("aria-haspopup",!0),o,u,a=e._getItemTriggerEvent(),f=s.children("a."+r.wijCSS.wijmenuLink),l=e._getSublist(),c;if(e.getItems().length>0){l.bind("mouseleave"+i,function(t){if(r.disabled)return;u=setTimeout(function(){e._hideCurrentSubmenu(t)},r.hideDelay)}),s.addClass(e.options.wijCSS.wijmenuParent);if(a!=="default"&&r.triggerEvent!=="mouseenter"){switch(r.triggerEvent){case"click":f.bind("click"+i,function(n){if(r.disabled||t(this).hasClass(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(n)});break;case"dblclick":f.bind("dblclick"+i,function(n){if(r.disabled||t(this).hasClass(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(n)});break;case"rtclick":f.bind("contextmenu"+i,function(n){if(r.disabled||t(this).hasClass(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(n),n.preventDefault()})}l.data("notClose",!0)}else f.bind("mouseenter.wijmenuEvent",function(n){if(r.disabled||t(this).hasClass(r.wijCSS.stateDisabled))return;clearTimeout(u),o=setTimeout(function(){e._displaySubmenu(n,null)},r.showDelay)}).bind("mouseleave"+i,function(n){if(r.disabled||t(this).hasClass(r.wijCSS.stateDisabled))return;clearTimeout(o),l.is("ul")||(l=l.children("ul:first")),u=setTimeout(function(){e._hideSubmenu(!1,n)},r.hideDelay)}),e.getItems().length>0&&e._getSublist().bind("mouseenter"+i,function(e){if(r.disabled)return;clearTimeout(u)})}f.bind("click.wijmenuEvent",function(t){c=f.hasClass(r.wijCSS.stateDisabled);if(r.disabled||c)return;if(f.is("a")){if(e._getSublist().length===0)n._hideAllMenus(t);else if(r.trigger===""||s.data("triggerEvent")==="default"||r.triggerEvent==="mouseenter")n._hideAllMenus(t);else{var i=n._currentMenuList,o,u;if(i!==undefined){o=s;if(e._getSublist().length===0)for(u=i.length;u>0;u--){if(i[u-1]===e)break;i[u-1]._hideSubmenu(!1,t)}}}n.activate(t,e)}n.select(t),f.attr("href")==="#"&&t.preventDefault()}).bind("focusin.wijmenuEvent",function(t){c=f.hasClass(r.wijCSS.stateDisabled);if(r.disabled||c)return;f.is("a")&&n.activate(t,e)}),t.each(e.getItems(),function(){this._flyout()})},n.prototype._hideSubmenu=function(e,n){var i=this,s=i._getMenu(),o=s.options,u=r.animations,a,f,l,c=i._getSublist(),h=i._getLink();if(!h.data("subMenuOpened"))return;if(!s._trigger("hidding",n,i))return;h.is("."+o.wijCSS.wijmenuLink)&&(h.data("subMenuOpened",!1),h.removeClass(o.wijCSS.stateActive)),t.fn.wijhide&&e!==!0?(a={context:c,show:!1},f=t.extend({},o.animation,o.hideAnimation),c.wijhide(f,u,a,null,function(){s._setZindex(c,null),c.attr("aria-hidden",!0),s._trigger("hidden",n,i)})):(c.hide().attr("aria-hidden",!0),s._setZindex(c,null),s._trigger("hidden",n,i)),l=s._currentMenuList,l&&(l=t.makeArray(t.map(l,function(e){return e&&e===i?null:e})),s._currentMenuList=t.makeArray(l))},n.prototype._displaySubmenu=function(e,n){var i=this,s=i._getMenu(),o=s.options,u,a,f,l,c=i._getLink(),h=i._getSublist();l=!r._hasVisibleSubMenus(i);if(h.is(":visible")||l)return;if(!s._trigger("showing",e,i))return;c.is("a."+o.wijCSS.wijmenuLink)&&c.data("subMenuOpened",!0),h.show(),this._setMenuItemPosition(),s.nowIndex++,s._setZindex(h,s.nowIndex),h.hide(),u={context:h,show:!0},a=o.direction==="rtl"?"right":"left",o.orientation==="horizontal"&&i._isRoot()&&(a="up"),f=t.extend({},{option:{direction:a}},o.animation,o.showAnimation),r._animateFlyoutMenu(f,u,function(){h.is(":hidden")&&i._hideSubmenu(!0,e),s._trigger("shown",e,i),n&&n()}),s._isClickToOpen=o.triggerEvent==="click",s._currentMenuList===undefined&&(s._currentMenuList=[]),s._currentMenuList.push(i)},n.prototype._setMenuItemPosition=function(){var e=this,n=e._getSublist(),r=e._getMenuItemPosition(),i={of:this._getLink()};n.css({left:"0",top:"0",position:"absolute"}),n.position(t.extend(i,r))},n.prototype._getMenuItemPosition=function(){var e=this,n=this._getMenu(),r=n.options,i=r.direction,s=i==="rtl"?{my:"right top",at:"left top"}:{my:"left top",at:"right top"};return r.orientation==="horizontal"&&e._isRoot()&&(s=i==="rtl"?{my:"right top",at:"right bottom"}:{my:"left top",at:"left bottom"}),s=t.extend(s,r.position),s},n.prototype._getChildren=function(){return this._getSublist().children("li")},n.prototype._setDrilldownUlStyle=function(){var e=this,n=e.options,r=e._getSublist(),i=e._getMenu(),s=i.domObject.menucontainer.width();i.options.direction==="rtl"?r.css({width:s,left:-s}):r.css({width:s,left:s}),r.addClass(n.wijCSS.content),t.each(e.getItems(),function(e,t){t.getItems().length&&this._setDrilldownUlStyle()})},n.prototype._getMenu=function(){var e=this,t=e._menu,n,r;if(!t){n=e.element.parent();while(!n.is("body")&&n.length>0){r=n.data("wijmomenu");if(r)return t=n.data(r),e._menu=t,t;n=n.parent()}throw"An menuitem must be a child of menu"}return t},n.prototype.getParent=function(){var e=this,t=e.element,n,i,s;i=e._parent;if(i!==undefined)return i;s=t.parents("li:first");if(s.length>0){i=r._getItemWidget(s);if(i!==undefined)return e._parent=i,i}n=e._getMenu();if(n._getSublist().get(0)===t.parent().get(0))return e._parent=null,null;throw"An menuitem must be a child of menu or another menuitem"},n.prototype._getParentOrMenu=function(){return this.getParent()||this._getMenu()},n.prototype._getField=function(e){return this.element.data(e)},n.prototype._setField=function(e,t){return this.element.data(e,t)},n.prototype._innerDestroy=function(e){var t=this,n=t.options,r=t.element,i,s=t.getItems(),o=s.length-1;r.removeClass(n.wijCSS.widget).removeClass(n.wijCSS.wijmenuItem).removeClass(n.wijCSS.stateDefault).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.wijmenuParent).removeClass(n.wijCSS.header).removeClass(n.wijCSS.wijmenuSeparator),i=r.children("."+n.wijCSS.wijmenuLink),i.removeClass(n.wijCSS.wijmenuLink).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.stateFocus).removeClass(n.wijCSS.stateHover).removeClass(n.wijCSS.stateActive).html(i.children("."+n.wijCSS.wijmenuText).html()).unbind(".wijmenuitem").unbind(".wijmenuEvent"),r.children("ul").removeClass(n.wijCSS.wijmenuList).removeClass(n.wijCSS.content).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.helperClearFix).removeClass(n.wijCSS.wijmenuChild).removeClass(n.wijCSS.helperReset).attr("role","").attr("aria-activedescendant","").show().css({left:"",top:"",position:""}).attr("hidden",""),r.removeAttr("role"),i.removeAttr("aria-haspopup"),e||t._removeFromParentCollection(),r.removeData("menu").removeData("parent");for(;o>=0;o--)s[o].destroy(!0);t._items.length=0,t._resetMarkupValue()},n.prototype.destroy=function(t){var n=this;n._innerDestroy(t),e.prototype.destroy.call(this)},n.prototype._getFirstSelectableSubItem=function(){return r._getFirstSelectableSubItem(this)},n.prototype._getLastSelectableSubItem=function(){return r._getLastSelectableSubItem(this)},n.prototype.next=function(){var e=this,n=e._getParentOrMenu().getItems(),r,i,s=t.inArray(e,n);if(s===-1)throw"cannot find item from the parent collection";for(r=s+1;r<n.length;r++){i=n[r].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return n[r].element}return null},n.prototype.previous=function(){var e=this,n=e._getParentOrMenu().getItems(),r,i,s=t.inArray(e,n);if(s===-1)throw"cannot find item from the parent collection";for(r=s-1;r>=0;r--){i=n[r].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return n[r].element}return null},n.prototype._removeFromParentCollection=function(){var e=this,n,i=!1,s;n=e.getParent(),n===null&&(n=e._getMenu(),i=!0),s=t.inArray(e,n.getItems());if(s===-1)return;r._changeCollection(s,n.getItems(),n.options.items,null),n.getItems().length===0&&(i||(n._setSubmenuIcon(!1),n._resetMarkupValue()),n.element.children("ul").remove())},n.prototype._resetMarkupValue=function(){this._sublist=null,this._link=null},n.prototype._hideCurrentSubmenu=function(e){var n=this,r=n._getSublist();if(r.length===0)return;r.data("notClose")||n._hideSubmenu(!1,e),t.each(n.getItems(),function(){this._hideCurrentSubmenu(e)})},n.prototype._showFlyoutSubmenu=function(e,t){var n=this,r=this._getMenu(),i=r._currentMenuList,s;if(i!==undefined)for(s=i.length;s>0;s--){if(i[s-1]===n.getParent())break;i[s-1]._hideSubmenu(!1,e)}n._displaySubmenu(e,t)},n.prototype.getItems=function(){return this._items},n.prototype._getSublist=function(){var e=this;return e._sublist||(e._sublist=this.element.children("ul:first")),e._sublist},n.prototype._getLink=function(){var e=this;return e._link||(e._link=this.element.children(":first")),e._link},n.prototype._isRoot=function(){return this.getParent()===null},n.prototype.add=function(e,t){r._add(this,e,t)},n.prototype.remove=function(e){r._remove(this,e)},n}(e.wijmoWidget);e.wijmenuitem=s,s.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{initSelector:":jqmData(role='wijmenuitem')",wijCSS:{wijmenuitemIcon:"wijmenuitem-icon",wijmenuParent:"wijmo-wijmenu-parent",wijmenuLink:"wijmo-wijmenu-link",wijmenuText:"wijmo-wijmenu-text",wijmenuList:"wijmo-wijmenu-list",wijmenuItem:"wijmo-wijmenu-item",wijmenuSeparator:"wijmo-wijmenu-separator",wijmenuIconLeft:"wijmo-wijmenu-icon-left",wijmenuIconRight:"wijmo-wijmenu-icon-right",wijmenuChild:"wijmo-wijmenu-child",wijmenuSeparatorContent:"wijmo-wijmenu-separator-content"},wijMobileCSS:{header:"ui-header ui-bar-c",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},header:!1,separator:!1,value:"",text:"",navigateUrl:"",target:"",iconClass:"",imagePosition:"",displayVisible:!0,selected:!1,items:null}),t.wijmo.registerWidget(n,r.prototype),t.widget("wijmo.wijmenuitem",t.wijmo.widget,s.prototype)})(wijmo||(wijmo={}));