var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){var t=jQuery,n=function(){function e(){}return e.getDiffAttrs=function(n,r){var i={};return t.each(r,function(e,t){if(typeof n=="undefined")return!0;typeof n[e]=="undefined"?i[e]=r[e]:n[e]!==r[e]&&(i[e]=r[e])}),i},e.paintShadow=function(n,r,i){if(n.removed||t(n.node).parent().length===0)return;var s=n.clone(),o=r||1,u=i||"#cccccc";s.insertBefore(n),s.attr({transform:Raphael.format("...T{0},{1}",o,o),stroke:u,"stroke-width":o}),s.toBack(),s.offset=o,n.shadow=s},e.getScaling=function(t,n,r,i){var s=n-r;return s===0&&(s=1),t&&(s=-s),i/s},e.getTranslation=function(t,n,r,i,s){var o=0;return t?(o=n.y,o-=s*r):(o=n.x,o-=s*i),o},e.getXSortedPoints=function(n){function a(e,t){return e-t}var r=n.data.x,i=[].concat(r),s=[].concat(n.data.y),o=[],u=r;if(r===undefined||r.length===0)return;return typeof r[0]=="number"&&(u=[].concat(r).sort(a)),t.each(u,function(e,n){t.each(i,function(t,r){if(n===r)return typeof r!="number"&&(r=e),o.push({x:r,y:s[t]}),i.splice(t,1),s.splice(t,1),!1})}),o},e.sector=function(n,r,i,s,o){var u=t.wijraphael.getPositionByAngle(n,r,i,s),a=t.wijraphael.getPositionByAngle(n,r,i,o);return["M",n,r,"L",u.x,u.y,"A",i,i,0,+(o-s>180),0,a.x,a.y,"z"]},e.donut=function(n,r,i,s,o,u){var a=t.wijraphael.getPositionByAngle(n,r,i,o),f=t.wijraphael.getPositionByAngle(n,r,i,u),l=t.wijraphael.getPositionByAngle(n,r,s,o),c=t.wijraphael.getPositionByAngle(n,r,s,u),h=u-o>180;return["M",a.x,a.y,"A",i,i,0,+h,0,f.x,f.y,"L",c.x,c.y,"A",s,s,0,+h,1,l.x,l.y,"L",a.x,a.y,"z"]},e.getFirstValidListValue=function(n){var r;return t.each(n,function(e,t){return t===null?!0:typeof t=="undefined"?!0:typeof t=="number"&&isNaN(t)?!0:(r=t,!1)}),r},e.getLastValidListValue=function(n){var r=[].concat(n).reverse();return e.getFirstValidListValue(r)},e.isHolefunction=function(t,n){return t===null?!0:typeof t=="undefined"?!0:typeof t=="number"&&isNaN(t)?!0:n===null?!1:typeof t!="undefined"?t-n===0?!0:!1:!1},e}();e.ChartUtil=n;var r=function(){function e(){}return e.roundTime=function(n,r,i){var s=this,o=r,u=t.fromOADate(n),a,f,l,c;return o>0?(a={year:u.getFullYear(),month:u.getMonth(),day:u.getDate(),hour:u.getHours(),minute:u.getMinutes(),second:u.getSeconds()},o<s.tmInc.minute?(a.second=s.tround(a.second,o,i),s.getTimeAsDouble(a)):(a.second=0,o<s.tmInc.hour?(o/=s.tmInc.minute,a.minute=s.tround(a.minute,o,i),s.getTimeAsDouble(a)):(a.minute=0,o<s.tmInc.day?(o/=s.tmInc.hour,a.hour=s.tround(a.hour,o,i),s.getTimeAsDouble(a)):(a.hour=0,o<s.tmInc.month?(o/=s.tmInc.day,a.day=s.tround(a.day,o,i),s.getTimeAsDouble(a)):(a.day=1,o<s.tmInc.year?(o/=s.tmInc.month,a.month=s.tround(a.month,o,i),s.getTimeAsDouble(a)):(a.month=0,o/=s.tmInc.year,a.year=s.tround(a.year,o,i),s.getTimeAsDouble(a))))))):(f=u,l=f-o,c=parseInt((l/r).toString(),10)*r,i&&c!==l&&(c+=r),f=o+c,f)},e.tround=function(t,n,r){var i=parseInt((t/n*n).toString(),10);return r&&i!==t&&(i+=parseInt(n,10)),i},e.getTimeAsDouble=function(n){var r=0,i=0,s=null;return n.day<1?(i=-1-n.day,n.day=1):n.day>28&&(i=n.day-28,n.day=28),n.month<0?(r=-1-n.day,n.month=0):n.month>11&&(r=n.month-11,n.month=11),s=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second),s.setDate(s.getDate()+i),s.setMonth(s.getMonth()+r),t.toOADate(s)},e.getTimeDefaultFormat=function(t,n){var r=this,i=t-n,s="d";return i>2*r.tmInc.year?s="yyyy":i>r.tmInc.year?s="MMM yy":i>3*r.tmInc.month?s="MMM":i>2*r.tmInc.week?s="MMM d":i>2*r.tmInc.day?s="ddd d":i>r.tmInc.day?s="ddd H:mm":i>r.tmInc.hour?s="H:mm":i>=1e3&&(s="H:mm:ss"),s},e.niceTimeUnit=function(t,n){var r=this,i=t;return i=r.niceTimeSpan(i,n),i},e.niceTimeSpan=function(t,n){var r=this,i=r.manualTimeInc(n),s=0,o=0;s=Math.ceil(t);if(s===0)return r.timeSpanFromTmInc(i);o=1;if(i<r.tmInc.minute){if(s<r.tmInc.minute){o=r.getNiceInc([1,2,5,10,15,30],s,i);if(o!==0)return o}i=r.tmInc.minute}if(i<r.tmInc.hour){if(s<r.tmInc.hour){o=r.getNiceInc([1,2,5,10,15,30],s,i);if(o!==0)return o}i=r.tmInc.hour}if(i<r.tmInc.day){if(s<r.tmInc.day){o=r.getNiceInc([1,3,6,12],s,i);if(o!==0)return o}i=r.tmInc.day}if(i<r.tmInc.month){if(s<r.tmInc.month){o=r.getNiceInc([1,2,7,14],s,i);if(o!==0)return o}i=r.tmInc.month}if(i<r.tmInc.year){if(s<r.tmInc.year){o=r.getNiceInc([1,2,3,4,6],s,i);if(o!==0)return o}i=r.tmInc.year}return o=100*r.tmInc.year,s<o&&(o=r.getNiceInc([1,2,5,10,20,50],s,i),o===0&&(o=100*r.tmInc.year)),o},e.getNiceInc=function(t,n,r){var i=0,s=0,o=t.length;for(i=0;i<o;i++){s=t[i]*r;if(n<=s)return s}return 0},e.timeSpanFromTmInc=function(t){var n=1e3,r=t,i=1;if(t!==this.tmInc.maxtime)if(t>this.tmInc.tickf1)n=t;else{t+=7;while(r>0)i*=10,r--;n=i}return n},e.manualTimeInc=function(t){var n=this,r=n.tmInc.second;return!t||t.length===0?r:(t.indexOf("s")>=0?r=n.tmInc.second:t.indexOf("m")>=0?r=n.tmInc.minute:t.indexOf("h")>=0||t.indexOf("H")>=0?r=n.tmInc.hour:t.indexOf("d")>=0?r=n.tmInc.day:t.indexOf("M")>=0?r=n.tmInc.month:t.indexOf("y")>=0&&(r=n.tmInc.year),r)},e.tmInc={tickf7:-7e3,tickf6:-6e3,tickf5:-5e3,tickf4:-4e3,tickf3:-3e3,tickf2:-2e3,tickf1:-1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:26784e5,year:31536e6,maxtime:2147483647},e.niceTickNumber=function(t){if(parseFloat(t)===0)return t;t<0&&(t=-t);var n=Math.log(t)/Math.log(10),r=parseInt(this.signedFloor(n).toString(),10),i=t/Math.pow(10,r),s=10;return i<=1?s=1:i<=2?s=2:i<=5&&(s=5),s*Math.pow(10,r)},e.niceNumber=function(t,n,r){if(parseFloat(t)===0)return t;t<0&&(t=-t);var i=t/Math.pow(10,n),s=10;return r?i<1.5?s=1:i<3?s=2:i<7&&(s=5):i<=1?s=1:i<=2?s=2:i<=5&&(s=5),s*Math.pow(10,n)},e.nicePrecision=function(t){if(t<=0||typeof t!="number")return 0;var n=Math.log(t)/Math.log(10),r=parseInt(this.signedFloor(n).toString(),10),i=t/Math.pow(10,r);return i<3&&(r=-r+1),r},e.precCeil=function(t,n){var r=Math.pow(10,t),i=n/r;return i=Math.ceil(i),i*r},e.precFloor=function(t,n){var r=Math.pow(10,t),i=n/r;return i=Math.floor(i),i*r},e.signedCeiling=function(t){return t<0?Math.floor(t):Math.ceil(t)},e.signedFloor=function(t){return t<0?Math.ceil(t):Math.floor(t)},e}();e.ChartDataUtil=r,Raphael.fn.closeBtn=function(e,t,n){var r=Math.cos(45*Math.PI/180)*n,i=this.set(),s=["M",e-r,t-r,"L",e+r,t+r,"M",e-r,t+r,"L",e+r,t-r],o=this.path(s.join(" ")),u=null;return o.attr({cursor:"pointer"}),i.push(o),u=this.rect(e-n,t-n,n*2,n*2),u.attr({fill:"white","fill-opacity":0,cursor:"pointer",stroke:"none"}),i.push(u),i};var i=function(){function e(e,n,r){this.options={content:"",contentStyle:{},title:"",titleStyle:{},style:{fill:"white","fill-opacity":.5},closeBehavior:"auto",mouseTrailing:!0,triggers:"hover",animated:"fade",showAnimated:null,hideAnimated:null,duration:500,showDuration:500,hideDuration:500,easing:null,showEasing:null,hideEasing:null,showDelay:150,hideDelay:150,relativeTo:"mouse",compass:"east",offsetX:0,offsetY:0,showCallout:!0,calloutFilled:!1,calloutFilledStyle:{fill:"black"},calloutLength:12,calloutOffset:0,calloutAnimation:{easing:null,duration:500},windowCollisionDetection:"flip",calloutSide:null,width:null,height:null,beforeShowing:null},this.paper=e,this.targets=n,t.extend(this.options,r),this.init()}return e.prototype.init=function(){var e=this.options;this.calloutOffset=e.calloutOffset,this.offsetLength=0,this.gapLength=e.calloutLength/2,this.width=e.width,this.height=e.height,this.offset={x:0,y:0},this.targets&&this._bindLiveEvent(this.targets),this.selector&&this._bindLiveEventBySelector(this.selector)},e.prototype._getShowPoint=function(e,t){var n=e.getBBox(),r={x:0,y:0};switch(t){case"east":r.x=n.x+n.width,r.y=n.y+n.height/2;break;case"eastnorth":r.x=n.x+n.width,r.y=n.y;break;case"eastsouth":r.x=n.x+n.width,r.y=n.y+n.height;break;case"west":r.x=n.x,r.y=n.y+n.height/2;break;case"westnorth":r.x=n.x,r.y=n.y;break;case"westsouth":r.x=n.x,r.y=n.y+n.height;break;case"north":r.x=n.x+n.width/2,r.y=n.y;break;case"northeast":r.x=n.x+n.width,r.y=n.y;break;case"northwest":r.x=n.x,r.y=n.y;break;case"south":r.x=n.x+n.width/2,r.y=n.y+n.height;break;case"southeast":r.x=n.x+n.width,r.y=n.y+n.height;break;case"southwest":r.x=n.x,r.y=n.y+n.height}return r},e.prototype._clearIntentTimer=function(e){e&&(window.clearTimeout(e),e=null)},e.prototype._removeTooltip=function(t){var n=this,r=this,i=this.elements,s=r.options,o,u,a;if(i){if(s.hideAnimated||s.animated)o=s.hideAnimated,o||(o=s.animated),o&&e.animations[o]&&(a={animated:o,duration:s.hideDuration||s.duration,easing:s.hideEasing||s.easing,context:i,show:!1},e.animations[o](a));u=s.hideDuration||s.duration,t&&(u=t),window.setTimeout(function(){var e,t;n.content&&(n.content.wijRemove(),n.content=null),n.title&&(n.title.wijRemove(),n.title=null),n.container&&(n.container.wijRemove(),n.container=null);if(n.closeBtn){for(e=0,t=n.closeBtn.length;e<t;e++)n.closeBtn[e].unclick();n.closeBtn.wijRemove(),n.closeBtn=null}n.callout&&(n.callout.wijRemove(),n.callout=null),r.lastPoint=null,i=null},u)}},e.prototype._clearTimers=function(){this.intentShowTimer&&this._clearIntentTimer(this.intentShowTimer),this.intentHideTimer&&this._clearIntentTimer(this.intentHideTimer)},e.prototype._hide=function(e){var t=this;t._clearTimers(),t.options.hideDelay?t.intentHideTimer=window.setTimeout(function(){t._removeTooltip()},t.options.hideDelay):t._removeTooltip()},e.prototype._convertCompassToPosition=function(e){var t="",n={x:0,y:0};switch(e){case"east":t="right-middle",n.x=2,n.y=0;break;case"eastnorth":t="right-top",n.x=2,n.y=-2;break;case"eastsouth":t="right-bottom",n.x=2,n.y=2;break;case"west":t="left-middle",n.x=-2,n.y=0;break;case"westnorth":t="left-top",n.x=-2,n.y=-2;break;case"westsouth":t="left-bottom",n.x=-2,n.y=2;break;case"north":t="top-middle",n.x=0,n.y=-2;break;case"northeast":t="top-right",n.x=2,n.y=-2;break;case"northwest":t="top-left",n.x=-2,n.y=-2;break;case"south":t="bottom-middle",n.x=0,n.y=2;break;case"southeast":t="bottom-right",n.x=2,n.y=2;break;case"southwest":t="bottom-left",n.x=-2,n.y=2}return this.offset=n,t},e.prototype._getCalloutArr=function(e,t){var n=[],r=this.options,i=r.compass;r.calloutSide&&(i=r.calloutSide);switch(i.toLowerCase()){case"east":case"eastsouth":case"eastnorth":n=["M",e.x+t,e.y+t,"l",-t,-t,"l",t,-t,"Z"];break;case"west":case"westsouth":case"westnorth":n=["M",e.x-t,e.y-t,"l",t,t,"l",-t,t,"Z"];break;case"north":case"northeast":case"northwest":n=["M",e.x-t,e.y-t,"l",t,t,"l",t,-t,"Z"];break;case"south":case"southeast":case"southwest":n=["M",e.x-t,e.y+t,"l",t,-t,"l",t,t,"Z"]}return n},e.prototype._getFuncText=function(e,n){if(t.isFunction(e)){var r=null,i,s={target:null,fmt:e},o;if(n&&n.target){o=n.target;if(!o.raphael||!o.raphaelid)o=o.parentNode;o.raphael&&o.raphaelid?(i=this.paper.getById(o.raphaelid),s.target=i):s.target=n.target}return r=t.proxy(s.fmt,s),r().toString()}return e},e.prototype._translateCallout=function(e){var t=this.options,n=this.width,r=this.height,i=this.gapLength,s=this.offsetLength,o=this.calloutOffset,u=this.tooltipElements.callout;if(t.calloutSide){var a=i||s;switch(t.calloutSide){case"south":case"north":e?u.animate({translation:-n/2+a+o+",0"},e):u.translate(-n/2+a+o,0);break;case"east":case"west":e?u.animate({translation:"0,"+(-r/2+a+o)},e):u.translate(0,-r/2+a+o)}}},e.replacer=function(t,n,r){var i=r,s=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;return n.replace(s,function(e,t,n,r,s){t=t||r,i&&(i[t]!=="string"&&(i=i[t]),typeof i=="function"&&s&&(i=i()))}),i=(i===null||i===r?t:i).toString(),i},e.fill=function(n,r){var i=/\{([^\}]+)\}/g;return String(n).replace(i,function(t,n){return e.replacer(t,n,r)})},e.prototype._createPath=function(t,n,r){var i=n.split("-"),s=5,o=r.getBBox(),u=this.options,a=u.padding,f=this.gapLength,l=this.offsetLength,c=a&&!isNaN(a)?parseInt(a):0,h=Math.round(o.width+c*2),p=Math.round(o.height+c*2),d=Math.round(o.x-c)-s,v=Math.round(o.y-c)-s,m=0,g=0,y=0,b=0,w=null,E=null,S=null;u.width&&(h=h>u.width?h:u.width),u.height&&(p=p>u.height?p:u.height),this.width=h,this.height=p,m=Math.min(p/4,h/4,f),l&&(l=Math.min(p/4,h/4,l)),l?(g=l,w={top:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}l-{right},0-{offset},0,-{left},0a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",bottom:"M{x},{y}l{left},0,{offset},0,{right},0a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",right:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}l0-{bottom},0-{offset},0-{top}a{r},{r},0,0,1,{r}-{r}z",left:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}l0,{top},0,{offset},0,{bottom}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z"}):w={top:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}l-{right},0-{gap},{gap}-{gap}-{gap}-{left},0a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",bottom:"M{x},{y}l{left},0,{gap}-{gap},{gap},{gap},{right},0a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",right:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}l0-{bottom}-{gap}-{gap},{gap}-{gap},0-{top}a{r},{r},0,0,1,{r}-{r}z",left:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}l0,{top},{gap},{gap}-{gap},{gap},0,{bottom}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z"},E=[{x:d+s,y:v,w:h,w4:h/4,h4:p/4,left:0,right:h-m*2-g*2,top:0,bottom:p-m*2-g*2,r:s,h:p,gap:m,offset:g*2},{x:d+s,y:v,w:h,w4:h/4,h4:p/4,left:h/2-m-g,right:h/2-m-g,top:p/2-m-g,bottom:p/2-m-g,r:s,h:p,gap:m,offset:g*2},{x:d+s,y:v,w:h,w4:h/4,h4:p/4,right:0,left:h-m*2-g*2,bottom:0,top:p-m*2-g*2,r:s,h:p,gap:m,offset:g*2}][i[1]==="middle"?1:(i[1]==="left"||i[1]==="top"?1:0)*2],S=this.paper.path(e.fill(w[i[0]],E));switch(i[0]){case"top":y=t.x-(d+s+E.left+m+l),b=t.y-(v+s+p+s+m+l);break;case"bottom":y=t.x-(d+s+E.left+m+l),b=t.y-(v-m-l);break;case"left":y=t.x-(d+s+h+s+m+l),b=t.y-(v+s+E.top+m+l);break;case"right":y=t.x-(d-m-g),b=t.y-(v+s+E.top+m+g)}return S.translate(y,b),r.transform(Raphael.format("...t{0},{1}",y,b)),S},e.prototype._isWindowCollision=function(e,n,r,i,s,o,u){var a=e.getBBox(),f=0,l=n,c=a.x+s,h=a.y+o,p=this.paper.width,d=this.paper.height,v=r,m=i,g=e.attr("stroke-width"),y=u===!0||u==="flip";return Raphael.vml&&(p=t(this.paper.canvas).width(),d=t(this.paper.canvas).height()),c-g<0&&(y?l.toLowerCase().indexOf("west")===-1?c+a.width/2+a.width-r<=p&&(f++,l=l.toLowerCase()+"east",v=0-r):c+a.width+a.width-r<=p&&(f++,l=l.toLowerCase().replace("west","east"),v=0-r):(f++,v=0-c+g+r)),h-g<0&&(y?l.toLowerCase().indexOf("north")===-1?h+a.height/2+a.height-i<=d&&(f++,l=l.toLowerCase()+"south",m=0-i):h+a.height+a.height-i<=d&&(f++,l=l.toLowerCase().replace("north","south"),m=0-i):(f++,m=0-h+g+i)),c+a.width+g>p&&(y?l.toLowerCase().indexOf("east")===-1?c-a.width/2-r>=0&&(f++,l=l.toLowerCase()+"west",v=0-r):c-a.width-r>=0&&(f++,l=l.toLowerCase().replace("east","west"),v=0-r):(f++,v=p-(c+a.width+g)+r)),h+a.height+g>d&&(y?l.toLowerCase().indexOf("south")===-1?h-a.height/2-i>=0&&(f++,l=l.toLowerCase()+"north",m=0-i):h-a.height-i>=0&&(f++,l=l.toLowerCase().replace("south","north"),m=0-i):(f++,m=d-(h+a.height+g)+i)),f?{compass:l,offsetX:v,offsetY:m}:!1},e.prototype._createTooltipEles=function(n,r,i,s,o,u,a){var f=this,l,c,h,p=this.paper.set(),d=null,v=null,m=this.options,g=this.closeBtnLength,y=this.calloutOffset,b=null,w=0,E=0,S=250,x=0,T=0,N,C={x:n.x,y:n.y},k=this.offset,L=null,A=null;t.wijraphael.clearRaphaelCache(),h=this._convertCompassToPosition(o),C.x+=u+k.x,C.y+=a+k.y,this.elements=this.paper.set(),this.title&&(t.each(this.title,function(e,n){t(n.node).unbind(".Rtooltip")}),this.title.wijRemove()),r&&r.length>0?(this.title=this.paper.htmlText(-1e3,-1e3,r,m.titleStyle),this.elements.push(this.title),l=this.title.getBBox()):l={left:-1e3,top:-1e3,width:0,height:0},this.content&&(t.each(this.content,function(e,n){t(n.node).unbind(".Rtooltip")}),this.content.wijRemove()),i&&i.length>0?(this.content=this.paper.htmlText(-1e3,-1e3,i,m.contentStyle),this.elements.push(this.content),c=this.content.getBBox()):c={left:-1e3,top:-1e3,width:0,height:0};if(this.closeBtn){for(x=0,T=this.closeBtn.length;x<T;x++)this.closeBtn[x].unclick();this.closeBtn.wijRemove()}this.content&&this.content.transform(Raphael.format("T0,{0}",l.height/2+c.height/2)),this.title&&this.title.transform(Raphael.format("T0,{0}",0)),m.closeBehavior==="sticky"&&(this.closeBtn=this.paper.closeBtn(-1e3,-1e3,g),this.elements.push(this.closeBtn),m.width&&m.width>l.width+g*2&&m.width>c.width+g*2?this.closeBtn.transform(Raphael.format("T{0},{1}",m.width-g,g)):l.width>=c.width-g*2?this.closeBtn.transform(Raphael.format("T{0},{1}",l.width+g,g)):this.closeBtn.transform(Raphael.format("T{0},{1}",c.width-g,g)),t.each(this.closeBtn,function(e,t){var n=f;t.click(function(e){n._hide(e)})})),this.title&&(p.push(this.title),m.relatedElement&&this.title.insertBefore(m.relatedElement)),this.content&&(p.push(this.content),m.relatedElement&&this.content.insertBefore(m.relatedElement)),this.closeBtn&&(p.push(this.closeBtn),m.relatedElement&&this.closeBtn.insertBefore(m.relatedElement)),m.showCallout||(this.gapLength=0);if(m.calloutSide||m.calloutFilled)this.gapLength=0,this.offsetLength=m.calloutLength/2,m.calloutSide&&(h=this._convertCompassToPosition(m.calloutSide));m.calloutSide&&p.length===0&&(this.content=this.paper.htmlText(-1e3,-1e3," "),p.push(this.content),m.relatedElement&&this.content.insertBefore(m.relatedElement)),this.callout&&(t(this.callout.node).unbind(".Rtooltip"),this.callout.wijRemove()),this.container&&(t(this.container.node).unbind(".Rtooltip"),this.container.wijRemove());if(this.lastPoint){m.showCallout&&(m.calloutSide||m.calloutFilled)&&(d=this._getCalloutArr(this.lastPoint,this.offsetLength),this.callout=this.paper.path(d.concat(" ")),m.relatedElement&&this.callout.insertBefore(m.relatedElement),m.calloutFilled&&this.callout.attr(m.calloutFilledStyle),m.calloutSide&&this._translateCallout(0)),this.container=this._createPath(this.lastPoint,h,p),m.relatedElement&&this.container.insertBefore(m.relatedElement);if(s){N=this._isWindowCollision(this.container,o,u,a,C.x-this.lastPoint.x,C.y-this.lastPoint.y,s);if(N){this._createTooltipEles(n,r,i,!1,N.compass,N.offsetX,N.offsetY);return}}this.elements.push(this.callout),this.elements.push(this.container),w=C.x-this.lastPoint.x,E=C.y-this.lastPoint.y,A=Raphael.format("...T{0},{1}",w,E),L=Raphael.animation({transform:A},S),this.container&&(m.showAnimated||m.animated?this.container.animate(L):this.container.attr("transform",A)),this.title&&(m.showAnimated||m.animated?this.title.animate(L):this.title.attr("transform",A)),this.content&&(m.showAnimated||m.animated?this.content.animate(L):this.content.attr("transform",A)),this.closeBtn&&(m.showAnimated||m.animated?this.closeBtn.animate(L):this.closeBtn.attr("transform",A)),this.callout&&(m.showAnimated||m.animated?this.callout.animate(L):this.callout.attr("transform",A))}else{m.showCallout&&(m.calloutSide||m.calloutFilled)&&(d=this._getCalloutArr(C,this.offsetLength),this.callout=this.paper.path(d.concat(" ")),m.relatedElement&&this.callout.insertBefore(m.relatedElement),m.calloutFilled&&this.callout.attr(m.calloutFilledStyle),m.calloutSide&&this._translateCallout(0)),this.container=this._createPath(C,h,p),m.relatedElement&&this.container.insertBefore(m.relatedElement);if(s){N=this._isWindowCollision(this.container,o,u,a,0,0,s);if(N){this._createTooltipEles(n,r,i,!1,N.compass,N.offsetX,N.offsetY);return}}this.elements.push(this.callout),this.elements.push(this.container);if(m.showAnimated||m.animated)v=m.showAnimated,v||(v=m.animated),v&&e.animations[v]&&(b={animated:v,duration:m.showDuration||m.duration,easing:m.showEasing||m.easing,context:this.elements,show:!0},e.animations[v](b))}this.lastPoint=C,this.container.attr(m.style),m.relatedElement?(this.title&&this.title.insertBefore(m.relatedElement),this.content&&this.content.insertBefore(m.relatedElement),this.closeBtn&&this.closeBtn.insertBefore(m.relatedElement)):p.toFront()},e.prototype._createTooltip=function(e,n){var r=null,i=null,s=null,o=null,u=this.options,a,f;if(t.isFunction(u.beforeShowing)){s=null,o={target:null,options:u,fmt:u.beforeShowing};if(n&&n.target){f=n.target;if(!f.raphael||!f.raphaelid)f=f.parentNode;f.raphael&&f.raphaelid?(a=this.paper.getById(f.raphaelid),o.target=a):(a=n.target,o.target=a)}s=t.proxy(o.fmt,o);if(s()===!1)return}r=u.title,i=u.content,r=this._getFuncText(r,n),i=this._getFuncText(i,n);if(!r&&!i)return;this._createTooltipEles(e,r,i,u.windowCollisionDetection,u.compass,u.offsetX,u.offsetY)},e.prototype._showAt=function(e,t){var n=this.options,r=this;this._clearTimers(),n.showDelay?this.intentShowTimer=window.setTimeout(function(){r._createTooltip(e,t)},n.showDelay):this._createTooltip(e,t)},e.prototype._show=function(e){var n=t(this.paper.canvas.parentNode).offset(),r=n.left,i=n.top,s=this.options,o=s.relativeTo,u={x:0,y:0},a=null,f=e.target;switch(o){case"mouse":u.x=e.pageX-r,u.y=e.pageY-i;break;case"element":if(!f.raphael||!f.raphaelid)f=f.parentNode;f.raphael&&f.raphaelid&&(a=this.paper.getById(f.raphaelid),u=this._getShowPoint(a,s.compass))}this._showAt(u,e)},e.prototype._bindEvent=function(e){var n=this.options,r=this;switch(n.triggers){case"hover":t(e.node).bind("mouseover.Rtooltip",function(e){r._show(e)}).bind("mouseout.Rtooltip",function(e){n.closeBehavior==="auto"&&r._hide(e)}),n.mouseTrailing&&n.relativeTo==="mouse"&&t(e.node).bind("mousemove.Rtooltip",function(e){r._show(e)});break;case"click":t(e.node).bind("click.Rtooltip",function(e){r._show(e)});break;case"custom":}},e.prototype._bindLiveEvent=function(e){var t,n;if(e)if(e.length)for(t=0,n=e.length;t<n;t++)this._bindEvent(e[t]);else this._bindEvent(e)},e.prototype._bindLiveEventBySelector=function(e){var t=this.options,n=this;if(e)switch(t.triggers){case"hover":e.on("mouseover.Rtooltip",function(e){n._show(e)}).on("mouseout.Rtooltip",function(e){t.closeBehavior==="auto"&&n._hide(e)}),t.mouseTrailing&&t.relativeTo==="mouse"&&e.on("mousemove.Rtooltip",function(e){n._show(e)});break;case"click":e.on("click.Rtooltip",function(e){n._show(e)});break;case"custom":}},e.prototype._unbindLiveEvent=function(e,n){var r,i;if(e)if(e.length)for(r=0,i=e.length;r<i;r++)t(e[r].node).unbind(".Rtooltip");else t(e.node).unbind(".Rtooltip");n&&n.off("Rtooltip").off(".Rtooltip")},e.prototype._destroy=function(){this._unbindLiveEvent(this.targets,this.selector),this._removeTooltip(0)},e.prototype.hide=function(){this._hide()},e.prototype.showAt=function(e,t){this._showAt(e,t)},e.prototype.resetCalloutOffset=function(e){var t=this.options,n=t.calloutOffset,r=t.calloutSide,i=t.calloutAnimation,s=this.tooltipElements;s.callout&&(r==="south"||r==="north"?s.callout.animate({translation:e-n+",0"},i.duration,i.easing):(r==="east"||r==="west")&&s.callout.animate({translation:"0,"+(e-n)},i.duration,i.easing)),t.calloutOffset=e},e.prototype.destroy=function(){this._destroy()},e.prototype.getOptions=function(){return this.options},e.prototype.setTargets=function(e){this.targets=e,this._bindLiveEvent(e)},e.prototype.setSelector=function(e){this.selector=e,this._bindLiveEventBySelector(e)},e.prototype.setOptions=function(e){t.extend(!0,this.options,e)},e.animations={fade:function(e){var t=e.context;e.show?(t.attr({opacity:0}),t.wijAnimate({opacity:1},e.duration,e.easing)):t.wijAnimate({opacity:0},e.duration,e.easing)}},e}();e.ChartTooltip=i,Raphael.fn.tooltip={animations:i.animations};var s=function(e){function s(){e.apply(this,arguments),this.innerState={}}return __extends(s,e),s.prototype._setOption=function(n,r){var i=this,o=i.options,u=null,a=0,f=0,l=o.axis.x.tickMajor.factor,c=o.axis.x.tickMinor.factor,h,p,d,v,m,g=s.prototype.options.axis,y;if(n==="dataSource")i.seriesTransition=!0,o.dataSource=r,i.seriesList&&(o.seriesList=t.arrayClone(i.seriesList)),i._init();else if(n==="data")i.seriesTransition=!0,o.data=r,i.seriesList&&(o.seriesList=t.arrayClone(i.seriesList)),i._init();else if(n==="seriesList"){r||(r=[]),u=t.Event("beforeserieschange");if(i._trigger("beforeSeriesChange",u,{oldSeriesList:o.seriesList,newSeriesList:r})===!1)return!1;o.seriesList=r,i.seriesList=t.arrayClone(r),i._trigger("seriesChanged",null,r),i.seriesTransition=!0,i._init()}else t.isPlainObject(o[n])?(n==="axis"&&(t.isArray(o.axis.y)?d=t.arrayClone(o.axis.y):d=t.extend(!0,{},o.axis.y)),n==="axis"?(t.extend(!0,o.axis.x,r.x||{}),t.isArray(o.axis.y)||t.isArray(r.y)?y={}:y=o.axis.y,t.isArray(r.y)?(t.each(r.y,function(e,n){r.y[e]=t.extend(!0,{},g.y,y,n)}),o.axis.y=r.y):o.axis.y=t.extend(!0,{},g.y,y,r.y)):t.extend(!0,o[n],r),n==="indicator"&&(this._unbindCanvasEvents(),this._bindCanvasEvents()),n==="axis"&&(v=o.axis.y,o.axis.x.tickMajor.factor<0&&(o.axis.x.tickMajor.factor=l),o.axis.x.tickMinor.factor<0&&(o.axis.x.tickMinor.factor=c),t.isArray(v)?(t.isArray(d)||(d=[d]),t.each(v,function(e,t){var n=d[e]||{};n.tickMajor&&n.tickMajor.factor&&t.tickMajor&&t.tickMajor.factor&&t.tickMajor.factor<0&&(t.tickMajor.factor=n.tickMajor.factor),n.tickMinor&&n.tickMinor.factor&&t.tickMinor&&t.tickMinor.factor&&t.tickMinor.factor<0&&(t.tickMinor.factor=n.tickMinor.factor)})):(t.isArray(d)?(h=d[0].tickMajor.factor,p=d[0].tickMinor.factor):(l=d.tickMajor.factor,c=d.tickMinor.factor),o.axis.y.tickMajor&&o.axis.y.tickMajor.factor!==undefined&&o.axis.y.tickMajor.factor<0&&(o.axis.y.tickMajor.factor=h),o.axis.y.tickMinor&&o.axis.y.tickMinor.factor!==undefined&&o.axis.y.tickMinor.factor<0&&(o.axis.y.tickMinor.factor=p)))):e.prototype._setOption.call(this,n,r);n==="disabled"&&i._handleDisabledOption(r,i.chartElement);if(n==="seriesTransition"||n==="animation")return;if(n==="hint"){i._resetTooltip();return}a=o.seriesList.length;if(n==="seriesList"||n==="seriesStyles"||n==="seriesHoverStyles")n!=="seriesList"&&i._handleChartStyles(),i.styles={style:[].concat(o.seriesStyles.slice(0,o.seriesStyles.length)),hoverStyles:[].concat(o.seriesHoverStyles.slice(0,o.seriesHoverStyles.length))},i._initStyles();if(n==="seriesList"||n==="seriesHoverStyles"){m=o.seriesHoverStyles.length;for(f=m;f<a;f++)o.seriesHoverStyles[f]=o.seriesHoverStyles[f%m]}(n==="height"||n==="width")&&i.chartElement[n](r),i.redraw()},s.prototype._preHandleSeriesData=function(){},s.prototype._initStyles=function(){var e=this.options,t=e.seriesStyles,n=e.seriesHoverStyles,r,i,s,o;e.seriesList&&(i=e.seriesList.length||0),e.seriesStyles&&(r=e.seriesStyles.length||0),e.seriesHoverStyles&&(s=e.seriesHoverStyles.length||0);if(i>r&&r)for(o=r;o<i;o++)t[o]=t[o%r];if(i>s&&s)for(o=s;o<i;o++)n[o]=n[o%s]},s.prototype._create=function(){var e=this,n=e.options,r=n.width||e.element.width(),i=n.height||e.element.height(),s=null,o;window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),e.updating=0,e.innerState={},e.axisCompass={},e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.redraw(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijchart"),t.isFunction(window.wijmoASPNetParseOptions)&&window.wijmoASPNetParseOptions(n),e.styles={style:[].concat(n.seriesStyles.slice(0,n.seriesStyles.length)),hoverStyles:[].concat(n.seriesHoverStyles.slice(0,n.seriesHoverStyles.length))},e._initStyles(),n.hint&&typeof n.hint.content=="string"&&window[n.hint.content]&&(n.hint.content=window[n.hint.content]),n.hint&&typeof n.hint.title=="string"&&window[n.hint.title]&&(n.hint.title=window[n.hint.title]),e.headerEles=[],e.footerEles=[],e.legendEles=[],e.axisEles=[],e.legends=[],e.legendIcons=[],e.legendDots=[],e.chartLabelEles=[],e.seriesEles=[];if(e.element.length>0){e.element.is("table")?(e._parseTable(),s=t("<div></div>"),r&&s.css("width",r),i&&s.css("height",i),e.element.after(s),e.chartElement=s):e.chartElement=e.element,e.chartElement.addClass("ui-widget");try{o=Raphael(e.chartElement[0],r,i)}catch(u){var a=e.chartElement.css("display");s=t("<div></div>").insertBefore(e.chartElement).append(e.chartElement),e.chartElement.addClass("ui-helper-hidden-accessible").appendTo(t("body")),a==="none"&&e.chartElement.css("display","block"),o=Raphael(e.chartElement[0],r,i),e.chartElement.appendTo(s).unwrap().removeClass("ui-helper-hidden-accessible"),a==="none"&&e.chartElement.css("display","none")}e.canvas=o,i===0&&n.height!==0&&e.element.height(o.height),n.disabled&&e.disable(),o.customAttributes.rotation=function(e){this.transform("...R"+e)},o.customAttributes.scale=function(e){this.transform("...S"+e)},o.customAttributes.translation=function(e,t){this.transform(Raphael.format("...T{0},{1}",e,t))},e._bindLiveEvents()}},s.prototype._handleChartStyles=function(){this._extendArrayFromBase("seriesStyles"),this._extendArrayFromBase("seriesHoverStyles");var e=this.options,n=this._getDefFill();t.each(e.seriesStyles,function(e,t){t.fill||(t.fill=n[e])})},s.prototype._extendArrayFromBase=function(e){var n=t.extend(!0,{},s.prototype.options[e],this.options[e]),r=[];t.each(n,function(e,t){r.push(t)}),this.options[e]=r},s.prototype._getDefFill=function(){var e=["#00cc00","#0099cc","#0055cc","#2200cc","#8800cc","#d9007e","#ff0000","#ff6600","#ff9900","#ffcc00","#ffff00","#ace600"];return e},s.prototype._getCulture=function(e){return Globalize.findClosestCulture(e||this.options.culture)},s.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},s.prototype._createDisabledDiv=function(e){var n=this,r=n.options,i=e||n.element,s=i.offset(),o=r.width||i.outerWidth(),u=r.height||i.outerHeight(),a;return a=t("<div></div>").css({"z-index":"99999",position:"absolute",width:o,height:u,left:s.left,top:s.top}),Raphael.vml&&a.addClass(r.wijCSS.stateDisabled).css("background-color","#fff"),a},s.prototype._bindData=function(){var e=this,n=e.options,r=n.dataSource,i=n.seriesList,s=n.data,o;t.each(i,function(t,n){var i=n.data,u,a,f,l=n.dataSource||r;l&&i&&(u=i.x,a=i.y,f=i.y1,u&&u.bind?i.x=e._getBindData(l,u.bind):s&&s.x&&s.x.bind&&(o===undefined&&(o=e._getBindData(l,s.x.bind)),i.x=o),a&&a.bind&&(i.y=e._getBindData(l,a.bind)),f&&f.bind&&(i.y1=e._getBindData(l,f.bind)))})},s.prototype._getBindData=function(e,n){if(t.isArray(e)){var r=[];return t.each(e,function(e,t){t&&t[n]!==undefined&&r.push(t[n])}),r}return null},s.prototype._hanldSharedXData=function(){var e=this,n=e.options,r=n.seriesList,i=n.data;i&&t.each(r,function(e,n){var r=n.data;if(r.x===undefined||r.x===null&&t.isArray(i.x))r.x=i.x})},s.prototype._init=function(){var e=this,n=e.options;e.rendered||(e.seriesList=t.arrayClone(n.seriesList)),e._bindData(),e._hanldSharedXData(),t.each(n.seriesList,function(e,r){var i=r.data,s;if(typeof i=="undefined"||i===null)s=t.inArray(r,n.seriesList),n.seriesList.splice(s,1)}),e.rendered||e._paint()},s.prototype.destroy=function(){var n=this,r=n.options;n._unbindLiveEvents(),n._clearChartElement(),n.chartElement.removeClass("ui-widget"),t("."+r.wijCSS.canvasObject,n.chartElement[0]).off(n.widgetName).off("."+n.widgetName),n.element!==n.chartElement&&n.chartElement.remove(),n.element.empty(),n.styles&&(n.styles=null),n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null),e.prototype.destroy.call(this)},s.prototype.getCanvas=function(){return this.canvas},s.prototype.addSeriesPoint=function(e,t,n){var r=this.options.seriesList,i=null,s=null;if(e>=r.length)return;i=r[e],s=i.data||[],s.x.push(t.x),s.y.push(t.y),n&&(s.x.shift(),s.y.shift()),this._setOption("seriesList",r)},s.prototype.beginUpdate=function(){var e=this;e.updating++},s.prototype.endUpdate=function(){var e=this;e.updating--,e.redraw()},s.prototype.redraw=function(e){var t=this,n=t.options,r=0,i=0;if(t.updating>0)return;if(e&&t.rendered)return;r=n.width||t.element.width(),i=n.height||t.element.height();if(r<1||i<1)return;t.canvas.setSize(r,i),t._paint()},s.prototype._parseTable=function(){if(!this.element.is("table"))return;var e=this,n=e.element,r=e.options,i=t("caption",n),s=t("thead th",n),o=[],u=t("tbody tr",n);i.length&&(r.header=t.extend({visible:!0,text:t.trim(t(i[0]).text())},r.header),i.length>1&&(r.footer=t.extend({visibel:!0,text:t.trim(t(i[1]).text())},r.footer))),r.legend=t.extend({visible:!0},r.legend),e._getSeriesFromTR(s,u,o),e.options.seriesList=o},s.prototype._getSeriesFromTR=function(e,n,r){var i=[],s=null,o=null;e.length&&e.each(function(){s=t.trim(t(this).text()),i.push(s)}),n.length&&n.each(function(){var e=t("th",t(this)),n=t.trim(e.text()),s=[],u=t("td",t(this));u.length&&u.each(function(e,n){var r=t(this);s.push(parseFloat(t.trim(r.text())))}),o={label:n,legendEntry:!0,data:{x:i,y:s}},r.push(o)})},s.prototype._destroyRaphaelArray=function(e){if(!e)return;var n=e.length,r=0,i,s;for(;n&&r<n;r++)i=e[r],i&&i[0]&&(s=t(i.node),s.unbind().removeData(),i.wijRemove(),s.remove(),s=null),e[r]=null},s.prototype._clearChartElement=function(){var e=this,n=e.chartElement.data("fields");e._destroyRaphaelArray(e.headerEles),e._destroyRaphaelArray(e.footerEles),e._destroyRaphaelArray(e.legendEles),e._destroyRaphaelArray(e.legends),e._destroyRaphaelArray(e.legendIcons),e._destroyRaphaelArray(e.legendDots),e._destroyRaphaelArray(e.axisEles),e._destroyRaphaelArray(e.chartLabelEles),e.tooltip&&(e.tooltip.destroy(),e.tooltip=null),e.dataPoints=null,e.pointXs=null,n&&n.trackers&&(e._destroyRaphaelArray(n.trackers),n.trackers=null),e.headerEles=[],e.footerEles=[],e.legendEles=[],e.legends=[],e.legendIcons=[],e.legendDots=[],e.axisEles=[],e.chartLabelEles=[],n&&n.chartElements&&(t.each(n.chartElements,function(t,n){e._destroyRaphaelArray(n)}),n.chartElements=null),n&&n.seriesEles&&(n.seriesEles=null),e.seriesEles&&(e.seriesEles=[]),e.canvas.clear(),e.innerState=null,e.axisInfo=null,e.seriesGroup=null,e.lastAxisOffset=null,e.innerState={}},s.prototype._text=function(e,t,n){var r=this.canvas.text(e,t,n);return this.options.disableDefaultTextStyle&&(r.node.style.cssText=""),r},s.prototype._paint=function(){var e=this,t=e.options,n=e.element,r=n.css("display")==="none"||n.css("visibility")==="hidden",i={},s=null;r&&(i=n.css("left"),s=n.css("position"),n.css("left","-10000px"),n.css("position","absolute"),n.show());if(n.is(":hidden")){r&&(n.css("left",i),n.css("position",s),n.hide());return}e._clearChartElement();if(e._trigger("beforePaint")===!1)return;e._preHandleSeriesData(),e.canvasBounds={startX:0,endX:t.width||n.width(),startY:0,endY:t.height||n.height()},e._paintHeader(),e._paintFooter(),e._paintLegend(),e._paintChartArea(),t.indicator&&t.indicator.visible&&this.pointXs&&(this.pointXs=this.pointXs.sort(function(e,t){return e-t})),e._paintTooltip(),e._trigger("painted"),e.rendered=!0,e.styles&&(t.seriesStyles=e.styles.style,t.seriesHoverStyles=e.styles.hoverStyles),r&&(n.css("left",i),n.css("position",s),n.hide())},s.prototype._paintIndicater=function(){},s.prototype._calculatePosition=function(e,t,n){var r={x:0,y:0},i=5,s=5,o=this.canvasBounds;switch(e){case"north":r.x=(o.endX-o.startX)/2,r.y=o.startY+n/2+s,o.startY=o.startY+s*2+n;break;case"south":r.x=(o.endX-o.startX)/2,r.y=o.endY-n/2-s,o.endY=o.endY-s*2-n;break;case"east":r.x=o.endX-t/2-i,r.y=(o.endY-o.startY)/2,o.endX=o.endX-i*2-t;break;case"west":r.x=o.startX+t/2+i,r.y=(o.endY-o.startY)/2,o.startX=o.startX+i*2+t}return r},s.prototype._paintHeader=function(){var e=2,n=this,r=n.options,i=r.header,s=null,o=null,u=null,a=null,f=null,l=null,c=0,h=null;i.text&&i.text.length>0&&i.visible&&(s=i.compass,o=n._text(0,0,i.text),t.wijraphael.addClass(t(o.node),r.wijCSS.headerText),c=n._getRotationByCompass(s),u=t.extend(!0,{},r.textStyle,i.textStyle),o.attr(u),o.transform("...R"+c),a=o.wijGetBBox(),f=n._calculatePosition(s,a.width,a.height),o.transform(Raphael.format("...T{0},{1}",f.x,f.y)),l=o.wijGetBBox(),h=n.canvas.rect(l.x-e,l.y-e,l.width+2*e,l.height+2*e),t.wijraphael.addClass(t(h.node),r.wijCSS.headerContainer),h.attr(i.style),h.toBack(),n.headerEles.push(o),n.headerEles.push(h))},s.prototype._paintFooter=function(){var e=2,n=this,r=n.options,i=r.footer,s=null,o=null,u=null,a=null,f=null,l=null,c=0,h=null;i.text&&i.text.length>0&&i.visible&&(s=i.compass,o=n._text(0,0,i.text),t.wijraphael.addClass(t(o.node),r.wijCSS.footerText),c=n._getRotationByCompass(s),u=t.extend(!0,{},r.textStyle,i.textStyle),o.attr(u),o.transform("...R"+c),a=o.wijGetBBox(),f=n._calculatePosition(s,a.width,a.height),o.transform(Raphael.format("...T{0},{1}",f.x,f.y)),l=o.wijGetBBox(),h=n.canvas.rect(l.x-e,l.y-e,l.width+2*e,l.height+2*e),t.wijraphael.addClass(t(h.node),r.wijCSS.footerContainer),h.attr(i.style),h.toBack(),n.footerEles.push(o),n.footerEles.push(h))},s.prototype._getRotationByCompass=function(e){var t=0;return e==="east"?t=90:e==="west"&&(t=-90),t},s.prototype._paintLegendIcon=function(e,n,r,i,s,o,u,a,f,l){var c=this,h=c.canvas.rect(e,n,r,i);return t(h.node).data("legendIndex",o).data("index",u),c.legendIcons.push(h),s&&h.attr(s),t.wijraphael.addClass(t(h.node),a),h},s.prototype._paintLegend=function(){if(!this.options.legend.visible)return;var e=this,n=e.options,r=t.extend(!0,{size:{width:22,height:10}},n.legend),i=2,s=n.seriesStyles,o=[].concat(n.seriesList),u=r.compass,a=r.orientation,f,l,c,h,p=e.canvasBounds,d=p.endX-p.startX,v=p.endY-p.startY,m=r.size.width,g=r.size.height,y,b=0,w=0,E=0,S=0,x=0,T=0,N=1,C=0,k=0,L=0,A=0,O=0,M,_,D,P,H=[],B=0,j=0,F=0,I=[];r.text&&r.text.length&&(f=e._text(0,0,r.text),t.wijraphael.addClass(t(f.node),n.wijCSS.legendTitle),l=t.extend(!0,{},n.textStyle,r.textStyle,r.titleStyle),f.attr(l),e.legendEles.push(f)),r.reversed&&(o=o.reverse()),F=o.length,e.widgetName==="wijcompositechart"&&(F=0,t.each(o,function(e,t){t.type==="pie"?F+=t.data.length:F++})),t.each(o,function(i,o){function u(i){var o=r.reversed?F-1-B:B,u=s[o],a=t.extend(!0,{fill:"none",opacity:1,stroke:"black"},u),f,l,c,h=!1,p=i.type,d;i.legendEntry&&i.display!=="exclude"&&(l=t.extend(!0,{},n.textStyle,r.textStyle),r.textWidth?f=e.canvas.wrapText(0,0,i.label,r.textWidth,"far",l):(f=e._text(0,0,i.label),f.attr(l)),t.wijraphael.addClass(t(f.node),n.wijCSS.legendText+" "+n.wijCSS.legend),e.legends.push(f),c=t.extend(a,{"stroke-width":1}),H.push(c),I.push(i),e.widgetName==="wijcompositechart"?h=p==="line"||p==="spline"||p==="bezier"||p==="area":h=e.widgetName==="wijlinechart",r.textWidth?t.each(f,function(e,r){i.visible===!1&&!h&&(t(r.node).data("hidden",!0).data("textOpacity",r.attr("opacity")||1),r.attr("opacity",.3)),t.wijraphael.addClass(t(r.node),n.wijCSS.legendText+" "+n.wijCSS.legend),t(r.node).data("legendIndex",j).data("index",B)}):(i.visible===!1&&!h&&(t(f.node).data("hidden",!0).data("textOpacity",f.attr("opacity")||1),f.attr("opacity",.3)),t.wijraphael.addClass(t(f.node),n.wijCSS.legendText+" "+n.wijCSS.legend),t(f.node).data("legendIndex",j).data("index",B)),j++),B++}o=t.extend(!0,{legendEntry:!0,display:"show"},o);if(o.type==="pie"&&o.legendEntry)t.each(o.data,function(e,n){n=t.extend({legendEntry:o.legendEntry},n),u(n)});else if(e._isPieChart())u(o);else if(e._isStockChart()&&e._validateSeriesData(o))u(o);else{if(o.data.x===undefined&&o.data.xy===undefined||o.data.xy===undefined&&o.data.y===undefined)return!0;u(o)}}),c=e.legends.length,h=r.textMargin,f&&(y=f.wijGetBBox(),b=y.height,w=y.width),t.each(e.legends,function(e,t){var n=t.wijGetBBox();n.width>E&&(E=n.width),n.height>S&&(S=n.height)});if(u==="east"||u==="west")a==="horizontal"?(x=c*(E+m+i)+c*(h.left+h.right),x>d/2?(N=Math.floor(d/2/E),N<1&&(N=1)):N=c):a==="vertical"&&(T=S*c+b+c*(h.top+h.bottom),T>v?N=Math.ceil(T/v):N=1);else if(u==="south"||u==="north")a==="horizontal"?(x=(E+m+i)*c+c*(h.left+h.right),x>d?(N=Math.floor(c/x*d),N<1&&(N=1)):N=c):a==="vertical"&&(T=S*c+b+c*(h.top+h.bottom),T>v/2?(C=Math.floor(v-b)/2/S,N=Math.ceil(c/C)):N=1);N===0&&(N=1),k=N*(E+m+i)+N*(h.left+h.right),L=S*Math.ceil(c/N)+b+Math.ceil(c/N)*(h.top+h.bottom),k=k>w?k:w,M=e._calculatePosition(u,k,L),_=M.x-k/2,D=M.y-L/2,P=e.canvas.rect(_-i,D-i,k+2*i,L+2*i),t.wijraphael.addClass(t(P.node),n.wijCSS.legendContainer),P.attr(r.style),P.toBack(),e.legendEles.push(P),f&&f.transform(Raphael.format("...T{0},{1}",_+k/2,D+b/2)),A=b,t.each(e.legends,function(s,o){d=H[s];var u=o.wijGetBBox(),a,f=d["stroke-width"]||0,l=_+O*(m+f*2+E+i)+(O+1)*h.left+O*h.right,c=D+A+u.height/2+h.top+S/2-u.height/2,p=c-g/2-f,d,v,y=o;r.textWidth&&(y=o[0]),a=e._paintLegendIcon(l,p,m,g,d,t(y.node).data("legendIndex"),t(y.node).data("index"),n.wijCSS.legendIcon+" "+n.wijCSS.legend,I[t(y.node).data("legendIndex")],y),t(y.node).data("hidden")===!0&&(t(y.node).data("iconOpacity",a.attr("opacity")||1),a.attr("opacity",.3)),r.textStyle["text-anchor"]==="start"&&(l-=u.width/2),r.textWidth?o.transform(Raphael.format("...T{0},{1}",l+m+i,c-u.height/2)):o.transform(Raphael.format("...T{0},{1}",l+m+i+u.width/2,c)),Raphael.vml&&(v=e.canvas.rect(l+m+i,c-u.height/2,u.width,u.height).attr({stroke:"none",fill:"#000000",opacity:.01}),t.wijraphael.addClass(t(v.node),n.wijCSS.legendTextCover+" "+n.wijCSS.legend),t(v.node).data("legendIndex",t(y.node).data("legendIndex")),t(v.node).data("index",t(y.node).data("index")),e.legendEles.push(v)),o.toFront(),O++,O===N&&(O=0,A+=S+h.top+h.bottom)})},s.prototype._getLegendStyle=function(e){return e},s.prototype._hasAxes=function(){return this.widgetName==="wijpiechart"?!1:!0},s.prototype._applyAxisText=function(e,n){var r=this,i=e.text,s=null,o=null,u=null,a=0,f=0,l=n.bounds||r.canvasBounds;if(i!==null&&i!==undefined&&i.length>0){o=r._text(-100,-100,i),u=t.extend(!0,{},r.options.textStyle,e.textStyle),o.attr(u),s=o.wijGetBBox(),u["margin-left"]&&(f+=parseFloat(u["margin-left"])),u["margin-top"]&&(a+=parseFloat(u["margin-top"])),u["margin-right"]&&(f+=parseFloat(u["margin-right"])),u["margin-bottom"]&&(a+=parseFloat(u["margin-bottom"]));switch(e.compass){case"north":l.startY+=s.height+a;break;case"south":l.endY-=s.height+a;break;case"east":l.endX-=s.height+f;break;case"west":l.startX+=s.height+f}o.wijRemove(),o=null}return s},s.prototype._isSeriesDataEmpty=function(){var e=this,n=e.options.seriesList;return!n||n.length===0?!0:(t.each(n,function(e,t){if(!t.data||(!t.data.x||!t.data.y)&&!t.data.xy)return!0}),!1)},s.prototype._setTooltipContent=function(e){var n=this,r,i,s,o=n.tooltip,u,a={},f=n.options.hint,l=t.isFunction;o&&(r=[],t.each(e,function(e,n){var i=n.valX,s=n.valY;i&&s?r.push(t.extend({},n,{x:i,y:s})):r.push(n)}),u=o.getOptions(),i=f.title,s=f.content,l(i)&&(a.title=function(){return i.call(r)}),l(s)&&(a.content=function(){return s.call(r)}),o.setOptions(a))},s.prototype._setTooltip=function(){var e=this,t=e.options,n=e.tooltip,r;n&&(r={closeBehavior:"none",style:{stroke:t.indicator.style.stroke},animated:!1,showDelay:0,hideDelay:0,windowCollisionDetection:"fit",beforeShowing:function(t,n){if(this.target&&e.indicatorLine)return!1}},t.horizontal&&(r.compass="east"),n.setOptions(r))},s.prototype._resetTooltip=function(){var e=this,n=e.options,r=n.hint,i=r.title,s=r.content,o=e.tooltip,u=t.isFunction,a=t.extend(!0,{},this.options.hint);o&&(a.animated=r.animated,a.showDelay=r.showDelay,a.hideDelay=r.hideDelay,a.title=r.title,a.content=r.content,a.closeBehavior=r.closeBehavior||"auto",a.windowCollisionDetection="fit",u(i)&&(a.title=function(){return e._getTooltipText(i,this.target)}),u(s)&&(a.content=function(){return e._getTooltipText(s,this.target)}),a.beforeShowing=function(){e._onBeforeTooltipShowing(this)},o.setOptions(a))},s.prototype._fotmatTooltip=function(e){var t=this;return t._isDate(e)?Globalize.format(e,"f",t._getCulture()):isNaN(e)?e:Globalize.format(parseFloat(e),"n",t._getCulture())},s.prototype._paintTooltip=function(){var e=this,n=e.options,r=n.hint,s=!n.disabled&&r.enable,o=r,u,a,f=t.isFunction;s&&!e.tooltip&&(o=t.extend(!0,{},r,{}),u=r.title,a=r.content,a||(a=r.content=function(){var n;if(t.isArray(this)){var r="";return t.each(this,function(t,i){n=i.label,i.lineSeries&&i.lineSeries.label&&(n=i.lineSeries.label),r+=n+":"+e._fotmatTooltip(i.y)+"\n"}),r}return n=this.label,this.lineSeries&&this.lineSeries.label&&(n=this.lineSeries.label),n+":"+e._fotmatTooltip(this.y)}),f(u)&&(o.title=function(){return e._getTooltipText(u,this.target)}),f(a)&&(o.content=function(){return e._getTooltipText(a,this.target)}),o.beforeShowing=function(){e._onBeforeTooltipShowing(this)},e.tooltip=new i(e.canvas,null,o))},s.prototype._getTooltipText=function(e,n){var r=t(n.node).data("wijchartDataObj"),i={data:r,label:r.label,x:r.x,y:r.y,target:n,fmt:e};return t.proxy(e,i)()},s.prototype._onBeforeTooltipShowing=function(e){var t=e.target,n=this.options.hint.style;t&&(e.options.style.stroke=n.stroke||t.attrs.stroke||t.attrs.fill)},s.prototype._paintChartArea=function(){var e=this,n=e.options,r=n.axis,i=2,s=null,o=null,u={},a=5,f=0,l=0,c=t.isArray(r.y),h=0,p,d,v;e._applyMargins(),e.isMultiYAxis=c;if(e._isSeriesDataEmpty())return;c&&t.each(r.y,function(e,n){r.y[e]=t.extend(!0,{alignment:"center",style:{stroke:"#999999","stroke-width":.5},visible:!1,textVisible:!0,text:"",textStyle:{fill:"#888","font-size":15,"font-weight":"bold"},labels:{style:{fill:"#333","font-size":11},textAlign:"center",width:null},compass:"west",autoMin:!0,autoMax:!0,min:null,max:null,origin:null,autoMajor:!0,autoMinor:!0,unitMajor:null,unitMinor:null,gridMajor:{visible:!0,style:{stroke:"#999999","stroke-width":"0.5","stroke-dasharray":"none"}},gridMinor:{visible:!1,style:{stroke:"#CACACA","stroke-dasharray":"- "}},tickMajor:{position:"none",style:{fill:"black"},factor:1},tickMinor:{position:"none",style:{fill:"black"},factor:1},annoMethod:"values",annoFormatString:"",valueLabels:[]},n)});if(e._hasAxes()){if(e.innerState.axisInfo)e.axisInfo=e.innerState.axisInfo,e.canvasBounds=e.innerState.canvasBounds;else{s=e._applyAxisText(r.x,{}),e.axisInfo={x:{id:"x",tprec:0,isTime:!1,offset:0,vOffset:0,max:0,min:0,majorTickRect:null,minorTickRect:null,annoFormatString:null,textBounds:s,axisTextOffset:i,autoMax:!0,autoMin:!0,autoMajor:!0,autoMinor:!0,annoMethod:r.x.annoMethod,valueLabels:r.x.valueLabels||[]},y:{}},e.axisCompass[r.x.compass]=!0,c?t.each(r.y,function(t,n){o=e._applyAxisText(n,{}),e.axisInfo.y[t.toString()]={id:"y"+t,tprec:0,isTime:!1,offset:0,vOffset:0,max:0,min:0,majorTickRect:null,minorTickRect:null,annoFormatString:null,textBounds:o,axisTextOffset:i,autoMax:!0,autoMin:!0,autoMajor:!0,autoMinor:!0,annoMethod:n.annoMethod,valueLabels:n.valueLabels||[]},e.axisCompass[n.compass]||(e.axisCompass[n.compass]=!0)}):(o=e._applyAxisText(r.y,{}),e.axisInfo.y[0]={id:"y",tprec:0,isTime:!1,offset:0,vOffset:0,max:0,min:0,majorTickRect:null,minorTickRect:null,annoFormatString:null,textBounds:o,axisTextOffset:i,autoMax:!0,autoMin:!0,autoMajor:!0,autoMinor:!0,annoMethod:r.y.annoMethod,valueLabels:r.y.valueLabels||[]},e.axisCompass[r.y.compass]||(e.axisCompass[r.y.compass]=!0)),e._getSeriesGroup(c),u=e._getDataExtreme(c),r.x.autoMin&&e.axisInfo.x.autoMin?r.x.min=u.txn:r.x.min&&e._isDate(r.x.min)&&(r.x.min=t.toOADate(r.x.min)),r.x.autoMax&&e.axisInfo.x.autoMax?r.x.max=u.txx:r.x.max&&e._isDate(r.x.max)&&(r.x.max=t.toOADate(r.x.max)),t.each(u.y,function(e,t){h++});for(p=0;p<(r.y.length||1);p++){d=r.y[p]||r.y,v=p.toString(),d.autoMin&&e.axisInfo.y[v].autoMin&&u.y[v]?d.min=u.y[v].tyn:d.min&&e._isDate(d.min)&&(d.min=t.toOADate(d.min)),d.autoMax&&e.axisInfo.y[v].autoMax&&u.y[v]?d.max=u.y[v].tyx||0:d.max&&e._isDate(d.max)&&(d.max=t.toOADate(d.max));do{l=e._autoPosition(e.axisInfo,r,"y",v),f=e._autoPosition(e.axisInfo,r,"x",v);if(l===e.axisInfo.y[v].offset&&f===e.axisInfo.x.offset){a=0;break}!isNaN(f)&&!isNaN(l)&&(l!==e.axisInfo.y[v].offset&&l!==0&&(e.axisInfo.y[v].offset=l,e.axisInfo.y[v].vOffset=f),f!==e.axisInfo.x.offset&&f!==0&&(e.axisInfo.x.offset=f,e.axisInfo.x.vOffset=l)),a--}while(a>0)}e._adjustPlotArea(r.x,e.axisInfo.x),e._adjustPlotArea(r.y,e.axisInfo.y,!0),e.innerState.axisInfo=e.axisInfo,e.innerState.canvasBounds=e.canvasBounds}e._paintAxes(),e._paintPlotArea()}else e._paintPlotArea()},s.prototype._getSeriesGroup=function(e){var n=this,r=n.options,i={};t.each(r.seriesList,function(t,n){n.yAxis&&e?i[n.yAxis.toString()]?i[n.yAxis.toString()].push(n):i[n.yAxis.toString()]=[n]:i[0]?i[0].push(n):i[0]=[n]}),n.seriesGroup=i},s.prototype._adjustPlotArea=function(e,n,r){var i=this.canvasBounds,s,o={east:Number.MIN_VALUE,west:Number.MIN_VALUE,south:Number.MIN_VALUE,north:Number.MIN_VALUE};if(r)t.each(n,function(e,t){s=e}),t.each(n,function(t,n){var r=e[t]||e,i=r.compass;r.max=n.max,r.min=n.min;switch(i){case"north":o.north=Math.max(n.offset,o.north);break;case"south":o.south=Math.max(n.offset,o.south);break;case"east":o.east=Math.max(n.offset,o.east);break;case"west":o.west=Math.max(n.offset,o.west)}}),o.north!==Number.MIN_VALUE&&(i.startY+=o.north),o.south!==Number.MIN_VALUE&&(i.endY-=o.south),o.east!==Number.MIN_VALUE&&(i.endX-=o.east),o.west!==Number.MIN_VALUE&&(i.startX+=o.west);else{e.max=n.max,e.min=n.min;switch(e.compass){case"north":i.startY+=n.offset;break;case"south":i.endY-=n.offset;break;case"east":i.endX-=n.offset;break;case"west":i.startX+=n.offset}}},s.prototype._autoPosition=function(e,t,n,r){return this._autoPositionCartesianAxis(e,t,n,r)},s.prototype._autoPositionCartesianAxis=function(e,n,r,i){var s=this,o=null,u,a,f,l,c,h,p,d,v=s.lastAxisOffset||{},m,g;r==="y"?(u=e.y[i],a=n.y[i]||n.y,l=n.x,f=e.x):(u=e.x,a=n.x,f=e.y[i],l=n.y[i]||n.y),c=a.compass,h=l.origin,p=f.max,d=f.min,h!==null&&s._isDate(h)&&(h=t.toOADate(h)),s._calculateParameters(u,a),o=s._getMaxExtents(u,a);switch(c){case"north":case"south":m=o.height,u.maxExtent=m;break;case"east":case"west":m=o.width,u.maxExtent=m}return r==="y"&&v[c]&&(t.each(v[c],function(e,t){e!==i&&(g=t)}),g&&!u.isPartAxis&&(u.preStartOffset=g,m+=g)),r==="y"&&(v[c]===undefined&&(v[c]={}),v[c][i]=m+s._getAxisLabelBox(a).width,s.lastAxisOffset=v),m},s.prototype._getAxisLabelBox=function(e){var n=this,r=n.options,i=e.text,s=0,o=0,u=0,a=0,f,l,c=n._isVertical(e.compass),h=t.extend(!0,{},r.textStyle,e.textStyle);return h["margin-top"]&&(s=parseFloat(h["margin-top"])),h["margin-left"]&&(u=parseFloat(h["margin-left"])),h["margin-right"]&&(o=parseFloat(h["margin-right"])),h["margin-bottom"]&&(a=parseFloat(h["margin-bottom"])),f=n._text(0,0,i),f.attr(h),c&&f.transform("...R-90"),l=f.wijGetBBox(),f.wijRemove(),f=null,{width:l.width+u+o,height:l.height+a+s}},s.prototype._getMaxExtents=function(e,n,r){var i=this,s=i.options,o=null,u={width:0,height:0},a=e.min,f=e.max,l=e.isTime,c=n.annoFormatString,h=s.is100Percent,p=0,d=n.compass,v=n.labels,m,g=!1,y=e.bounds||i.canvasBounds,b,w;e.majorTickRect=i._getTickRect(e,n,!0,!0,r),e.minorTickRect=i._getTickRect(e,n,!1,!0,r),o=i._getMajorTickValues(e,n);if(!n.textVisible)return u;if(!c||c.length===0)c=e.annoFormatString;return m=t.extend(!0,{},s.textStyle,n.textStyle,v.style),w=m.transform,w&&w.length&&t.each(w,function(e,t){if(t[0].toLowerCase()==="r")return g=!0,!1}),m=t.extend(!0,m,e.textStyle),b=y.endX-y.startX-e.vOffset-e.axisTextOffset,o&&o.length&&(b/=o.length-1,t.each(o,function(n,r){var s,o,y;if(r<a||r>f)return!0;if(e.annoMethod==="valueLabels"){if(r<0)return!0;if(p>=e.valueLabels.length)return!1;r=e.valueLabels[p],r.text?r=r.text:typeof r.value!="undefined"&&(r=r.value,c&&c.length&&(r=Globalize.format(r,c,i._getCulture())))}else e.annoMethod==="values"&&(c&&c.length?(l&&(r=t.fromOADate(r)),r=Globalize.format(r,c,i._getCulture())):h&&e.id==="y"&&(r=Globalize.format(r,"p0",i._getCulture())));v.width?s=i.canvas.wrapText(-100,-100,r,v.width,v.textAlign,m):s=i._text(-100,-100,r).attr(m),o=s.wijGetBBox(),!i._isVertical(d)&&!g&&e.annoMethod==="valueLabels"&&o.width>b&&(s.attr({transform:"r-45"}),o=s.wijGetBBox(),n===0&&(m.transform="r-45",e.textStyle={transform:"r-45"},y=s.clone(),y.attr({transform:"r0"}),o=y.wijGetBBox(),Math.sqrt(2)*o.height>b&&(s.attr({transform:"r-90"}),m.transform="r-90",e.textStyle={transform:"r-90"}),y.wijRemove(),y=null,o=s.wijGetBBox())),s.wijRemove(),s=null,o.width>u.width&&(u.width=o.width),o.height>u.height&&(u.height=o.height),p++})),u.width<v.width&&(u.width=v.width),e.labelWidth=u.width,u},s.prototype._getMajorTickValues=function(e,n){var r=[],i=e.valueLabels;return i&&i.length>0&&t.each(i,function(e,t){if(typeof t.text!="undefined"||typeof t.value!="undefined")return!1;typeof t=="string"?i[e]={text:t,gridLine:!1}:i[e]={value:t,gridLine:!1}}),e.annoMethod==="valueLabels"&&i&&i.length>0&&typeof i[0].value!="undefined"?(r=this._getSortedDataValues(e,n),r):(r=this._getTickValues(e.max,e.min,n.unitMajor,e.tprec,!e.isTime,n.autoMajor),r)},s.prototype._getSortedDataValues=function(e,n){var r=this,i=[],s=e.valueLabels;return t.each(s,function(e,n){var s=n.value;r._isDate(s)?i.push(t.toOADate(s)):typeof s=="number"?i.push(s):i.push(e)}),i},s.prototype._getMinorTickValues=function(e,t){var n=[];return n=this._getTickValues(e.max,e.min,t.unitMinor,e.tprec,!e.isTime,t.autoMinor),n},s.prototype._getTickValues=function(e,n,i,s,o,u){var a=this,f=[],l=n,c=0,h=0,p=0,d=0,v=0,m=0;try{if(i===0)f=[e,n];else{u?(s+1<0?s=-1:s+1>15&&(s=14),m=t.round(r.signedCeiling(n/i)*i,s+1),m<e&&(n=m),p=parseInt(t.round(e/i,5).toString(),10),d=parseInt(t.round(n/i,5).toString(),10),v=parseInt((p-d+1).toString(),10),v>1&&(h=d*i,h<n&&(v--,n+=i),h=n+(v-1)*i,h>e&&v--),v<1&&(v=2,n=l,i=e-n)):(v=parseInt(((e-n)/i+1).toString(),10),v>1&&(h=n+(v-1)*i,h>e&&v--),v<1&&(v=2,i=e-n));for(c=0;c<v;c++)o?u?f[c]=t.round(n+c*i,s+1):f[c]=n+c*i:f[c]=n+c*i}}catch(g){}return f},s.prototype._getTickRect=function(e,t,n,r,i){var s=t.compass,o=0,u=null,a=3,f=2,l=2,c=t.tickMajor.factor,h=t.tickMinor.factor,p={x:0,y:0,width:0,height:0};n?(u=t.tickMajor.position,c=c>0?c:1,o=a*c):(u=t.tickMinor.position,h=h>0?h:1,o=f*h);if(u==="none"||u==="inside"&&r)o=0;return s==="east"||s==="west"?(p={x:0,y:-1,width:o*l,height:l},s==="east"&&(u==="outside"||u==="cross"&&r)||s==="west"&&u==="inside"?p.width+=2:r||(u==="cross"&&(p.width<<=1),p.width+=2)):(p={x:-1,y:0,width:l,height:o*l},s==="south"&&(u==="outside"||u==="corss"&&r)||s==="north"&&u==="inside"?p.height+=2:r||(u==="cross"&&(p.height<<=1),p.height+=2)),p},s.prototype._applyMargins=function(){var e=this,t=e.options,n=e.canvasBounds;n.startX+=t.marginLeft,n.endX-=t.marginRight,n.startY+=t.marginTop,n.endY-=t.marginBottom},s.prototype._paintAxes=function(){var e=this,n=e.options.axis,r=e.axisInfo,i=n.x,s=n.y,o=r.x,u=r.y,a;a=e._paintAxis(i,o),t.each(u,function(t,n){var r=s[t]||s;r.origin!==null&&e._translateAxisIfNeeded(a,i.compass,r.origin,r.compass,n.max,n.min)}),t.each(u,function(t,n){var r=s[t]||s;a=e._paintAxis(r,n),i.origin!==null&&e._translateAxisIfNeeded(a,r.compass,i.origin,i.compass,o.max,o.min)})},s.prototype._translateAxisIfNeeded=function(e,n,r,i,s,o){var u=this,a=i==="west"||i==="east",f=u.canvasBounds,l=r,c;u._isDate(l)&&(l=t.toOADate(l)),a?(n==="south"?c=(o-l)/(s-o)*(f.endY-f.startY):c=(s-l)/(s-o)*(f.endY-f.startY),t.each(e,function(e,t){t.transform(Raphael.format("...T{0},{1}",0,c))})):(n==="west"?c=(l-o)/(s-o)*(f.endX-f.startX):c=(l-s)/(s-o)*(f.endX-f.startX),t.each(e,function(e,t){t.transform(Raphael.format("...T{0},{1}",c,0))}))},s.prototype._paintAxis=function(e,n){var r=this,i=r.options,s=n.bounds||r.canvasBounds,o={x:0,y:0},u={x:0,y:0},a=e.compass,f=2,l=!0,c=null,h=[],p=[],d=[],v=n.max,m=n.min,g=e.unitMajor,y=e.unitMinor,b=e.tickMajor.position,w=e.tickMinor.position,E=n.maxExtent,S=e.tickMajor.style,x=e.tickMinor.style,T=n.majorTickRect,N=n.minorTickRect,C=n.axisTextOffset,k=e.gridMajor,L=e.gridMinor,A=e.labels,O=0,M=[],_=0,D=e.annoFormatString,P=null,H=[];T=r._getTickRect(n,e,!0,!1),N=r._getTickRect(n,e,!1,!1);if(!D||D.length===0)D=n.annoFormatString;h=r._getMajorTickValues(n,e),p=r._getMinorTickValues(n,e),d=r._resetMinorTickValues(p,h);switch(a){case"south":o.x=s.startX,o.y=s.endY,u.x=s.endX,u.y=s.endY,l=!1;break;case"north":o.x=s.startX,o.y=s.startY-f,u.x=s.endX,u.y=s.startY-f,l=!1;break;case"east":o.x=s.endX-f,n.preStartOffset&&(o.x+=n.preStartOffset),o.y=s.endY,u.x=s.endX-f,u.y=s.startY;break;case"west":o.x=s.startX,n.preStartOffset&&(o.x-=n.preStartOffset),o.y=s.endY,u.x=s.startX,u.y=s.startY}return e.visible&&(c=r.canvas.line(o.x,o.y,u.x,u.y).attr(e.style),t.wijraphael.addClass(t(c.node),i.wijCSS.axis),r.axisEles.push(c),H.push(c)),t.each(h,function(s,f){var l=f,c=n.isTime,h=i.is100Percent,p,d,y=!1,w={};if(f<m||f>v)return _++,!0;if(n.annoMethod==="valueLabels"){if(_>=n.valueLabels.length)return!1;l=n.valueLabels[_],y=l.gridLine,w=l.gridLineStyle,l.text?l=l.text:typeof l.value!="undefined"&&(l=l.value,D&&D.length&&(l=Globalize.format(l,D,r._getCulture())))}else n.annoMethod==="values"&&(D&&D.length?(c&&(l=t.fromOADate(f)),l=Globalize.format(l,D,r._getCulture())):h&&n.id==="y"&&(l=Globalize.format(f,"p0",r._getCulture())));P=t.extend(!0,{},i.textStyle,e.textStyle,A.style,n.textStyle),n.id==="x"&&(l=r._getTickText(l)),p=r._paintMajorMinor(e.origin,v,m,f,b,g,T,a,o,u,E,C,S,l,k,e.textVisible,P,A.textAlign,A.width?n.labelWidth:null,y,w),p&&(p.elements&&(H=H.concat(p.elements)),d=p.textInfo),d&&(M.push(d),O<d.len&&(O=d.len)),_++}),A.width||t.each(M,function(e,t){var n=t.text,r=(t.len-O)/2;r=A.textAlign==="near"?r*-1:r,l?n.transform(Raphael.format("...T{0},{1}",r,0)):n.transform(Raphael.format("...T{0},{1}",0,r))}),t.each(d,function(t,i){var s;i>m&&i<v&&(s=r._paintMajorMinor(e.origin,v,m,i,w,y,N,a,o,u,E,C,x,null,L,e.textVisible,P,A.textAlign,A.width?n.labelWidth:null),s&&s.elements&&(H=H.concat(s.elements)))}),e.text&&e.text.length>0&&H.push(r._paintAxisText(e,n)),n.isPartAxis&&!n.isLastAxis&&H.push(r.canvas.path(["M",o.x.toString(),o.y.toString()+(n.vOffset/2).toString,"H",(o.x+n.maxExtent*2).toString()].join())),H},s.prototype._paintAxisText=function(e,n){if(!e.text||e.text.length===0)return;var r=this,i=r.options,s=e.text,o=e.compass,u=e.alignment,a=n.bounds||r.canvasBounds,f=a.startX,l=a.startY,c=a.endX,h=a.endY,p=f,d=l,v=n.textBounds,m=r._isVertical(o),g=n.axisTextOffset,y=n.majorTickRect,b=e.tickMajor.position,w=m?y.width:y.height,E=null,S=null,x=0,T=0,N=0,C=0;E=t.extend(!0,{},r.options.textStyle,e.textStyle),E["margin-top"]&&(x=parseFloat(E["margin-top"])),E["margin-left"]&&(T=parseFloat(E["margin-left"])),E["margin-right"]&&(N=parseFloat(E["margin-right"])),E["margin-bottom"]&&(C=parseFloat(E["margin-bottom"])),b==="cross"?w/=2:b==="inside"&&(w=0);if(m){switch(u){case"near":d=h-v.width/2;break;case"center":d=(l+h)/2;break;case"far":d=l+v.width/2}o==="west"?p=f-(n.offset+g+w+v.height/2+N):p=c+n.offset+g+w+v.height/2+T}else{switch(u){case"near":p=f+v.width/2;break;case"center":p=(f+c)/2;break;case"far":p=c-v.width/2}o==="north"?d=l-(n.offset+g+w+v.height/2+C):d=h+n.offset+g+w+v.height/2+x}return S=r._text(p,d,s),t.wijraphael.addClass(t(S.node),i.wijCSS.axisText),r.axisEles.push(S),S.attr(E),m&&S.transform("...R-90"),S},s.prototype._resetMinorTickValues=function(e,t){var n=0,r=0,i=null,s=null;for(n=e.length-1;n>=0;n--){i=e[n];for(r=t.length-1;r>=0;r--)s=t[r],i===s&&e.splice(n,1)}return e},s.prototype._getTickText=function(e){return e},s.prototype._paintMajorMinor=function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E){var S=this,x=f.x,T=f.y,N=S.options,C=-1,k=-1,L=!0,A=S.canvasBounds,O=null,M=null,_=[],D=[],P=null,H={"stroke-width":2},B={text:null,len:0},j=null,F={},I=[],q=S.axisCompass;switch(a){case"south":s==="inside"?T-=u.height:s==="cross"&&(T-=u.height/2),b?k=T+h+u.height:k=T+h+u.height+c/2,L=!1;break;case"west":s==="outside"?x-=u.width:s==="cross"&&(x-=u.width/2),b?C=x-(h+c):C=x-(h+c/2);break;case"north":s==="outside"?T-=u.height:s==="cross"&&(T-=u.height/2),b?k=T-(h+c):k=T-(h+c/2),L=!1;break;case"east":s==="inside"?x-=u.width:s==="cross"&&(x-=u.width/2),b?C=x+h+u.width:C=x+h+u.width+c/2}return L?(T+=(i-r)/(n-r)*(l.y-f.y),D=["M",A.startX,T,"H",A.endX],v.visible&&((T!==A.startY||!q.north)&&(T!==A.endY||!q.south)||e!==i)&&(P=S.canvas.path(D.join(" ")),t.wijraphael.addClass(t(P.node),N.wijCSS.axisGridLine),P.attr(v.style),S.axisEles.push(P)),w&&((T!==A.startY||!q.north)&&(T!==A.endY||!q.south)||e!==i)&&(P=S.canvas.path(D.join(" ")),t.wijraphael.addClass(t(P.node),N.wijCSS.axisGridLine),P.attr(t.extend(!0,v.style,E)),S.axisEles.push(P)),k=T,s!=="none"&&(_=["M",x,T,"h",u.width],p["stroke-width"]=u.height)):(x+=(i-r)/(n-r)*(l.x-f.x),D=["M",x,A.startY,"V",A.endY],v.visible&&((x!==A.startX||!q.west)&&(x!==A.endX||!q.east)||e!==i)&&(P=S.canvas.path(D.join(" ")),t.wijraphael.addClass(t(P.node),N.wijCSS.axisGridLine),P.attr(v.style),S.axisEles.push(P)),w&&((x!==A.startX||!q.west)&&(x!==A.endX||!q.east)||e!==i)&&(P=S.canvas.path(D.join(" ")),t.wijraphael.addClass(t(P.node),N.wijCSS.axisGridLine),P.attr(t.extend(!0,{},v.style,E)),S.axisEles.push(P)),b?C=x-b/2:C=x,s!=="none"&&(_=["M",x,T,"v",u.height],p["stroke-width"]=u.width)),s!=="none"&&(M=S.canvas.path(_.join(" ")),t.wijraphael.addClass(t(M.node),N.wijCSS.axisTick),H=t.extend(H,p),M.attr(H),S.axisEles.push(M),I.push(M)),d!==null&&m&&(b?(B=S.canvas.wrapText(C,k,d.toString(),b,y,g),t.wijraphael.addClass(t(B.node),N.wijCSS.axisLabel)):(B=S._text(C,k,d.toString()),t.wijraphael.addClass(t(B.node),N.wijCSS.axisLabel),B.attr(g)),S.axisEles.push(B),I.push(B),m||B.hide(),y!=="center"&&(j=B.getBBox(),O={text:B,len:L?j.width:j.height})),F={textInfo:O,elements:I},F},s.prototype._paintPlotArea=function(){},s.prototype._paintChartLabels=function(){var e=this,n=e.options.chartLabels;n&&n.length&&t.each(n,function(n,r){var i;r=t.extend(!0,{compass:"east",attachMethod:"coordinate",attachMethodData:{seriesIndex:-1,pointIndex:-1,x:-1,y:-1},offset:0,visible:!1,text:"",connected:!1},r);if(r.visible){i=e._getChartLabelPointPosition(r);if(typeof i.x!="number"||typeof i.y!="number")return!1;e._setChartLabel(r,i)}})},s.prototype._getChartLabelPointPosition=function(e){},s.prototype._setChartLabel=function(e,n,r,i){var s=this,o=e.compass,u=s.options,a=t.extend(!0,{},u.textStyle,u.chartLabelStyle),f=s._text(0,0,e.text).attr(a),l=e.offset,c=0,h=0,p=null,d=null;t.wijraphael.addClass(t(f.node),u.wijCSS.labelText),s.chartLabelEles.push(f),p=s._getCompassTextPosition(o,f.wijGetBBox(),l,n,r),l&&e.connected&&(d=s.canvas.path("M"+n.x+" "+n.y+"L"+p.endPoint.x+" "+p.endPoint.y),t.wijraphael.addClass(t(d.node),u.wijCSS.labelConnect),d.attr(i),s.chartLabelEles.push(d)),c=p.endPoint.x+p.offsetX,h=p.endPoint.y+p.offsetY,f.transform(Raphael.format("...T{0},{1}",c,h)).toFront()},s.prototype._getCompassTextPosition=function(e,n,r,i,s){var o=0,u=0,a={x:0,y:0};switch(e.toLowerCase()){case"east":s=0;break;case"west":s=180;break;case"north":s=90;break;case"south":s=270;break;case"northeast":s=45;break;case"northwest":s=135;break;case"southeast":s=315;break;case"southwest":s=225}return s>=0&&s<22.5||s>337.5&&s<360?o=n.width/2:s>=22.5&&s<67.5?(o=n.width/2,u=-1*n.height/2):s>=67.5&&s<112.5?u=-1*n.height/2:s>=112.5&&s<157.5?(o=-1*n.width/2,u=-1*n.height/2):s>=157.5&&s<202.5?o=-1*n.width/2:s>=202.5&&s<247.5?(o=-1*n.width/2,u=n.height/2):s>=247.5&&s<292.5?u=n.height/2:(o=n.width/2,u=n.height/2),a=t.wijraphael.getPositionByAngle(i.x,i.y,r,s),{endPoint:a,offsetX:o,offsetY:u}},s.prototype._mouseDown=function(e,t){this._trigger("mouseDown",e,t)},s.prototype._mouseUp=function(e,t){this._trigger("mouseUp",e,t)},s.prototype._mouseOver=function(e,t){this._trigger("mouseOver",e,t)},s.prototype._mouseOut=function(e,t){this._trigger("mouseOut",e,t)},s.prototype._mouseMove=function(e,t){this._trigger("mouseMove",e,t)},s.prototype._click=function(e,t){this._trigger("click",e,t)},s.prototype._mouseMoveInsidePlotArea=function(e,n){var r=this,i=r.options,s=i.indicator,o=r.canvas,u,a,f,l=0,c=[],h=i.horizontal;s&&s.visible&&this.isPlotAreaMouseDown&&(h?u=this._calculatePositionByX(n.top):u=this._calculatePositionByX(n.left),u&&this.indicatorLine&&u.x!==this.lastIndicatorPosition&&(t.each(u.data,function(e,t){t.visible&&c.push(t)}),c.length>0&&(a=r.canvasBounds,h?this.indicatorLine.transform("T0 "+u.x):this.indicatorLine.transform("T"+u.x+" 0"),this._setTooltipContent(c),h?this.tooltip.showAt({x:a.endX,y:u.x}):this.tooltip.showAt({x:u.x,y:a.startY}),this.lastIndicatorPosition=u.x,r._indicatorLineShowing(c),this.lastIndicatorObjects=c)))},s.prototype._calculatePositionByX=function(e){var t=this,n=t.pointXs,r,i=t.dataPoints;return n&&n.length>0&&(r=this._calculatePositionByXInternal(e,n)),i?{x:r,data:i[r.toString()]}:null},s.prototype._calculatePositionByXInternal=function(e,t){var n=t.length,r,i;return n===1?t[0]:n===2?Math.abs(e-t[0])>Math.abs(e-t[1])?t[1]:t[0]:(r=parseInt((n/2).toString()),e>t[r]?i=t.slice(r):i=t.slice(0,r+1),this._calculatePositionByXInternal(e,i))},s.prototype._mouseMoveOutsidePlotArea=function(e,t){this.indicatorLine&&(this.indicatorLine.wijRemove(),this.indicatorLine=null,this.tooltip&&this.tooltip.hide(),this._resetTooltip())},s.prototype._mouseDownInsidePlotArea=function(e,n){this.isPlotAreaMouseDown=!0;var r=this,i=r.options,s=i.indicator,o=r.canvas,u,a,f,l=[],c=i.horizontal;s&&s.visible&&this.isPlotAreaMouseDown&&(r._setTooltip(),c?u=this._calculatePositionByX(n.top):u=this._calculatePositionByX(n.left),u&&(t.each(u.data,function(e,t){t.visible&&l.push(t)}),l.length>0&&(a=r.canvasBounds,c?f=["M",a.startX,0,"H",a.endX]:f=["M",0,a.startY,"V",a.endY],this.indicatorLine&&this.indicatorLine.wijRemove(),this.indicatorLine=o.path(f),this.indicatorLine.attr(s.style),c?this.indicatorLine.transform("T0 "+u.x):this.indicatorLine.transform("T"+u.x+" 0"),this._setTooltipContent(l),c?this.tooltip.showAt({x:a.endX,y:u.x}):this.tooltip.showAt({x:u.x,y:a.startY}),this.lastIndicatorPosition=u.x,r._indicatorLineShowing(l),this.lastIndicatorObjects=l)),e.preventDefault())},s.prototype._indicatorLineShowing=function(e){this.lastIndicatorObjects&&this._removeIndicatorStyles(this.lastIndicatorObjects)},s.prototype._removeIndicatorStyles=function(e){},s.prototype._mouseUpInsidePlotArea=function(e,t){this.isPlotAreaMouseDown=!1,this.indicatorLine&&(this.indicatorLine.wijRemove(),this.indicatorLine=null,this.tooltip&&this.tooltip.hide(),this._resetTooltip()),this.lastIndicatorObjects&&(this._removeIndicatorStyles(this.lastIndicatorObjects),this.lastIndicatorObjects=null)},s.prototype._bindLiveEvents=function(){this._bindLegendEvents(),this._bindCanvasEvents()},s.prototype._bindCanvasEvents=function(){var e=this,n=e.chartElement,r="",i="."+this.widgetName;window.navigator.msPointerEnabled&&n.css("-ms-touch-action","none"),t.support.isTouchEnabled&&t.support.isTouchEnabled()&&(r="wij"),n.bind(r+"mousemove"+i,function(t){var r=n.offset(),i=e.canvasBounds,s={left:t.pageX-r.left,top:t.pageY-r.top},o=e.options.disabled;if(o)return;s.left>=i.startX&&s.left<=i.endX&&s.top>=i.startY&&s.top<=i.endY?e._mouseMoveInsidePlotArea(t,s):e._mouseMoveOutsidePlotArea(t,s)}),e.options.indicator&&e.options.indicator.visible&&n.bind(r+"mousedown"+i,function(t){var r=n.offset(),i=e.canvasBounds,s={left:t.pageX-r.left,top:t.pageY-r.top},o=e.options.disabled;if(o)return;s.left>=i.startX&&s.left<=i.endX&&s.top>=i.startY&&s.top<=i.endY&&e._mouseDownInsidePlotArea(t,s)}).bind(r+"mouseup"+i,function(t){var r=n.offset(),i=e.canvasBounds,s={left:t.pageX-r.left,top:t.pageY-r.top},o=e.options.disabled;if(o)return;s.left>=i.startX&&s.left<=i.endX&&s.top>=i.startY&&s.top<=i.endY&&e._mouseUpInsidePlotArea(t,s)})},s.prototype._unbindCanvasEvents=function(){window.navigator.msPointerEnabled&&this.element.css("-ms-touch-action",""),this.element.unbind("."+this.widgetName)},s.prototype._bindLegendEvents=function(){var e=this,n=e.chartElement;n.delegate("."+e.options.wijCSS.legend,"click.wijchartcore",function(n){if(e.options.disabled)return;var r=t(n.target);r[0].tagName&&r[0].tagName==="tspan"&&(r=r.parent()),e._legendClick(r)})},s.prototype._legendClick=function(e){if(typeof e.data("index")=="undefined")return;var n=this,r=n.options.legend,i=e.data("index"),s=e.data("legendIndex"),o=n.chartElement.data("fields"),u=n.seriesEles,a,f=n.legendIcons[s],l=n.legends[s],c=r.textWidth?t(l[0].node):t(l.node),h=i,p;o&&o.seriesEles&&(u=o.seriesEles),n.legendDots&&n.legendDots.length>i&&(p=n.legendDots[i]),r.reversed&&(h=n.legends.length-1-i),a=u[h],a&&(c.data("hidden")?(n._showSerieEles(a),l.attr("opacity",c.data("textOpacity")),f.attr("opacity",c.data("iconOpacity")),p&&p.attr("opacity",c.data("dotOpacity")),c.data("hidden",!1)):(n._hideSerieEles(a),c.data("textOpacity")||(r.textWidth?c.data("textOpacity",l[0].attr("opacity")||1):c.data("textOpacity",l.attr("opacity")||1)),c.data("iconOpacity")||c.data("iconOpacity",f.attr("opacity")||1),p&&!c.data("dotOpacity")&&c.data("dotOpacity",f.attr("opacity")||1),l.attr("opacity","0.3"),f.attr("opacity","0.3"),p&&p.attr("opacity","0.3"),c.data("hidden",!0)))},s.prototype._showSerieEles=function(e){},s.prototype._hideSerieEles=function(e){},s.prototype._unbindLiveEvents=function(){var e=this,t=e.options,n=this.chartElement,r=e.widgetName;n.undelegate("."+t.wijCSS.legend,".wijchartcore").undelegate("."+t.wijCSS.legend,"wijchartcore"),this._unbindCanvasEvents()},s.prototype._isBarChart=function(){return!1},s.prototype._isPieChart=function(){},s.prototype._isStockChart=function(){},s.prototype._validateSeriesData=function(e){return!1},s.prototype._calculateParameters=function(e,t){var n=this,i=t.max,s=t.min,o=t.autoMax&&e.autoMax,u=t.autoMin&&e.autoMin,a=t.autoMajor&&e.autoMajor,f=t.autoMinor&&e.autoMinor,l=null,c=null,h=e.annoMethod==="valueLabels",p=0,d=0,v=0,m=0,g=0,y=e.isTime,b=n.options.adjustMinValue;o&&i!==Number.MIN_VALUE&&e.id!=="x"&&n._isBarChart()&&i<0&&.5*(i-s)>-i&&(i=0),u&&s!==Number.MAX_VALUE&&e.id!=="x"&&n._isBarChart()&&s>0&&.5*(i-s)>s&&(s=0),i===s&&(s!==0&&(s-=1),i+=1),m=i-s;if(y){l=t.annoFormatString;if(!l||l.length===0)l=r.getTimeDefaultFormat(i,s),e.annoFormatString=l;g=r.niceTimeUnit(0,l)}c=r.nicePrecision(m),e.tprec=c,o&&(y?(d=r.roundTime(i,g,!0),d<i?i=d+g:i=d):(d=r.precCeil(-c,i),typeof d=="number"&&(i=d))),u&&(y?(v=r.roundTime(s,g,!1),v>s?s=v-g:s=v):(v=r.precFloor(-c,s),typeof v=="number"&&(s=v))),e.max=i,e.min=s,e.annoFormatString=l,e.tinc=g;if(a||f)m=i-s,n._calculateMajorMinor(t,e),p=t.unitMajor,o&&p!==0&&!y&&!h&&(m=i-parseInt((i/p).toString(),10)*p,m!==0&&(i+=p-m,i=r.precCeil(-c,i))),u&&p!==0&&!y&&!h&&(m=s-parseInt((s/p).toString(),10)*p,m!==0&&(m<0&&(m+=p),s-=Math.abs(m),s=r.precFloor(-c,s))),u&&p!==0&&!h&&(typeof b=="undefined"||b===!1)&&u&&s===t.min&&s-p>=0&&e.id==="y"&&(s-=p);e.max=i,e.min=s},s.prototype._supportStacked=function(){return!1},s.prototype._getDataExtreme=function(e){var t={txx:0,txn:0,tyx:0,tyn:0},n;return n=this._getDataExtremes(t,e),n?(n.txn>n.txx&&(n.txn=0,n.txx=1),n):(t.txn>t.txx&&(t.txn=0,t.txx=1),t)},s.prototype._getDataExtremes=function(e,r){var i=this,s=i.options,o=s.seriesList,u=s.stacked&&i._supportStacked(),a=s.is100Percent,f=s.axis,l=i.axisInfo,c=[],h=[],p=[],d,v={y:{}},m=f.x.valueLabels,g=l.x.annoMethod,y=l.y.annoMethod;return!o||o.length===0?e:(t.each(o,function(e,n){var r=n.data,i=[],s=[],o,u=0;if(r.xy&&t.isArray(r.xy)){o=r.xy.length;while(u<o)i.push(r.xy[u]),s.push(r.xy[u+1]),u+=2;r.x=i,r.y=s}}),i.seriesGroup&&t.each(i.seriesGroup,function(r,s){var o=[],m=parseInt(r,10);t.each(s,function(n,r){if(r.type==="pie")return!0;r=t.extend(!0,{display:"show"},r);var s=r.data,a=0,f=0,l=[].concat(s.xy),p=l.length,d,v;if(r.display==="exclude")return!0;c=[].concat(s.x),o=[].concat(s.y);if(s.xy&&p){c=[],o=[];while(f<p)c[a]=l[f],o[a]=l[f+1],f+=2,a++,s.x=c,s.y=o}else s.x||(c=[],t.each(o,function(e){c.push(e)}),s.x=c);u&&n>0&&t.each(o,function(e){o[e]+=h[e]}),h=o,d=i._getMinMaxValue(c),v=i._getMinMaxValue(o),n===0?(e.txx=d.max,e.txn=d.min,e.tyx=v.max,e.tyn=v.min):(e.txx<d.max&&(e.txx=d.max),e.txn>d.min&&(e.txn=d.min),e.tyx<v.max&&(e.tyx=v.max),e.tyn>v.min&&(e.tyn=v.min)),n++}),a&&(e.tyx=1,e.tyn=0),v.y[r]={tyx:e.tyx,tyn:e.tyn},v.txx=e.txx,v.txn=e.txn,e.tyx=0,e.tyn=0;if(o.length){d=n.getFirstValidListValue(o);if(i._isDate(d))l.y[r].isTime=!0;else{if(typeof d=="undefined")return!0;typeof d!="number"&&(t.each(o,function(e,t){var n=f.y.annoFormatString,r=t;n&&n.length>0?r=Globalize.format(r,n,i._getCulture()):r=r.toString(),p.push({text:r,value:t,gridLine:!1})}),l.y[r].annoMethod="valueLabels",!f.y[m].valueLabels&&f.y[m].valueLabels.length===0?l.y[r].valueLabels=p:l.y[r].valueLabels=f.y[m].valueLabels,f.x.max=o.length-1,f.x.min=0,f.y[m].unitMajor=1,f.x.unitMinor=.5,l.y[r].autoMax=!1,l.y[r].autoMin=!1,l.y[r].autoMajor=!1,l.y[r].autoMinor=!1)}}}),c.length&&(d=n.getFirstValidListValue(c),g==="valueLabels"&&m&&m.length>0&&(l.x.valueLabels=m),i._isDate(d)?l.x.isTime=!0:typeof d!="number"&&(t.each(c,function(e,n){var r={},s,o;if(g==="valueLabels"&&m&&m.length&&e<m.length){s=m[e],o=typeof s;if(o==="string")s={text:s};else if(o==="number"||i._isDate(s))s={value:s}}r=t.extend({text:n,value:e,gridLine:!1},s),p.push(r)}),f.x.max=c.length-1,f.x.min=0,f.x.unitMajor=1,f.x.unitMinor=.5,l.x.annoMethod="valueLabels",l.x.valueLabels=p,l.x.autoMax=!1,l.x.autoMin=!1,l.x.autoMajor=!1,l.x.autoMinor=!1)),v)},s.prototype._isVertical=function(e){return e==="west"||e==="east"},s.prototype._isDate=function(e){return e?typeof e=="object"&&e.constructor===Date:!1},s.prototype._getMinMaxValue=function(e){var r=this,i={min:0,max:0},s=0,o;if(!e.length)return i;o=n.getFirstValidListValue(e);if(typeof o!="number"){if(!r._isDate(o))return i.min=0,i.max=e.length-1,i;i.min=o,i.max=o}else i.min=o,i.max=o;for(s=0;s<e.length;s++){if(e[s]===null||typeof e[s]=="undefined")continue;if(typeof e[s]=="number"&&isNaN(e[s]))continue;e[s]<i.min?i.min=e[s]:e[s]>i.max&&(i.max=e[s])}return r._isDate(i.min)&&(i.min=t.toOADate(i.min),i.max=t.toOADate(i.max)),i},s.prototype._calculateMajorMinor=function(e,n){var i=this,s=i.options,o=n.bounds||i.canvasBounds,u=e.autoMajor,a=e.autoMinor,f=n.max,l=n.min,c=n.isTime,h=n.tinc,p=n.annoFormatString,d=null,v=null,m=null,g=null,y=null,b=null,w=null,E=null,S=null,x=f-l,T=0,N=0,C=0,k=0;if(u){S=t.extend(!0,{},s.textStyle,e.textStyle,e.labels.style);if(c)d=Globalize.format(t.fromOADate(f),p,i._getCulture()),v=Globalize.format(t.fromOADate(l),p,i._getCulture()),y=i._text(-1e3,-1e3,d).attr(S),b=i._text(-1e3,-1e3,v).attr(S),m=y.wijGetBBox(),g=b.wijGetBBox(),y.wijRemove(),y=null,b.wijRemove(),b=null;else{w=r.nicePrecision(x),E=w+1;if(E<0||E>15)E=0;y=i._text(-1e3,-1e3,t.round(f,E).toString()).attr(S),b=i._text(-1e3,-1e3,t.round(l,E).toString()).attr(S),m=y.wijGetBBox(),g=b.wijGetBBox(),y.wijRemove(),y=null,b.wijRemove(),b=null}m.width<g.width&&(m.width=g.width),m.height<g.height&&(m.height=g.height),i._isVertical(e.compass)?(N=o.endY-o.startY-n.vOffset-n.axisTextOffset,k=N/m.height,Number.POSITIVE_INFINITY===k?C=0:C=parseInt(k.toString(),10)):(T=o.endX-o.startX-n.vOffset-n.axisTextOffset,k=T/m.width,Number.POSITIVE_INFINITY===k?C=0:C=parseInt(k.toString(),10)),k=x,C>0&&(x/=C,c?x<h?k=h:k=r.niceTimeUnit(x,n.annoFormatString):(n.tprec=r.nicePrecision(x),k=r.niceNumber(2*x,-w,!0),k<x&&(k=r.niceNumber(x,-w+1,!1)),k<x&&(k=r.niceTickNumber(x)))),e.unitMajor=k}a&&e.unitMajor&&!isNaN(e.unitMajor)&&(e.unitMinor=e.unitMajor/2)},s}(e.wijmoWidget);e.WijChartCore=s,s.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{width:null,height:null,wijCSS:{headerText:"wijchart-header-text",headerContainer:"wijchart-header-container",footerText:"wijchart-footer-text",footerContainer:"wijchart-footer-container",legendTitle:"wijchart-legend-title",legendText:"wijchart-legend-text",legend:"wijchart-legend",legendDot:"chart-legend-dot",legendIcon:"wijchart-legend-icon",legendContainer:"wijchart-legend-container",legendTextCover:"wijchart-legend-textCover",axis:"wijchart-axis",axisText:"wijchart-axis-text",axisGridLine:"wijchart-axis-gridline",axisTick:"wijchart-axis-tick",axisLabel:"wijchart-axis-label",labelText:"wijchart-label-text",labelConnect:"wijchart-label-connect",canvasObject:"wijchart-canvas-object"},culture:"",seriesList:[],seriesStyles:[{stroke:"#00cc00",opacity:.9,"stroke-width":1},{stroke:"#0099cc",opacity:.9,"stroke-width":1},{stroke:"#0055cc",opacity:.9,"stroke-width":1},{stroke:"#2200cc",opacity:.9,"stroke-width":1},{stroke:"#8800cc",opacity:.9,"stroke-width":1},{stroke:"#d9007e",opacity:.9,"stroke-width":1},{stroke:"#ff0000",opacity:.9,"stroke-width":1},{stroke:"#ff6600",opacity:.9,"stroke-width":1},{stroke:"#ff9900",opacity:.9,"stroke-width":1},{stroke:"#ffcc00",opacity:.9,"stroke-width":1},{stroke:"#ffff00",opacity:.9,"stroke-width":1},{stroke:"#ace600",opacity:.9,"stroke-width":1}],seriesHoverStyles:[{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5}],marginTop:25,marginRight:25,marginBottom:25,marginLeft:25,textStyle:{fill:"#888","font-size":10,stroke:"none"},header:{text:"",style:{fill:"none",stroke:"none"},textStyle:{"font-size":18,fill:"#666",stroke:"none"},compass:"north",visible:!0},footer:{text:"",style:{fill:"#fff",stroke:"none"},textStyle:{fill:"#000",stroke:"none"},compass:"south",visible:!1},legend:{text:"",textMargin:{left:2,top:2,right:2,bottom:2},style:{fill:"none",stroke:"none"},textWidth:null,textStyle:{fill:"#333",stroke:"none"},titleStyle:{"font-weight":"bold",fill:"#000",stroke:"none"},compass:"east",orientation:"vertical",visible:!0},axis:{x:{alignment:"center",style:{stroke:"#999999","stroke-width":.5},visible:!0,textVisible:!0,text:"",textStyle:{fill:"#888","font-size":15,"font-weight":"bold"},labels:{style:{fill:"#333","font-size":11},textAlign:"near",width:null},compass:"south",autoMin:!0,autoMax:!0,min:null,max:null,origin:null,autoMajor:!0,autoMinor:!0,unitMajor:null,unitMinor:null,gridMajor:{visible:!1,style:{stroke:"#CACACA","stroke-dasharray":"- "}},gridMinor:{visible:!1,style:{stroke:"#CACACA","stroke-dasharray":"- "}},tickMajor:{position:"none",style:{fill:"black"},factor:1},tickMinor:{position:"none",style:{fill:"black"},factor:1},annoMethod:"values",annoFormatString:"",valueLabels:[]},y:{alignment:"center",style:{stroke:"#999999","stroke-width":.5},visible:!1,textVisible:!0,text:"",textStyle:{fill:"#888","font-size":15,"font-weight":"bold"},labels:{style:{fill:"#333","font-size":11},textAlign:"center",width:null},compass:"west",autoMin:!0,autoMax:!0,min:null,max:null,origin:null,autoMajor:!0,autoMinor:!0,unitMajor:null,unitMinor:null,gridMajor:{visible:!0,style:{stroke:"#999999","stroke-width":.5,"stroke-dasharray":"none"}},gridMinor:{visible:!1,style:{stroke:"#CACACA","stroke-dasharray":"- "}},tickMajor:{position:"none",style:{fill:"black"},factor:1},tickMinor:{position:"none",style:{fill:"black"},factor:1},annoMethod:"values",annoFormatString:"",valueLabels:[]}},hint:{enable:!0,content:null,contentStyle:{fill:"#d1d1d1","font-size":16},title:null,titleStyle:{fill:"#d1d1d1","font-size":16},style:{fill:"#000000","stroke-width":2},animated:"fade",showAnimated:"fade",hideAnimated:"fade",duration:120,showDuration:120,hideDuration:120,easing:"",showEasing:"",hideEasing:"",showDelay:0,hideDelay:150,compass:"north",offsetX:0,offsetY:0,showCallout:!0,calloutFilled:!1,calloutFilledStyle:{fill:"#000"}},indicator:{visible:!1,style:{stroke:"#000000"}},showChartLabels:!0,chartLabelStyle:{},chartLabelFormatString:"",disableDefaultTextStyle:!1,shadow:!0,dataSource:null,data:null,beforeSeriesChange:null,seriesChanged:null,beforePaint:null,painted:null})})(wijmo||(wijmo={}));