var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=e.getKeyCodeEnum(),i=function(e){function i(){e.apply(this,arguments),this._initialValue=0}return __extends(i,e),i.prototype._init=function(){e.prototype._init.call(this),this._initUserCultureOptions(),this._updateCultureRelatedOptions(),this._updateText()},i.prototype._initUserCultureOptions=function(){this.options.negativePrefix!==null&&(this._userNegativePrefix=this.options.negativePrefix),this.options.negativeSuffix!==null&&(this._userNegativeSuffix=this.options.negativeSuffix),this.options.positivePrefix!==null&&(this._userPositivePrefix=this.options.positivePrefix),this.options.positiveSuffix!==null&&(this._userPositiveSuffix=this.options.positiveSuffix),this.options.currencySymbol!==null&&(this._userCurrencySymbol=this.options.currencySymbol)},i.prototype._updateCultureRelatedOptions=function(){var e=this._getCulture().numberFormat,t=e[this.options.type]||e,n=t.pattern[0],r=t.pattern[1]||"n",i=n.split("n"),s=r.split("n"),o=this._getPercentSymbol(),u=this._getCulture().numberFormat.currency.symbol;this._userNegativePrefix===undefined&&(this.options.negativePrefix=i[0].replace(/%/g,o).replace(/\$/g,u)),this._userNegativeSuffix===undefined&&(this.options.negativeSuffix=i[1].replace(/%/g,o).replace(/\$/g,u)),this._userPositivePrefix===undefined&&(this.options.positivePrefix=s[0].replace(/%/g,o).replace(/\$/g,u)),this._userPositiveSuffix===undefined&&(this.options.positiveSuffix=s[1].replace(/%/g,o).replace(/\$/g,u)),this._userCurrencySymbol===undefined&&(this.options.currencySymbol=e.currency.symbol)},i.prototype._createTextProvider=function(){if(this._textProvider)return this._textProvider;this._textProvider=new o(this,this.options.type),this._textProvider.setNullValue(this.element.val()===""&&this.options.value===null)},i.prototype._beginUpdate=function(){this._initialValue=0;var e=this.options;this.element.addClass(e.wijCSS.wijinputnumber),this.element.data({defaultValue:e.value,preValue:e.value}).attr({"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":e.value||this._initialValue})},i.prototype.focus=function(){e.prototype.focus.call(this);var t=this.element.data("prevCursorPos");this.element.wijtextselection(t,t)},i.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);switch(t){case"minValue":this.element.attr("aria-valuemin",n),this._updateText();break;case"maxValue":this.element.attr("aria-valuemax",n),this._updateText();break;case"value":this.setValue(n),this._updateText();break;case"showGroup":case"decimalPlaces":case"culture":this._updateCultureRelatedOptions(),this._updateText();break;case"positivePrefix":this._userPositivePrefix=n,this._updateText();break;case"negativePrefix":this._userNegativePrefix=n,this._updateText();break;case"positiveSuffix":this._userPositiveSuffix=n,this._updateText();break;case"negativeSuffix":this._userNegativeSuffix=n,this._updateText();break;case"currencySymbol":this._userCurrencySymbol=n,this._updateCultureRelatedOptions(),this._updateText();break;case"type":this._updateCultureRelatedOptions(),this._updateText()}},i.prototype._setData=function(e){this.setValue(e)},i.prototype._resetData=function(){var e=this.element.data("defaultValue");if(e===0){var t=this.element.data("elementValue");t!==undefined&&t!==null&&t!==""&&(e=t)}(e!==this._textProvider.getValue()||this._textProvider._nullvalue&&e===0)&&this.setValue(e)},i.prototype._validateData=function(){!this._textProvider.checkAndRepairBounds(!0,!1)&&this.options.value!==null&&this._updateText()},i.prototype._raiseDataChanged=function(){var e=this.options.value,t=this.element.data("preValue");this.element.data("preValue",e),t!==e&&(this.element.attr("aria-valuenow",e),this._trigger("valueChanged",null,{value:e}))},i.prototype._onChange=function(){},i.prototype._getPrefix=function(){return this._textProvider._stringFormat.isNegative()?this._userNegativePrefix!==undefined?this._userNegativePrefix:this.options.negativePrefix:this._userPositivePrefix!==undefined?this._userPositivePrefix:this.options.positivePrefix},i.prototype._getInvertPrefix=function(){return this._textProvider._stringFormat.isNegative()?this._userPositivePrefix!==undefined?this._userPositivePrefix:this.options.positivePrefix:this._userNegativePrefix!==undefined?this._userNegativePrefix:this.options.negativePrefix},i.prototype._getSuffix=function(){return this._textProvider._stringFormat.isNegative()?this._userNegativeSuffix!==undefined?this._userNegativeSuffix:this.options.negativeSuffix:this._userPositiveSuffix!==undefined?this._userPositiveSuffix:this.options.positiveSuffix},i.prototype._getCurrencySymbol=function(){return this._userCurrencySymbol!==undefined?this._userCurrencySymbol:this._getCulture().numberFormat.currency.symbol},i.prototype._getPercentSymbol=function(){return this._getCulture().numberFormat.percent.symbol},i.prototype.getValue=function(){if(this._textProvider._nullvalue)return null;var e=this._textProvider.getValue();if(e===undefined||e===null)e=this.getText();return e},i.prototype.setValue=function(e,t){typeof t=="undefined"&&(t=!1);try{t=!!t,e===null||typeof e=="undefined"||isNaN(e)?e=null:typeof e=="boolean"?e=e?1:0:typeof e=="string"&&(e=this._textProvider.tryParseValue(e));if(this._textProvider.setValue(e))this._updateText();else if(t){var n=this.getText();this.setText(e);var r=this.getText().trim();e=e.trim(),r!==e&&this.setText(n)}else this.setText(e);return!0}catch(i){return!1}},i.prototype._isLastValueNull=function(){return e.prototype._isLastValueNull.call(this)&&!this._textProvider._nullvalue},i.prototype.isValueNull=function(){try{return this._textProvider.isValueNull()}catch(e){return!0}},i.prototype.getPostValue=function(){if(!this._isInitialized())return this.element.val();if(e.prototype._showNullText.call(this)&&this.isValueNull())return"0";var t=this.options.value?this.options.value:0;return this.options.type==="percent"&&(t=(t/100).toFixed(10)),t.toString()},i.prototype._updateText=function(t){typeof t=="undefined"&&(t=!1);if(!this._isInitialized())return;this._textProvider._stringFormat.isNegative()?this.element.addClass(this.options.negativeClass):this.element.removeClass(this.options.negativeClass),this._textProvider._nullvalue?this.options.value=null:this.options.value=this._textProvider.getValue(),e.prototype._updateText.call(this,t),this._textProvider.checkAndRepairBounds(!0,!1)||(this._trigger("valueBoundsExceeded"),this.isFocused()||(this._textProvider.setNullValue(!1),e.prototype._updateText.call(this,t)))},i.prototype._doSpin=function(e,r,i){if(!this._allowEdit())return!1;if(r&&this.element.data("breakSpinner"))return!1;var s=this.element.wijtextselection(),o=new t.wijInputResult;this.element.data("focusNotCalledFirstTime")!==-9&&(new Date).getTime()-this.element.data("focusNotCalledFirstTime")<600&&(this.element.data("focusNotCalledFirstTime",-9),this.element.data("prevCursorPos",0)),this.element.data("prevCursorPos")===-1?this.element.data("prevCursorPos",s.start):s.start=this.element.data("prevCursorPos"),o.testPosition=s.start,this._textProvider.spinEnumPart(s.start,o,this.options.increment,e),e?this._trigger("spinUp",null):this._trigger("spinDown",null),this._updateText(),this.element.data("prevCursorPos",o.testPosition),i||this.selectText(o.testPosition,o.testPosition);if(r&&!this.element.data("breakSpinner")){var u=window.setTimeout(n.proxy(function(){this._doSpin(e,!0)},this),this._calcSpinInterval());this.element.data("spintimer",u)}return!0},i.prototype._deleteSelText=function(t){typeof t=="undefined"&&(t=!1);var n=this.element.wijtextselection(),r=n.start===0&&n.end===this.element.val().length,i;if(n.start===n.end&&!t){i=this._textProvider._stringFormat._currentText;if(i.charAt(n.end)===this._textProvider.getGroupSeparator()||i.charAt(n.end)===this._textProvider.getDecimalSeparator()){n.start++,n.end++,this.element.wijtextselection(n);return}}var s=this._textProvider.getEditingValue();e.prototype._deleteSelText.call(this,t),s===0&&(r||this._textProvider.getEditingValue()===0)&&(this._textProvider.setNullValue(!0),this._updateText(!0),this.options.value=null)},i.prototype._processClearButton=function(){this._setOption("value",null)},i.prototype._processLeftRightKey=function(e){if(e){if(this.element.wijtextselection().start===0&&(this.options.blurOnLeftRightKey.toLowerCase()==="left"||this.options.blurOnLeftRightKey.toLowerCase()==="both"))return t.Utility.MoveFocus(this.element.get(0),!1),!0}else if(this.element.wijtextselection().start===this.element.val().length&&(this.options.blurOnLeftRightKey.toLowerCase()==="right"||this.options.blurOnLeftRightKey.toLowerCase()==="both"))return t.Utility.MoveFocus(this.element.get(0),!0),!0;return!1},i.prototype._processTabKey=function(e){var t=e.keyCode||e.which;switch(t){case r.TAB:if(this.options.tabAction!=="field")break;var n=this.element.val().indexOf(".");n===-1&&(n=this.element.val().length);var i=this.element.wijtextselection();return e.shiftKey?i.start>n&&this._toPrevField():i.start<n&&this._toNextField(),!0}return!1},i.prototype._toPrevField=function(){var e=this._getPrefix();this.element.wijtextselection(e.length,e.length)},i.prototype._toNextField=function(){var e=this.element.val().indexOf(".");e===-1?this._toPrevField():this.element.wijtextselection(e+1,e+1)},i.prototype.spinUp=function(){this._doSpin(!0,!1,!0)},i.prototype.spinDown=function(){this._doSpin(!1,!1,!0)},i}(t.wijinputcore);t.wijinputnumber=i;var s=function(){function e(){this.wijCSS={wijinputnumber:t.wijinputcore.prototype.options.wijCSS.wijinput+"-numeric",wijinputnumberNegative:"ui-state-negative"},this.type="numeric",this.value=0,this.minValue=-1e9,this.maxValue=1e9,this.showGroup=!1,this.decimalPlaces=2,this.increment=1,this.currencySymbol=null,this.negativePrefix=null,this.negativeSuffix=null,this.positivePrefix=null,this.positiveSuffix=null,this.valueChanged=null,this.spinUp=null,this.spinDown=null,this.valueBoundsExceeded=null,this.negativeClass=this.wijCSS.wijinputnumberNegative}return e}();i.prototype.options=n.extend(!0,{},t.wijinputcore.prototype.options,new s),n.wijmo.registerWidget("wijinputnumber",i.prototype);var o=function(e){function r(t,n){e.call(this),this._type="numeric",this._stringFormat=null,this._nullvalue=!1,this.inputWidget=t,this._type=n,this._stringFormat=new u(this.inputWidget),this._stringFormat.setValueFromJSFloat(this.getValue())}return __extends(r,e),r.prototype.getEditingValue=function(){return this._stringFormat.tryParseValue(this._stringFormat._strippedText)},r.prototype._getCulture=function(){return this.inputWidget._getCulture()},r.prototype.getDecimalSeparator=function(){return this._getCulture().numberFormat["."]},r.prototype.getGroupSeparator=function(){return this._getCulture().numberFormat[","]},r.prototype.tryParseValue=function(e){return this._stringFormat.tryParseValue(e)},r.prototype.toString=function(){return this.inputWidget._showNullText()&&!this.inputWidget.isFocused()&&this.isValueNull()?this.inputWidget.options.nullText:this.isValueNull()?"":this._stringFormat.getFormattedValue()},r.prototype.isValueNull=function(){var e=this.inputWidget.options;return null===e.value||undefined===e.value||this._nullvalue},r.prototype.setText=function(e,t){return this.clear(),this.insertAt(e,0,t),!0},r.prototype.clear=function(){this._stringFormat.clear()},r.prototype.checkAndRepairBounds=function(e,t,n){typeof n=="undefined"&&(n=!1);if(this._nullvalue)return!0;var r=!0,i,s;typeof e=="undefined"&&(e=!1),i=this.inputWidget.options.minValue,s=this.inputWidget.options.maxValue;if(typeof t!="undefined"&&t)return this._stringFormat.checkMinValue(i,!1,!0);var o=!0;return this._stringFormat.checkMinValue(i,e,!1)||(r=!1,n&&(o=!1,this._stringFormat._currentValueInString=s.toString())),o&&!this._stringFormat.checkMaxValue(s,e)&&(r=!1,n&&(this._stringFormat._currentValueInString=i.toString())),this.inputWidget.options.decimalPlaces>=0&&this._stringFormat.checkDigitsLimits(this.inputWidget.options.decimalPlaces),r},r.prototype._countSubstring=function(e,t){var n=0,r=e.indexOf(t);while(r!==-1)n++,r=e.indexOf(t,r+1);return n},r.prototype._getAdjustedPositionFromLeft=function(e){var t=this._stringFormat._strippedText,r,i;for(r=0;r<t.length;r++){i=t.charAt(r);if(!(!n.wij.charValidator.isDigit(i)&&i!==this.getGroupSeparator()&&i!==this.getDecimalSeparator()||i==="0"))break;this._stringFormat.isZero()?e<r&&e++:e<=r&&e++}return e},r.prototype._getDecimalSeparatorPos=function(){var e=this._stringFormat._strippedText;return e.indexOf(this.getDecimalSeparator())},r.prototype._removeLeadingZero=function(e){var t=0;(e.charAt(t)===" "||e.charAt(t)===this.inputWidget.options.currencySymbol)&&t++;while(e.charAt(t)==="0"&&e.charAt(t+1)!==".")e=e.substr(0,t)+e.substr(t+1);return e},r.prototype.insertAt=function(e,r,i){var s=this._getCulture().numberFormat,o,u,a,f,l,c,h,p,d,v=this._stringFormat._strippedText,m=this.inputWidget._getPrefix(),g=this.inputWidget._getInvertPrefix();r<m.length?r=m.length:r>m.length+v.length&&(r=m.length+v.length),r-=m.length,i||(i=new t.wijInputResult),this.setNullValue(!1);if(e.length===1){if(e==="+"){var y=this._stringFormat.isNegative();this._stringFormat.setPositiveSign(),this.checkAndRepairBounds(!0,!1);var b=y!==this._stringFormat.isNegative();return b?i.testPosition=g.length+r-1:i.testPosition=m.length+r-1,!0}if(e==="-"||e===")"||e==="("){var w=this._stringFormat.isNegative();return this._stringFormat.invertSign(),this.checkAndRepairBounds(!0,!1),this._stringFormat.isNegative()===w?(i.testPosition=m.length+r-1,!0):(i.testPosition=g.length+r-1,!0)}if(!n.wij.charValidator.isDigit(e)){if(e===this.getDecimalSeparator()){o=this._getDecimalSeparatorPos()+m.length;if(o>=0)return i.testPosition=o,!0}if(e!==this.getGroupSeparator()&&e!==this.getDecimalSeparator()&&e!==")"&&e!=="+"&&e!=="-"&&e!=="("&&e!==this.getDecimalSeparator())return this._type==="percent"&&e===s.percent.symbol?(i.testPosition=r,!0):this._type==="currency"&&e===this.inputWidget.options.currencySymbol?(i.testPosition=r,!0):!1}}r=this._getAdjustedPositionFromLeft(r),u=r,u>v.length&&(u=v.length-1),a=this._removeLeadingZero(v.substring(0,u)),f=v.substring(u,v.length),this._stringFormat.isZero()&&(f=f.replace(/0/,""));var E=e,S="";while(E.charAt(0)==="+"||E.charAt(0)==="-"||E.charAt(0)===")"||E.charAt(0)==="(")S=E.charAt(0),E=E.substring(1);E=E.replace(/[^0-9\.]/gi,"");var x=E.indexOf(".");if(x!==-1){var T=E.split("."),N,C;N=T.shift();var k=T;C=k.join(""),E=N+"."+C}else E=E;S==="+"&&(this._stringFormat.setPositiveSign(),this.checkAndRepairBounds(!0,!1));if(S==="-"||S===")"||S==="(")this._stringFormat.invertSign(),this.checkAndRepairBounds(!0,!1);i.testPosition=m.length+a.length+E.length-1,this._stringFormat.deFormatValue((this._stringFormat.isNegative()?"-":"")+a+E+f),l=this._stringFormat._strippedText;try{this.inputWidget.options.showGroup?(c=this._countSubstring(a,this._stringFormat._groupSeparator),h=this._countSubstring(l.substring(0,a.length+E.length),this._stringFormat._groupSeparator),i.testPosition+=h-c):E.length===1&&(p=a.charAt(a.length-1),d=l.charAt(a.length-1),d!==p&&i.testPosition--)}catch(L){}return!0},r.prototype.removeAt=function(e,n,r,i){typeof r=="undefined"&&(r=new t.wijInputResult),typeof i=="undefined"&&(i=!1);var s=this._getCulture().numberFormat,o,u,a,f,l,c;r.testPosition=e;try{o=this._stringFormat._currentText;if(e===n&&o.substring(e,n+1)===this.getDecimalSeparator())return!1;u=o.slice(0,e),a=u,f=o.slice(e,n+1).indexOf(this.getDecimalSeparator())>=0,f&&(a+=this.getDecimalSeparator()),a+=o.slice(n+1),a=a||"0",this._stringFormat.deFormatValue(a),a=this._stringFormat._currentText,this.setNullValue(!1);if(this.inputWidget.options.showGroup)if(f)r.testPosition=a.indexOf(this.getDecimalSeparator());else try{l=this._countSubstring(u,this._stringFormat._groupSeparator),c=this._countSubstring(a.substring(0,Math.max(0,e-1)),this._stringFormat._groupSeparator),r.testPosition-=l-c,(o.indexOf(this.inputWidget.options.currencySymbol)===r.testPosition||o.indexOf(s.percent.symbol)===r.testPosition)&&r.testPosition++}catch(h){}return!0}catch(p){}return!0},r.prototype.replaceWith=function(t,n){var r=!1;this._stringFormat.isNegative()&&n==="-"&&t.text.length===this._stringFormat._currentText.length&&(r=!0);var i=e.prototype.replaceWith.call(this,t,n);return r&&this.insertAt("-",this.inputWidget.element.wijtextselection().start,i),i},r.prototype.spinEnumPart=function(e,n,r,i){n||(n=new t.wijInputResult),r=parseInt(r.toString());var s=this.inputWidget._getPrefix(),o=this._stringFormat._currentText.indexOf(this._getCulture().numberFormat["."]),u=this._stringFormat._currentValueInString.replace("-",""),a=u.indexOf("."),f=!0;o===-1&&(f=!1,o=this._stringFormat._currentText.length),a===0?a=1:a===-1&&(a=o);var l=Math.pow(10,this.inputWidget.options.decimalPlaces);if(n.testPosition>o&&f){var c=r;r/=l,Math.abs(r)>=1&&(i?this._stringFormat.spinUp(parseInt(r),this._nullvalue):this._stringFormat.spinDown(parseInt(r),this._nullvalue),r=(c-parseInt(r)*l)/l)}i?this._stringFormat.spinUp(r,this._nullvalue):this._stringFormat.spinDown(r,this._nullvalue),this.setNullValue(!1);var h=this.inputWidget.options.allowSpinLoop;this.checkAndRepairBounds(!0,!1,h);var p=this._stringFormat._currentValueInString.replace("-",""),d=p.indexOf(".");d===-1&&(f=!1,d=p.length);var v=this.inputWidget._getPrefix();d!==a&&f?n.testPosition=n.testPosition-s.length+v.length+d-a:n.testPosition=n.testPosition-s.length+v.length},r.prototype.getValue=function(){return this._stringFormat.getJSFloatValue()},r.prototype.setValue=function(e){try{return e===null?(this.setNullValue(!0),e=this.inputWidget._initialValue):this.setNullValue(!1),this._stringFormat.setValueFromJSFloat(e),this.checkAndRepairBounds(!0,!1),!0}catch(t){return!1}},r.prototype.setNullValue=function(e){this._nullvalue=e},r}(t.wijTextProvider);t.wijNumberTextProvider=o;var u=function(){function e(e){this.inputWidget=e,this._currentValueInString="0",this._currentText="0",this._strippedText="0",this._groupSeparator=" "}return e.prototype._isNegtive=function(e){return e.indexOf("-")!==-1||e.indexOf("(")!==-1},e.prototype._stripValue=function(e){var t=this.inputWidget._getCulture().numberFormat,n=t[this.inputWidget.options.type]||t,r=this._isNegtive(e),i=n[","],s=n["."],o=new RegExp("["+i+t.percent.symbol+this.inputWidget.options.currencySymbol+" ]","g"),u;return this._groupSeparator=i,e=this._removeNegativeSign(e),e=e.replace(o,""),e=e.replace(s,"."),u=/([\d\.])+/.exec(e),u&&(e=u[0]),r&&(e="-"+e),e},e.prototype.tryParseValue=function(e){try{var t=parseFloat(this._stripValue(e));return isNaN(t)&&(t=null),t}catch(n){return null}},e.prototype.deFormatValue=function(e){e=this._stripValue(e),this._currentValueInString=e,this._currentText=this._formatValue(e)},e.prototype._formatValue=function(e){var t=this.inputWidget.options,n=this.inputWidget._getCulture().numberFormat,r=n[t.type]||n,i=t.decimalPlaces,s=r[","],o=r["."],u=i!==-2?i:r.decimals,a=t.showGroup?r.groupSizes:[0],f;return e=this._removeLeadingZero(e),f=this._formatDigit(e,s,o,u,a),f=this._removeLeadingZero(f,t.showGroup?s:""),f.indexOf(o)===0&&(f="0"+f),f===""&&(f="0"),this._currentValueInString=e,this._strippedText=f,this._currentText=this._getPrefix()+f+this._getSuffix(),this._currentText},e.prototype._getPrefix=function(){return this.isNegative()?this.inputWidget._userNegativePrefix!==undefined?this.inputWidget._userNegativePrefix.replace(/\$/g,this.inputWidget.options.currencySymbol):this.inputWidget.options.negativePrefix===null?"":this.inputWidget.options.negativePrefix.replace(/\$/g,this.inputWidget.options.currencySymbol):this.inputWidget._userPositivePrefix!==undefined?this.inputWidget._userPositivePrefix.replace(/\$/g,this.inputWidget.options.currencySymbol):this.inputWidget.options.positivePrefix===null?"":this.inputWidget.options.positivePrefix.replace(/\$/g,this.inputWidget.options.currencySymbol)},e.prototype._getSuffix=function(){return this.isNegative()?this.inputWidget._userNegativeSuffix!==undefined?this.inputWidget._userNegativeSuffix.replace(/\$/g,this.inputWidget.options.currencySymbol):this.inputWidget.options.negativeSuffix===null?"":this.inputWidget.options.negativeSuffix.replace(/\$/g,this.inputWidget.options.currencySymbol):this.inputWidget._userPositiveSuffix!==undefined?this.inputWidget._userPositiveSuffix.replace(/\$/g,this.inputWidget.options.currencySymbol):this.inputWidget.options.positiveSuffix===null?"":this.inputWidget.options.positiveSuffix.replace(/\$/g,this.inputWidget.options.currencySymbol)},e.prototype.getFormattedValue=function(){return!this.inputWidget._showNullText()&&this.inputWidget.isValueNull()&&(this._currentValueInString=this.inputWidget._initialValue+""),this._formatValue(this._currentValueInString)},e.prototype.getJSFloatValue=function(){try{return this._currentValueInString===""||this._currentValueInString==="."?0:parseFloat(this._currentValueInString)}catch(e){return Number.NaN}},e.prototype.clear=function(){this._currentValueInString="0",this._currentText="0",this._strippedText="0"},e.prototype.setValueFromJSFloat=function(e){var t=e.toFixed(this.inputWidget.options.decimalPlaces+1);try{return this._currentValueInString=t,this._formatValue(t),!0}catch(n){return!1}},e.prototype.isZero=function(e){typeof e=="undefined"&&(e=this._currentValueInString);var t=this._removeNegativeSign(e),n;return t?(n=parseFloat(t),!isNaN(n)&&!n):!0},e.prototype.setPositiveSign=function(){this._currentValueInString=this._removeNegativeSign(this._currentValueInString)},e.prototype._removeNegativeSign=function(e){return e.replace(/[()\-]/g,"")},e.prototype._removeLeadingZero=function(e,t){typeof t=="undefined"&&(t="");var e=e.replace(/^0+/,"");while(t.length>0&&e.indexOf(t)===0){e=e.substr(t.length);var e=e.replace(/^0+/,"")}return e},e.prototype.isNegative=function(){return this._currentValueInString.indexOf("-")!==-1||this._currentValueInString.indexOf("(")!==-1},e.prototype.invertSign=function(){var e=this.isNegative();e?this.setPositiveSign():this._currentValueInString=this._currentValueInString.length?"-"+this._currentValueInString:"0",this.isZero()&&(this._currentValueInString=e?"0":"-0"),this._formatValue(this._currentValueInString)},e.prototype._parseNumber=function(e){typeof e=="undefined"&&(e=this._currentValueInString);var t=e.split(".",2),n={integer:parseInt(t[0],10)||0,fraction:(t.length>1?parseInt(t[1],10):0)||0,isNegative:t[0].indexOf("-")!==-1};return n.integer===0&&n.fraction===0&&(n.isNegative=!1),n},e.prototype._doSpin=function(e,t){var n=this._parseNumber(),r=e>=0?1:-1,i=Math.abs(e)>=1?"integer":"decimal",s=this.inputWidget.options.increment;s>=Math.pow(10,this.inputWidget.options.decimalPlaces)&&(i==="integer"?s=Math.abs(e):s=Math.abs(e)*Math.pow(10,this.inputWidget.options.decimalPlaces));var o=r*s,u="",a,f,l=n.integer,c=n.fraction;if(i==="integer")l=n.integer+o,l<0&&(u="-",l=-l);else if(i==="decimal"){var h=n.isNegative?-n.fraction:n.fraction;l=n.integer,h<0?(c=-Math.abs(h+o),h*(h+o)<0&&(l=Math.abs(l),u="-")):c=h+o,h===0&&n.isNegative&&(c=-Math.abs(c),u="-",r===1&&(l=Math.abs(l))),c<=0&&(l>0?(l-=1,c=Math.pow(10,this.inputWidget.options.decimalPlaces)+c):(l=Math.abs(n.integer),c=Math.abs(c),u="-"))}a=l.toString(),f=c.toString(),parseInt(this.inputWidget.options.decimalPlaces)>0&&f.length>parseInt(this.inputWidget.options.decimalPlaces)&&(l++,f=f.substring(1),a=l.toString());while(f.length<this.inputWidget.options.decimalPlaces)f="0"+f;a.indexOf("-")!==-1&&(u=""),parseInt(a)===0&&parseInt(f)===0&&(u=""),t?e>=0?this._currentValueInString=this.inputWidget.options.minValue.toString():this._currentValueInString=this.inputWidget.options.maxValue.toString():this._currentValueInString=u+a+"."+f},e.prototype.spinUp=function(e,t){if(e===null||e===undefined)e=1;this._doSpin(e,t)},e.prototype.spinDown=function(e,t){if(e===null||e===undefined)e=1;this._doSpin(-e,t)},e.prototype.checkDigitsLimits=function(e){var t=this._currentValueInString.split("."),n="";if(!t.length||t.length===1&&t[0]==="")return;t.length>1&&(n=t[1]),n=n.substring(0,e);while(n.length<e)n+="0";this._currentValueInString=t[0],n&&(this._currentValueInString+="."+n)},e.prototype.checkMinValue=function(e,t,n){typeof n=="undefined"&&(n=!1);var r=!0,i,s,o,u,a;try{i=this._currentValueInString.split("."),s=parseFloat(i[0]===""||i[0]==="-"?"0":i[0]),o=0,i.length>1&&parseFloat(i[1])>=0&&(o=parseFloat("1."+i[1]));if(s<0||i[0]==="-"||i[0].length>0&&i[0][0]==="-")o*=-1;e=""+e.toFixed(12)+"",i=e.split("."),u=parseFloat(i[0]===""||i[0]==="-"?"0":i[0]),a=0,i.length>1&&parseFloat(i[1])>=0&&(a=parseFloat("1."+i[1]));if(u<0||i[0]==="-"||i[0].length>0&&i[0][0]==="-")a*=-1;if(s>u)return!0;s<u||n&&s===u&&o<=a?r=!1:s===u&&s<0&&o<a?r=!1:s===u&&s>=0&&o<a&&(r=!1),!r&&t&&(this._currentValueInString=""+e+"")}catch(f){}return r},e.prototype.checkMaxValue=function(e,t){var n=!0,r,i,s,o,u;try{r=this._currentValueInString.split("."),i=parseFloat(r[0]===""||r[0]==="-"?"0":r[0]),s=0,r.length>1&&parseFloat(r[1])>=0&&(s=parseFloat("1."+r[1]));if(i<0||r[0]==="-"||r[0].length>0&&r[0][0]==="-")s*=-1;e=""+e.toFixed(12)+"",r=e.split("."),o=parseFloat(r[0]===""||r[0]==="-"?"0":r[0]),u=0,r.length>1&&parseFloat(r[1])>=0&&(u=parseFloat("1."+r[1]));if(o<0||r[0]==="-"||r[0].length>0&&r[0][0]==="-")u*=-1;if(i<o)return!0;i>o&&(n=!1),i===o&&i>=0&&s>u&&(n=!1),i===o&&i<0&&s>u&&(n=!1),!n&&t&&(this._currentValueInString=""+e+"")}catch(a){}return n},e.prototype._formatDigit=function(e,t,n,r,i){var s=this._removeNegativeSign(e),o,u,a,f,l,c;o=s.indexOf("."),o===-1&&(o=s.length),u="",a=0,f=0;for(c=s.length-1;c>=0;c--)l=s.charAt(c),c<o&&(u=l+u,f++,f===i[a]*1&&i[a]*1&&c&&(u=t+u,f=0,i.length-1>a&&a++));if(r>0){u+=n;for(c=0;c<r;c++)l="0",c+o+1<s.length&&(l=s.charAt(c+o+1)),u+=l}return r===-1&&o<s.length-1&&(u+=n,u+=s.substr(o+1)),u},e}();t.wijNumberFormat=u})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));