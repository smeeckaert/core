var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijmo-wijprogressbar",r="ui-progressbar",i=r+"-label",s=n+"-lb-",o="ui-corner-",u=o+"left",a=o+"right",f=o+"top",l=o+"bottom",c=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._create=function(){return t.ui.progressbar.prototype._create.apply(this,arguments)},n.prototype._destroy=function(){return t.ui.progressbar.prototype._destroy.apply(this,arguments)},n.prototype._setOptions=function(){return t.ui.progressbar.prototype._setOptions.apply(this,arguments)},n.prototype._setOption=function(e,n){return t.ui.progressbar.prototype._setOption.apply(this,arguments)},n.prototype._constrainedValue=function(e){return t.ui.progressbar.prototype._constrainedValue.apply(this,arguments)},n.prototype.value=function(e){return t.ui.progressbar.prototype.value.apply(this,arguments)},n.prototype._percentage=function(){return t.ui.progressbar.prototype._percentage.apply(this,arguments)},n.prototype._refreshValue=function(e){return t.ui.progressbar.prototype._refreshValue.apply(this,arguments)},n}(e.JQueryUIWidget);e.JQueryUIProgress=c;var h=function(e){function r(){e.apply(this,arguments)}return __extends(r,e),r.prototype._setOption=function(e,n){var r=this,i=r.options,s;switch(e){case"value":i[e]=parseInt(n,10),r._refreshValue();return;case"maxValue":i.max=n;case"minValue":s=parseInt(n,10),i[e]=s,r[e==="maxValue"?"max":"min"]=s,r._refreshValue(!0);return;case"labelFormatString":case"toolTipFormatString":i[e]=n,r._refreshValue(!0);return;case"fillDirection":case"labelAlign":case"indicatorImage":i[e]=n,r._updateElementsCss();return;default:}t.Widget.prototype._setOption.apply(r,arguments),e==="disabled"&&r._handleDisabledOption(n,r.element)},r.prototype._create=function(){var r=this,s=r.options,o=r.element;r.directions={east:"left",west:"right",north:"bottom",south:"top"},r.min=s.minValue,r.max=s.max=s.maxValue,o.addClass(n),e.prototype._create.call(this),r.label=t("<span>").addClass(i).appendTo(o),r._updateElementsCss(),r._isInit=!0,s.disabled&&r.disable(),r._refreshValue()},r.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},r.prototype._createDisabledDiv=function(e){var n=this,r=e?e:n.element,i=r.offset(),s=r.outerWidth(),o=r.outerHeight(),u={"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top};return t.browser.msie&&t.extend(u,{"background-color":"#fff",opacity:.1}),t("<div></div>").addClass("ui-disabled").css(u)},r.prototype._triggerEvent=function(e,t,n,r){if(!r)return;return this._trigger(e,null,{oldValue:t,newValue:n})===!1},r.prototype._refreshValue=function(e){var n=this,r=n.options,i,s=r.animationOptions,o=r.indicatorIncrement,u=n.element,a,f,l;if(!n._isInit)return;l=u.attr("aria-valuenow"),a=n.value(),f=(a-n.min)/(n.max-n.min)*100,i=parseInt(l)!=a;if(n._triggerEvent("beforeProgressChanging",l,a,i))return;!s.disabled&&s.duration>0?setTimeout(function(){t.wijmo.wijprogressbar.animations.progress({content:n.valueDiv,complete:function(){o!==1&&(n._refreshProgress(f,a,i),r.labelAlign==="running"&&n._updateRunningLabelCss(f)),n._triggerEvent("progressChanged",l,a,i),n._lastStep=f},step:function(t){n._performAnimating(t,e,i)},progressValue:a*100},s)},r.animationDelay):(n._refreshProgress(Math.round(f)),r.labelAlign==="running"&&n._updateRunningLabelCss(f),n._lastStep=f,n._triggerEvent("progressChanged",l,a,i))},r.prototype._refreshProgress=function(e,n,r){var i=this,s=i.options,o=s.fillDirection,c=i.element;n===undefined&&(n=t.wijmo.wijprogressbar.mul(e,i.max-i.min)/100+i.min);if(i._triggerEvent("progressChanging",c.attr("aria-valuenow"),n,r))return;i._isHorizontal()?i.valueDiv.toggleClass(o==="east"?a:u,n===i.max).width(e+"%"):i.valueDiv.toggleClass(o==="south"?l:f,n===i.max).height(e+"%"),i.label.html(i._getFormatString(s.labelFormatString,e,n)),c.attr("aria-valuenow",n).attr("title",i._getFormatString(s.toolTipFormatString,e,n))},r.prototype._isHorizontal=function(){var e=this.options.fillDirection;return e==="west"||e==="east"},r.prototype._getRotateTextOffset=function(e){var t,n;return e.css("width","auto"),t=e.outerWidth(),n=e.outerHeight(),e.css("width",""),Math.max(t-n-4,0)},r.prototype._updateElementsCss=function(){var e=this,t=e.options,r=e.element,i=t.fillDirection;r.removeClass(n+"-west "+n+"-east "+n+"-north "+n+"-south").addClass(n+"-"+i),e._updateProgressCss(),e._updateLabelCss()},r.prototype._updateLabelCss=function(){var e=this,n=e.options,r=e.element,i=n.labelAlign,o=e.label,u=e._lastStep,a=r.height();o.removeClass(s+"west "+s+"east "+s+"south "+s+"north "+s+"center "+s+"running").addClass(s+i).css({left:"",right:"",top:"",bottom:"",width:"","text-align":"","line-height":""}),i!=="north"&&i!=="south"&&(i!=="running"||!!e._isHorizontal())&&o.css("line-height",a+"px"),i==="running"?e._updateRunningLabelCss(u):!e._isHorizontal()&&!t.browser.msie&&(i==="north"?o.css("width","100%").css("text-align","right"):i==="south"&&o.css("width","100%").css("text-align","left"))},r.prototype._updateRunningLabelCss=function(e){var n=this,r=n.options,i=r.fillDirection,s=n.element,o=n.label,u=n.valueDiv,a=n._isHorizontal(),f,l,c,h;f=s[a?"width":"height"](),l=o[a?"outerWidth":"outerHeight"](),c=u[a?"outerWidth":"outerHeight"](),!a&&!t.browser.msie&&(l+=n._getRotateTextOffset(o)),h=f===c?f-l:e*f/100-l+l*(f-c)/f,o.css(n.directions[i],h)},r.prototype._updateProgressCss=function(){var e=this,t=e.options,n=t.fillDirection,r=t.indicatorImage,i=e.valueDiv,s=e._lastStep;r!==""&&i.css("background","transparent url("+r+") repeat fixed"),i.removeClass(u+" "+a+" "+f+" "+l).addClass(o+e.directions[n]),typeof s=="number"?e._isHorizontal()?i.css("width",s+"%").css("height",""):i.css("height",s+"%").css("width",""):i.css({width:"",height:""})},r.prototype._performAnimating=function(e,n,r){var i=this,s=i.options,o=s.indicatorIncrement,u=e/100,a=t.wijmo.wijprogressbar.div(u-i.min,i.max-i.min)*100,f=0,l,c,h=2;if(o){o!==1?a=Math.floor(a/o)*o:(a=Math.round(a),h=0),i.pointNumber=f;if(i._lastStep===a&&!n)return}i._refreshProgress(Number(a.toFixed(h)),Number(u.toFixed(h)),r),s.labelAlign==="running"&&i._updateRunningLabelCss(a)},r.prototype._getFormatString=function(e,t,n){var r=this,i=r.max-n,s=100-t,o=/\{0\}/g;return e=e.replace(o,n.toString()),o=/\{ProgressValue\}/g,e=e.replace(o,n.toString()),o=/\{1\}/g,e=e.replace(o,t.toString()),o=/\{PercentProgress\}/g,e=e.replace(o,t.toString()),o=/\{2\}/g,e=e.replace(o,i.toString()),o=/\{RemainingProgress\}/g,e=e.replace(o,i.toString()),o=/\{3\}/g,e=e.replace(o,s.toString()),o=/\{PercentageRemaining\}/g,e=e.replace(o,s.toString()),o=/\{4\}/g,e=e.replace(o,r.min),o=/\{Min\}/g,e=e.replace(o,r.min),o=/\{5\}/g,e=e.replace(o,r.max),o=/\{Max\}/g,e=e.replace(o,r.max),e},r.prototype.destroy=function(){var e=this,r=e.element;r.attr("title","").removeClass(n+" "+n+"-east "+n+"-west "+n+"-north "+n+"-south"),e.label&&e.label.remove(),e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null),t.ui.progressbar.prototype.destroy.apply(this,arguments)},r}(c);e.wijprogressbar=h,t.ui&&t.ui.progressbar&&(h.prototype.options=t.extend(!0,{},t.ui.progressbar.prototype.options,{labelAlign:"center",maxValue:100,minValue:0,fillDirection:"east",labelFormatString:"{1}%",toolTipFormatString:"{1}%",indicatorIncrement:1,indicatorImage:"",animationDelay:0,animationOptions:{disabled:!1,easing:null,duration:500},progressChanging:null,beforeProgressChanging:null,progressChanged:null}),t.wijmo.registerWidget("wijprogressbar",t.ui.progressbar,h.prototype),t.extend(t.wijmo.wijprogressbar,{animations:{progress:function(e,n){e=t.extend({easing:"swing",duration:1e3},e,n),e.content.stop(!0,!0).animate({pgvalue:e.progressValue},e)}},add:function(e,t){var n=0,r=0,i;try{n=e.toString().split(".")[1].length}catch(s){}try{r=t.toString().split(".")[1].length}catch(o){}return i=Math.pow(10,Math.max(n,r)),(e*i+t*i)/i},mul:function(e,t){var n=0,r=e.toString(),i=t.toString();try{n+=r.split(".")[1].length}catch(s){}try{n+=i.split(".")[1].length}catch(o){}return Number(r.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,n)},div:function(e,t){var n=0,r=0,i,s;try{n=e.toString().split(".")[1].length}catch(o){}try{r=t.toString().split(".")[1].length}catch(u){}return i=Number(e.toString().replace(".","")),s=Number(t.toString().replace(".","")),i/s*Math.pow(10,r-n)}}))})(wijmo||(wijmo={}));