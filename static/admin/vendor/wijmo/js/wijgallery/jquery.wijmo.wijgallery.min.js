var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijgallery",r="wijmo-wijgallery",i="wijmo-wijgallery-",s=i+"selected",o=i+"button-",u=i+"button",a="wijmo-wijgallery-thumbs-pointer-{0}",f="wijmo-wijgallery-flashwrapper",l='<div class="wijmo-wijgallery-frame"><div class="wijmo-wijgallery-content"></div></div>',c='<div class="wijmo-wijgallery-thumbs"></div>',h="<a><span></span></a>",p='<div class="wijmo-wijgallery-frame-{0}"><a href="#" class="wijmo-wijgallery-frame-link"></a></div>',d="<div></div>",v="li.wijmo-wijcarousel-item";!window.S&&window.swfobject&&(window.S={flash:window.swfobject});var m=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._setOption=function(e,n){var r=this,i=r.options,s,o,u,a;if(e==="framePosition"||e==="thumbnailPosition"||e==="transitions"||e==="pagingPosition")t.extend(!0,i[e],n);else{u=i[e],t.Widget.prototype._setOption.apply(r,arguments);switch(e){case"disabled":r._handleDisabledOption(n,r.element);break;case"thumbnailOrientation":r.thumbs[r.thumbWidgetName]({orientation:n});break;case"thumbsDisplay":r.thumbs[r.thumbWidgetName]({display:n});break;case"autoPlay":r[n?"play":"pause"]();break;case"showCounter":case"showTimer":case"showControls":s=e.replace(/show/i,"").toLowerCase(),o=e.replace(/show/i,"_create"),n!==u&&(n===!0?r[s]?r[s].jquery&&r[s].show():r[o]():r[s].hide());break;case"showCaption":n?(r._createCaption(r.size),a=r._loadCaption(r.images[r.currentIdx]),a.show()):r.element.find(".wijmo-wijgallery-caption,.wijmo-wijgallery-text").remove();break;case"showPager":case"thumbsLength":case"thumbnailDirection":case"showControlsOnHover":case"mode":case"data":r._wijdestroy(),r._create();break;default:}}},n.prototype._handleDisabledOption=function(e,n){var r=this;r.pager&&!r.pager.is(":hidden")&&(r.disabledEles=r.disabledEles.add(r.pager)),e?(r.disabledDiv.length||r._createDisabledDiv(),r.disabledDiv.appendTo("body")):r.disabledDiv&&(r.disabledDiv.remove(),r.disabledDiv=t())},n.prototype._createDisabledDiv=function(){var e=this;e.disabledEles.each(function(n,r){var i=t(r),s=i.offset(),o=i.outerWidth(),u=i.outerHeight(),a=t("<div></div>").css({"z-index":"99999",position:"absolute",width:o,height:u,left:s.left,top:s.top});t.browser.msie&&parseInt(t.browser.version)<10&&(a.css("background-color","white"),t.browser.version==="9.0"&&a.css("opacity","0.1")),e.disabledDiv=e.disabledDiv.add(a)})},n.prototype._initLi=function(e){var n=e.children("a:eq(0)"),r=e.find("img:eq(0)"),i=e.find("span:eq(0)"),s={url:null,thumbUrl:null,title:r.attr("alt"),caption:undefined};return n.length&&n.attr("href")?(s.url=n.attr("href"),s.title||(s.title=n.attr("title"))):r.length&&(s.url=r.attr("src")),i.length?s.caption=i:r.attr("title")&&(s.caption=t("<span>").html(r.attr("title"))),s.thumbUrl=r.attr("src"),s},n.prototype._initStatus=function(){var e=this,n;e.images=[],e.ul=e.element.children("ul"),n=e.ul.children("li"),e.count=n.length,n.each(function(n){var r=e._initLi(t(this));e.images.push(r)})},n.prototype._createMarkupFromData=function(){var e=this,n=e.options,r=n.data,i=e.element,s=i.children("ul:eq(0)");e.images=r,s.length?s.empty():s=t("<ul>").appendTo(i),e.ul=s,t.each(r,function(e,n){var r=t("<a>"),i=t("<li>"),o=t("<img>");n.url&&r.attr("href",n.url),n.thumbUrl&&o.attr("src",n.thumbUrl),n.title&&o.attr("alt"),r.append(o).appendTo(i),i.appendTo(s)}),e.count=r.length},n.prototype._create=function(){var e=this,n=e.options;e.container=e.element,e.container.addClass([r,n.wijCSS.widget].join(" ")),e.currentThumbIdx=0,e.currentIdx=-1,e.disabledEles=e.element,e.disabledDiv=t(),e.timerCount=0,window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),n.showPager?(n.pagingPosition=!0,n.thumbnails=!1):n.thumbnails=!0,n.data&&n.data.length?e._createMarkupFromData():e._initStatus(),n.loadCallback&&t.isFunction(n.loadCallback)&&e._trigger("loadCallback",null,e),e._createDom(),n.autoPlay&&e.play(!0),n.showControlsOnHover&&(e.frame.find(".wijmo-wijpager,.wijmo-wijgallery-button-next,.wijmo-wijgallery-counter,.wijmo-wijgallery-button-previous").hide(),!e.isPlaying&&e.timer&&e.timer.hide()),n.disabled&&e.disable(),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijgallery")},n.prototype._createDom=function(){var e=this,t=e.options;t.thumbnails?e._createThumbnails():e.ul.hide(),e._createFrame(),t.control&&e._createControls(),t.showCounter&&e._createCounter(),t.showTimer&&e._createTimer(),t.showPager&&e._createPager()},n.prototype._getFrameSize=function(){var e=this,t=e.options.thumbnailOrientation==="horizontal",n=e.element.height()-(t?e.thumbs?e.thumbs.outerHeight(!0):0:0),r=e.element.width()-(t?0:e.thumbs?e.thumbs.outerWidth(!0):0);return{w:r<2||!r?750:r,h:n<2||!n?300:n}},n.prototype._createFrame=function(){var e=this,n=e.options,r,i,s=e._getFrameSize(),o=n.thumbnailDirection==="after";e.frame=t(l).addClass(n.wijCSS.content+" "+n.wijCSS.helperClearFix)[o?"prependTo":"appendTo"](e.container).setOutWidth(s.w-1).setOutHeight(s.h).wrap('<div class="wijmo-wijgallery-framewrapper">'),e.size=s,r=e.frame.width(),i=e.frame.height(),e.frameWrapper=e.frame.parent(),n.thumbnailOrientation==="vertical"&&e.frameWrapper.addClass("wijmo-wijgallery-framewrapper-vertical"),n.showControlsOnHover&&e.frame.bind("mouseenter."+e.widgetName,function(){e._showControls("controls")}).bind("mouseleave."+e.widgetName,function(){e._hideControls("controls")}),e.content=e.frame.children("div.wijmo-wijgallery-content"),n.mode==="img"&&e._createFrameMask(),e._createPrevNextBtn(),e._createCaption(s),e._createLoading(),e.last=t('<div class="'+n.wijCSS.overlay+' wijmo-wijgallery-last"></div>').appendTo(e.content).width(r).height(i).css({"line-height":s.h+"px"}),e.current=t('<div class="'+n.wijCSS.overlay+' wijmo-wijgallery-current"></div>').appendTo(e.content).width(r).height(i).css({"line-height":s.h+"px"}),e._show(0)},n.prototype._createControls=function(){var e=this,n=e.options,r={collision:"none",of:e.container,my:"center bottom",at:"center bottom"};n.control&&(e.controls=t(n.control).css({position:"absolute"}).appendTo(e.container),t.extend(r,n.controlPosition),e.controls.position(r))},n.prototype._createLoading=function(){var e=this;e.loading=t("<div></div>").addClass("wijmo-wijgallery-loading").appendTo(e.content),e.loading.css({left:(e.content.width()-e.loading.width())/2,top:(e.content.height()-e.loading.height())/2}),e.loading.hide()},n.prototype._createFrameMask=function(){var e=this,n=e.options;t.each(["previous","next"],function(r,i){var s=t(p.replace(/\{0\}/,i)).appendTo(e.frame),o=s.children("a");t.browser.msie&&parseInt(t.browser.version)<=9&&s.css({"background-color":"#fff"}),n.showControlsOnHover&&s.bind("mouseenter."+e.widgetName,function(){e._showControls(i)}).bind("mouseleave."+e.widgetName,function(){e._hideControls(i)}),o.bind("click."+e.widgetName,function(t){e[i](),t.preventDefault()})})},n.prototype._createCounter=function(){var e=this,n=e.options;if(!n.showCounter){e.counter&&(e.counter.remove(),e.counter=undefined);return}e.counter||(e.counter=t("<div></div>").addClass("wijmo-wijgallery-counter "+n.wijCSS.stateDefault+" "+n.wijCSS.cornerTL).appendTo(e.frame)),e._refreshCounter()},n.prototype._refreshCounter=function(){var e=this,n=e.options,r;if(!e.counter)return;e.counter.empty(),n.counter&&(r=n.counter.replace(/\[i\]/,e.currentIdx+1),r=r.replace(/\[n\]/,e.count),t("<span></span>").text(r).appendTo(e.counter))},n.prototype._createPrevNextBtn=function(){var e=this,n=e.options.wijCSS;t.each(["next","previous"],function(r,i){var s=i==="next"?n.iconArrowRight:n.iconArrowLeft,u;u=e.frame.find(".wijmo-wijgallery-frame-"+i);if(!u.length||e.options.mode!=="img")u=e.frame;e[i+"Btn"]=t(e._createBtn(o+i,s)).bind("click."+e.widgetName,t.proxy(e[i],e)).appendTo(u),e._applyBtnStyle(i)})},n.prototype._applyBtnStyle=function(e){var t=this,n=t.options,r=e==="next",i=t[e+"Btn"],s=r?"right center":"left center",o=s,u=n.wijCSS,a=r?u.cornerLeft:u.cornerRight,f=e==="next"?t.currentIdx>=t.count:t.currentIdx<=0,l={collision:"none",of:t.frame,my:o,at:s};i.addClass(a).position(l),f?i.removeClass(u.stateHover).addClass(u.stateDisabled):i.hasClass(u.stateDisabled)&&i.removeClass(u.stateDisabled)},n.prototype._createCaption=function(e){var n=this,r=n.options,i=r.wijCSS;r.showCaption&&(n.overlay=t(d).addClass([i.content,i.helperClearFix,"wijmo-wijgallery-caption"].join(" ")).width(e.w).appendTo(n.content),n.caption=t(d).addClass([i.content,i.helperClearFix,"wijmo-wijgallery-text"].join(" ")).width(e.w).appendTo(n.content))},n.prototype._loadCaption=function(e){var n=this,r=e.caption,i,s=t("<span></span>"),o=n.element.find(".wijmo-wijgallery-text,.wijmo-wijgallery-caption");return r&&(o.show(),r.jquery&&r.show(),s.html(r),n.caption.empty().append(s),i=s.outerHeight(!0),o.height(i),t.browser.msie&&o.height(s.css("display","block").outerHeight(!0))),o.hide(),o},n.prototype._showCaption=function(e){var t=this;e&&e.caption&&(t.caption.length&&t.caption.fadeIn(500),t.overlay.length&&t.overlay.show().animate({opacity:.5},500))},n.prototype._createTooltip=function(e){var n=this,r=n.options.wijCSS,i=e||"bottom";n.pointer=t("<div>").addClass([r.content,r.stateDefault,a.replace(/\{0\}/,i)].join(" ")),n.pointer.appendTo(n.thumbsWrapper).hide()},n.prototype._createThumbnails=function(){var e=this,n=this,r=n.options,i=r.thumbnailDirection==="after",s="wijmo-wijgallery-thumbs-{0}",o=r.thumbnailOrientation==="horizontal",u=i?o?"bottom":"right":o?"top":"left";n.thumbPosition=u,n.thumbs=t(c).appendTo(n.container).addClass(r.wijCSS.content).addClass(o?"wijmo-wijcarousel-horizontal-multi":"wijmo-wijcarousel-vertical-multi"),o?n.thumbs.css({height:r.thumbsLength+"px"}).setOutWidth(n.element.width()):n.thumbs.css({width:r.thumbsLength+"px"}).setOutHeight(n.element.height()),n.ul.appendTo(n.thumbs),n.ul.children("li").each(function(r,i){var s=t(i).children("a"),i=n.images[r],o=i.thumbUrl;s.length||(s=t(e).wrapInner("<a>").children("a"),s.attr("href",o))}),t[n.namespace][n.thumbWidgetName]&&(n.thumbs.addClass(s.replace(/\{0\}/,u)).find("li").addClass(r.wijCSS.stateDefault).hover(function(){t(this).addClass(r.wijCSS.stateHover)},function(){t(this).removeClass(r.wijCSS.stateHover)}),n.thumbsWrapper=n.thumbs[n.thumbWidgetName]({display:r.thumbsDisplay,step:r.thumbsDisplay-1,itemPadding:"0 10px",showCaption:r.showThumbnailCaptions,orientation:r.thumbnailOrientation,loop:!1,itemClick:function(e,t){var r=t.index;n.show(r),e.preventDefault()},afterScroll:function(e,t){n.currentThumbIdx=t.firstIndex,n.activeLi&&n.activeLi.is("li")&&n.activeLi.index()>=t.firstIndex&&n.activeLi.index()<=t.lastIndex&&n._highlightThumb(n.activeLi),n.isScrolling=!1},beforeScroll:function(e,t){n.isScrolling=!0,r.mode==="swf"||r.mode==="flv"?n.pointer.hide():n.pointer.fadeOut(100)}}).wrap('<div class="wijmo-wijgallery-thumbswrapper">').parent(),o||n.thumbsWrapper.addClass("wijmo-wijgallery-thumbswrapper-vertical"),n._createTooltip(u))},n.prototype._calculatePosition=function(e,t,n,r,i,s){var o=this;o.thumbPosition==="bottom"?(e.left=e.left+(r-t)/2+s,e.top=e.top-n):o.thumbPosition==="top"?(e.left=e.left+(r-t)/2+s,e.top=e.top+i+2*s):o.thumbPosition==="left"?(e.left=e.left+r+2*s,e.top=e.top+(i-n)/2+s):o.thumbPosition==="right"&&(e.left=e.left-t,e.top=e.top+(i-n)/2+s)},n.prototype._highlightThumb=function(e){var t=this,n,r,i,o,u,a,f=[s,t.options.wijCSS.stateActive].join(" ");e&&e.length&&(e.siblings("li."+s).removeClass(f),e.addClass(f),n=t.pointer.outerWidth(!0),r=t.pointer.outerHeight(!0),i=e.width(),o=e.height(),u=e.offset(),a=5,t._calculatePosition(u,n,r,i,o,a),t.pointer.fadeIn(100),t.pointer.offset(u))},n.prototype._getSelector=function(e,t){var n,r=".wijmo-wijgallery-button-",i=".wijmo-wijpager,.wijmo-wijgallery-counter";return t&&(i+=",.wijmo-wijgallery-timerbar"),e==="next"||e==="previous"?n=r+e:e==="controls"?n=i:n=i+","+r+"next,"+r+"previous",n},n.prototype._showControls=function(e){var n=this,r;r=n._getSelector(e,!n.isPlaying&&n.timer),n.frame.find(r).stop(!0,!0).fadeIn(400,function(){t(this).css("opacity","")})},n.prototype._hideControls=function(e){var t=this,n;n=t._getSelector(e,!t.isPlaying&&t.timer),this.frame.find(n).stop(!0,!0).fadeOut(600)},n.prototype._createPager=function(){var e=this,n=e.options,r,i=n.thumbsDisplay,s=1,o=e.currentIdx,u=e.currentIdx,a={collision:"none",of:e.container,my:"right top",at:"right bottom"};n.thumbnails?(r=t("<div></div>").appendTo(e.thumbs),i!==0&&(s=Math.ceil(e.count/i),o=Math.ceil(e.currentIdx/i)),e.pager=r.wijpager({pageCount:s,pageIndex:o,pageButtonCount:s,mode:"numeric",pageIndexChanged:function(t,n){var r=n.newPageIndex;(u<r*i||u>=(r+1)*i)&&e.thumbs[e.thumbWidgetName]("scrollTo",r*i),t.preventDefault()}}).css({position:"absolute"})):(r=t("<div></div>").appendTo(e.container),e.pager=r.wijpager({pageCount:e.count,pageIndex:e.currentIdx,pageButtonCount:e.count,mode:"numeric",pageIndexChanged:function(t,n){var r=n.newPageIndex;e._show(r)}}).css({position:"absolute"}),t.extend(a,n.pagingPosition),e.pager.addClass("wijmo-wijgallery-pager").position(a))},n.prototype._createBtn=function(e,n){var r=t(h),i=this.options;return r.addClass(i.wijCSS.stateDefault+" "+e).attr("role","button").bind("mouseover"+this.widgetName,function(){if(t(this).hasClass(i.wijCSS.stateDisabled))return;t(this).addClass(i.wijCSS.stateHover)}).bind("mouseout"+this.widgetName,function(){if(t(this).hasClass(i.wijCSS.stateDisabled))return;t(this).removeClass(i.wijCSS.stateHover)}),r.children("span:eq(0)").addClass(i.wijCSS.icon+" "+n),r},n.prototype._createTimer=function(){var e=this,n=e.options;e._createPausePlay(),e.progressBar=t("<div></div>").addClass("wijmo-wijgallery-timerbar-inner "+n.wijCSS.cornerAll).css({width:"0%"}).attr("role","progressbar"),e.timer=t("<div></div>").addClass("wijmo-wijgallery-timerbar "+n.wijCSS.cornerAll).appendTo(e.frame).append(e.progressBar).append(e.playPauseBtn)},n.prototype._createPausePlay=function(){var e=this,n=e.options;e.playPauseBtn=t(e._createBtn(u,n.autoPlay?n.wijCSS.iconPause:n.wijCSS.iconPlay)).bind("click."+e.widgetName,function(){if(!t(this).hasClass(n.wijCSS.stateDisabled)){var r=t(this).children("span:eq(0)");e[r.hasClass(n.wijCSS.iconPlay)?"play":"pause"]()}})},n.prototype._show=function(e){var n=this,r=n.images[e],i,s,o,u=n._getFrameSize(),a=n.options,l=a.mode;if(n.currentIdx===e)return;r&&t.isPlainObject(r)&&(n.loading.delay(500).fadeIn(100),o=n.last.children("img,div."+f),o.length&&o.remove(),l==="swf"||l==="flv"?(n.last.hide(),n.current.empty(),n._wrapFlash(n.current,l,r.url),n.picture=n.current.children("div."+f),n._setCurrentStates(e),n.loading.stop().hide(),n._thumbsScroll(e)):l==="img"?(n.picture&&n.picture.length&&n.last.append(n.picture.unbind("load")),n.current.hide(),n.last.show(),n.picture=t("<img>").attr({src:r.url,alt:r.title}).appendTo(n.current).data("itemIndex",e),t.browser.msie&&n.picture[0].hasAttribute("complete")?n._imageLoaded(n,u):n.picture.bind("load",function(){n._imageLoaded(n,u)})):l==="iframe"&&(n.current.is(":hidden")?(i=n.current,s=n.last):(i=n.last,s=n.current),n.picture=t("<iframe></iframe>").addClass("wijmo-wijgallery-iframe").attr({frameborder:"0",marginwidth:"0",marginheight:"0",scrolling:"auto",allowtransparency:"true",src:r.url}).hide().appendTo(i).data("itemIndex",e).bind("load",function(){var e=t(this),r=e.data("itemIndex");n.loading.stop().hide(),n.pointer&&n.pointer.fadeOut(100),n._setCurrentStates(r),r!==undefined&&(a.showCaption,e.show(),s.fadeOut(function(){s.empty()}),i.fadeIn())})))},n.prototype._imageLoaded=function(e,t){var n=e.picture.attr("role","img"),r=n.data("itemIndex"),i=n[0].naturalWidth||n.width(),s=n[0].naturalHeight||n.height(),o=e.images[r];e.loading.stop().hide(),e.pointer&&e.pointer.fadeOut(100),i>t.w||s>t.h?i/s>t.w/t.h?n.css({width:"100%"}):n.css({height:"100%"}):i<t.w&&s<t.h&&n.addClass(e.options.wijCSS.stateDefault).addClass("wijmo-wijgallery-small-image"),r!==undefined&&(e.options.showCaption&&e.caption&&e._loadCaption(o),e._animate(r))},n.prototype._animate=function(e){var n=this,r=n.options,i=r.transitions,s=r.thumbnailOrientation==="horizontal",o,u,a,f,l,c,h=i.animated,p=i.duration;if(!n.last.children().length){n._setCurrentStates(e),n.last.hide(),n.current.show();return}l={index:n.currentIdx,to:e,toImg:n.images[e]};if(!n._trigger("beforeTransition",null,l))return;h?h==="slide"?(o=n.size.w,u=n.size.h,n.current.show(),c=n.currentIdx>e?!0:!1,a=t.createWrapper(n.last).css({overflow:"hidden",width:s?o*2:o,height:s?u:u*2,left:s?c?-o:0:0,top:s?0:c?-u:0}),a[c?"prepend":"append"](n.current),a.animate({left:s?c?0:-o:0,top:s?0:c?0:-u},p,function(){n.last.parent().is(".ui-effects-wrapper")&&n.last.unwrap(),n.last.hide(),n._setCurrentStates(e)})):t.mobile?(f=p/2,n.last.fadeOut(f,function(){n.current.stop(!0,!0).fadeIn(f,function(){n._setCurrentStates(e)})})):h==="explode"||h==="scale"||h==="blind"||h==="fold"?(n.current.css({position:"absolute"}),n.current.stop(!0,!0).show(h,p,function(){n.last.hide(),n._setCurrentStates(e)})):h==="size"?(n.last.hide(),n.current.stop(!0,!0).show(h,p,function(){n.last.hide(),n._setCurrentStates(e)})):(f=p/2,n.last.hide(h,f,function(){n.last.hide(),n.current.stop(!0,!0).show(h,f,function(){n._setCurrentStates(e)})})):(n.last.hide(),n.current.show(),n._setCurrentStates(e)),n._thumbsScroll(e)},n.prototype._thumbsScroll=function(e){var t,n=this,r=n.options;n.thumbs&&n.thumbs[n.thumbWidgetName]&&(r.scrollWithSelection?(t=e-Math.ceil(r.thumbsDisplay/2)+1,n.thumbs[n.thumbWidgetName]("scrollTo",t)):e>r.thumbsDisplay+n.currentThumbIdx-1?n.thumbs[n.thumbWidgetName]("scrollTo",e-r.thumbsDisplay+1):e<n.currentThumbIdx&&n.thumbs[n.thumbWidgetName]("scrollTo",e))},n.prototype._setCurrentStates=function(e){var t=this,n=t.options,r,i,s;s=t.currentIdx,t.currentIdx=e,r=e+1<t.count,t.isPlaying&&r?(t.timeout=null,t.isPlaying=!1,t.play()):t.progressBar&&t.pause(),e+1>=t.count?t.nextBtn.add(t.playPauseBtn).removeClass(n.wijCSS.stateHover).addClass(n.wijCSS.stateDisabled):t.nextBtn.add(t.playPauseBtn).removeClass(n.wijCSS.stateDisabled),e<=0?t.previousBtn.removeClass(n.wijCSS.stateHover).addClass(n.wijCSS.stateDisabled):t.previousBtn.removeClass(n.wijCSS.stateDisabled),n.showCaption&&t._showCaption(t.images[e]),t.thumbs&&t.thumbs[t.thumbWidgetName]?(t.activeLi=t.thumbs.find(v).eq(e),t.isScrolling||t._highlightThumb(t.activeLi)):t.pager&&t.pager.is(":wijmo-wijpager")&&t.pager.wijpager("option","pageIndex",e),t._refreshCounter(),t._clearCss(),i={last:s,index:t.currentIdx,toImg:t.images[t.currentIdx]},t._trigger("afterTransition",null,i)},n.prototype._clearCss=function(){this.current.css({position:"",visibility:""})},n.prototype._resetState=function(){var e=this;e._stopAnimation(),e.isPlaying&&e.progressBar&&(e.progressBar.stop(),e.progressBar.css({width:"0%"}))},n.prototype._stopAnimation=function(){var e=this,t;t=e.content.find(".ui-effects-wrapper"),t.length&&t.stop(!0,!0),e.current.stop(!0,!0),e.last.stop(!0,!0)},n.prototype.count1=function(e){return this.count},n.prototype._wijdestroy=function(){var e=this,n=e.options.wijCSS;e.frame.unwrap().remove(),e.options.thumbnails?t[e.namespace][e.thumbWidgetName]&&(e.thumbs[e.thumbWidgetName]("destroy"),e.element.find("li").unbind().removeClass(n.stateActive).filter("."+s).removeClass(s),e.thumbs.children("ul").unwrap().unwrap()):(e.pager&&e.pager.length&&e.pager.remove(),e.element.find("ul").css({display:""})),e.pointer&&e.pointer.remove(),e.element.removeClass([r,n.widget,n.content,n.cornerAll].join(" ")),e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null)},n.prototype.destroy=function(){this._wijdestroy(),t.Widget.prototype.destroy.apply(this)},n.prototype.show=function(e){var t=this;t._resetState(),t._show(e)},n.prototype.next=function(){var e=this,t;e._resetState(),t=e.currentIdx+1,t<e.count&&e._show(t)},n.prototype.previous=function(){var e=this,t;e._resetState(),t=e.currentIdx-1,t>=0&&e._show(t)},n.prototype.play=function(e){var t=this,n=t.options;if(t.isPlaying||n.disabled)return;if(n.interval===0)return t.pause();if(e){t.isPlaying=!0;return}if(n.showTimer&&t.progressBar)t.progressBar.css({width:"0%"}),t.playPauseBtn.children("span:eq(0)").removeClass(n.wijCSS.iconPlay).addClass(n.wijCSS.iconPause),t.progressBar.animate({width:"100%"},n.interval,null,function(){t._show(t.currentIdx+1)});else{if(t.timeout)return;t.timeout=window.setTimeout(function(){t.timerCount<=1&&t.next(),t.timerCount--},n.interval),t.timerCount++}t.isPlaying=!0},n.prototype.pause=function(){var e=this,t=e.options;if(t.showTimer&&e.progressBar)e.progressBar.stop(),e.progressBar.css({width:"0%"}),e.playPauseBtn.children("span:eq(0)").removeClass(t.wijCSS.iconPause).addClass(t.wijCSS.iconPlay);else{if(e.timeout===null)return;window.clearTimeout(e.timeout),e.timeout=null}e.isPlaying=!1},n.prototype.add=function(e,n){var r=this,i,s,o;if(typeof e=="string")i=t(e),o=r._initLi(i);else if(e.jquery)i=e,o=r._initLi(i);else{if(!t.isPlainObject(e))return;o=e}!n||n>r.count?s=r.count:n<0?s=0:s=n,r.images.splice(s,0,o),r.count++,r.thumbs&&r.thumbs[r.thumbWidgetName]&&r.thumbs[r.thumbWidgetName]("add",i,n)},n.prototype.remove=function(e){var t=this,n;isNaN(e)||e>t.count?n=t.count:e<0?n=0:n=e,t.images.splice(n,1),t.count--,t.thumbs&&t.thumbs[t.thumbWidgetName]&&t.thumbs[t.thumbWidgetName]("remove",e);if(t.currentIdx==e)t.current.children("img").remove(),t.last.children("img").remove(),t.picture=null,t.currentIdx=-1,t.show(e);else if(t.currentIdx>e){var r=t.currentIdx;t.currentIdx=-1,t.show(r)}},n.prototype._getExt=function(e){var t,n,r=/[0-9a-z]+$/i,i=e.indexOf("?");return i>-1&&(e=e.substring(0,i)),n=e.match(r),n&&(t=n[0].toLowerCase()),t},n.prototype._getPlayerName=function(e){if(e.indexOf("#")===0||e.indexOf("#")>0&&e.indexOf(document.location.href)===0)return"inline";var n=["bmp","gif","jpg","jpeg","png"],r=["swf"],i=["flv","m4v"],s=["dv","mov","moov","movie","mp4","avi","mpg","mpeg"],o=["asf","avi","mpg","mpeg","wm","wmv"],u=this._getExt(e);if(u){if(t.inArray(u,n)>=0)return"img";if(t.inArray(u,r)>=0)return"swf";if(t.inArray(u,i)>=0)return"flv";if(t.inArray(u,o)>=0)return"wmp";if(t.inArray(u,s)>=0)return"qt"}return"unknown"},n.prototype._wrapFlash=function(e,n,r){var i=this,s=i.options,o=r,u,a="100%",l="100%",c=s.flashInstall,h=s.flashVersion,p=s.flashVars,d=s.flashParams,v=i._newId();n==="flv"&&(o=s.flvPlayer,p=t.extend({file:r,width:a,height:l,autostart:s.autoPlayMovies?"true":"false",controlbar:s.showMovieControls?"bottom":"none",backcolor:"0x000000",frontcolor:"0xCCCCCC",lightcolor:"0x557722"},s.flashVars),d=t.extend({autostart:s.autoPlayMovies?"true":"false",allowscriptaccess:"always"},s.flashParams)),u=t("<div/>").addClass(f).appendTo(e),t("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",v).appendTo(u),S.flash.embedSWF(o,v,a,l,h,c,p,d)},n.prototype._newId=function(){var e="a|b|c|d|e|f|g|h|i|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z",t=[],n="",r;t=e.split("|");for(r=0;r<16;r++)n+=t[Math.round(Math.random()*25)];return n},n}(e.wijmoWidget);e.WijGallery=m,m.prototype.thumbWidgetName="wijcarousel",m.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-a",stateDefault:"ui-btn-up-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-b",iconPlay:"ui-icon-arrow-r",iconPause:"ui-icon-grid"},initSelector:":jqmData(role='wijgallery')",autoPlay:!1,scrollWithSelection:!1,showTimer:!0,interval:5e3,showCaption:!0,showThumbnailCaptions:!1,data:[],showControls:!1,control:"",controlPosition:{},showCounter:!0,counter:"[i] of [n]",showPager:!1,pagingPosition:{},thumbnailOrientation:"horizontal",thumbnailDirection:"after",transitions:{animated:"slide",duration:1e3,easing:null},showControlsOnHover:!0,thumbsDisplay:5,thumbsLength:100,beforeTransition:null,afterTransition:null,loadCallback:null,showMovieControls:!1,autoPlayMovies:!0,flashParams:{bgcolor:"#000000",allowfullscreen:!0,wmode:"transparent"},flashVars:{},flashVersion:"9.0.115",flvPlayer:"player\\player.swf",flashInstall:"player\\expressInstall.swf",mode:"img"}),t.wijmo.registerWidget("wijgallery",m.prototype)})(wijmo||(wijmo={}));