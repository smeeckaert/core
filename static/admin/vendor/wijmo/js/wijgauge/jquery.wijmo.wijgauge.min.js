var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){var t=jQuery;(function(e){e._map=[],e._map[0]="east",e.east=0,e._map[1]="west",e.west=1,e._map[2]="south",e.south=2,e._map[3]="north",e.north=3})(e.Compass||(e.Compass={}));var n=e.Compass,r=function(){function e(){}return e.mod360=function(t){var n=t%360;return t<0&&(n+=360),n},e.getAngle=function(t,n,r){var i=this,s=i.distance(n,r),o=i.distance(n,t),u=i.distance(r,t),a=s*s,f=o*o,l=u*u,c=Math.acos((l-f-a)/(-2*o*s));return Math.round(180/Math.PI*c)},e.distance=function(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},e.log=function(t,n){return t<=0?NaN:n===1||n<0?NaN:Math.log(t)/Math.log(n)},e.generateValues=function(t,n,r){var i=[],s,o;if(n>t&&r>0){s=parseInt(((n-t)/r+1).toString(),10);for(o=0;o<s;o++)i.push(t+o*r)}else r===0&&i.push(t);return i},e.isInRange=function(t,n,r){return t>=n&&t<=r||t<=n&&t>=r},e.paintMarker=function(t,n,r,i,s,o,u){var a;return n==="rect"?t.rect(r-s/2,i-o/2,s,o):(u?n==="tri"?a=t.isoTri(r,i,s,o):a=t.paintMarker(n,r,i,o):a=t.paintMarker(n,r,i,s),a)},e.formatString=function(n,r){if(t.isFunction(r))return r.call(this,n);if(r!==""){var i=/\{0(?::((?:n|d|p|c)\d?))?\}/gi,s,o;if(i.test(r))return s=r.match(i),o="$1",r.replace(/\{0(?::(?:(?:n|d|p|c)\d?))?\}/gi,Globalize.format(n,o))}return n},e.getPositionByAngle=function(t,n,r,i){var s={x:0,y:0},o=Raphael.rad(i);return s.x=t-r*Math.cos(o),s.y=n-r*Math.sin(o),s},e.donut=function(t,n,r,i,s,o,u){var a=this.getPositionByAngle,f=a(n,r,i,o),l=a(n,r,i,u),c=a(n,r,s,o),h=a(n,r,s,u),p=u-o>180,d;(u-o)%360!==0?(d=["M",f.x,f.y,"A",i,i,0,+p,1,l.x,l.y,"L",h.x,h.y,"A",s,s,0,+p,1,c.x,c.y,"L",f.x,f.y,"z"],t.path(d)):t.circle(n,r,i)},e}();e.GaugeUtil=r,Raphael.fn.isoTri=function(e,t,r,i,s){var o=e,u=t+i/2,a=e+r,f=t,l=e+r,c=t+i,h;return s==n.north?(o=e,u=t,a=e-r/2,f=t+i,l=e+r/2,c=t+i):s===n.east?(o=e-r/2,u=t-i/2,a=e-r/2,f=t+i/2,l=e+r/2,c=t):s===n.west&&(o=e-r/2,u=t,a=e+r/2,f=t-i/2,l=e+r/2,c=t+i/2),h=["M",o,u,"L",a,f,"L",l,c,"z"],this.path(h.join(" "))};var i=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._create=function(){var e=this,n=e.options,r;window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.redraw(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijgauge"),isNaN(n.width)&&e._setDefaultWidth(),isNaN(n.height)&&e._setDefaultHeight(),e._setDefaultWidthHeight(),n.disabled&&e.disable(),n.face&&n.face.template&&typeof n.face.template=="string"&&window[n.face.template]&&(n.face.template=window[n.face.template]),n.pointer&&n.pointer.template&&typeof n.pointer.template=="string"&&window[n.pointer.template]&&(n.pointer.template=window[n.pointer.template]),n.cap&&n.cap.template&&typeof n.cap.template=="string"&&window[n.cap.template]&&(n.cap.template=window[n.cap.template]),e.element.addClass(n.wijCSS.widget).toggleClass(n.wijCSS.stateDisabled,n.disabled);try{e.canvas=Raphael(e.element[0],n.width,n.height)}catch(i){var s=e.element.css("display");r=t("<div></div>").insertBefore(e.element).append(e.element),e.element.addClass("ui-helper-hidden-accessible").appendTo(t("body")),s==="none"&&e.element.css("display","block"),e.canvas=Raphael(e.element[0],n.width,n.height),e.element.appendTo(r).unwrap().removeClass("ui-helper-hidden-accessible"),s==="none"&&e.element.css("display","none")}e._autoCalculate(),e._draw()},n.prototype._setDefaultWidth=function(){},n.prototype._setDefaultHeight=function(){},n.prototype._setDefaultWidthHeight=function(){var e=this,t=e.element,n=e.options,r=t.get(0).style,i=r.width,s=r.height;i!==""&&(n.width=t.width()),s!==""&&(n.height=t.height())},n.prototype._autoCalculate=function(){},n.prototype._setOption=function(n,r){var i=this,s=i.options,o=s[n];if(n==="disabled")i._handleDisabledOption(r,i.element),e.prototype._setOption.call(this,n,r);else if(n==="value")i._trigger("beforeValueChanged",null,{newValue:r,oldValue:o})&&(e.prototype._setOption.call(this,n,r),i._set_value(r,o)),i._trigger("valueChanged",null,{newValue:r,oldValue:o});else{e.prototype._setOption.call(this,n,r),t.isPlainObject(r)&&(s[n]=t.extend({},o,r));if(s.radius==="auto"){i._autoCalculate(),i.redraw();return}i["_set_"+n]&&i["_set_"+n](r,o)}},n.prototype._set_value=function(e,t){this._setPointer()},n.prototype._set_max=function(){this._redrawMarksAndLabels(),this._set_ranges(),this._setPointer()},n.prototype._set_min=function(){this._redrawMarksAndLabels(),this._set_ranges(),this._setPointer()},n.prototype._set_width=function(){this.redraw()},n.prototype._set_height=function(){this.redraw()},n.prototype._set_isInverted=function(){this.redraw()},n.prototype._set_tickMajor=function(){this._redrawMarksAndLabels()},n.prototype._set_tickMinor=function(){this._redrawMarksAndLabels()},n.prototype._set_pointer=function(){var e=this;e.pointer&&(e.pointer.wijRemove(),e.pointer=null),e._paintPointer(),e._setPointer()},n.prototype._set_islogarithmic=function(){var e=this;e._redrawMarksAndLabels(),e._setPointer()},n.prototype._set_logarithmicBase=function(){var e=this;e._redrawMarksAndLabels(),e._setPointer()},n.prototype._set_labels=function(){this._redrawMarksAndLabels()},n.prototype._set_margin=function(e,t){e!==t&&this.redraw()},n.prototype._set_marginTop=function(e,t){this._set_margin(e,t)},n.prototype._set_marginBottom=function(e,t){this._set_margin(e,t)},n.prototype._set_marginLeft=function(e,t){this._set_margin(e,t)},n.prototype._set_marginRight=function(e,t){this._set_margin(e,t)},n.prototype._set_ranges=function(){var e=this;e._removeRanges(),e._paintRanges(),e._resetElementPosition()},n.prototype._set_face=function(){var e=this;e.face&&(e.face.wijRemove(),e.face=null,e._paintFace(),e._resetElementPosition())},n.prototype._clearState=function(){var e=this;e.labels=[],e.majorMarks=[],e.minorMarks=[],e.face=null,e.pointer=null},n.prototype._resetElementPosition=function(e){var n=this;e&&n.ranges&&t.each(n.ranges,function(e,t){t.toFront()}),n.majorMarks&&t.each(n.majorMarks,function(e,t){t.toFront()}),n.minorMarks&&t.each(n.minorMarks,function(e,t){t.toFront()}),n.labels&&t.each(n.labels,function(e,t){t.toFront()}),n.pointer&&n.pointer.toFront(),n.cap&&n.cap.toFront()},n.prototype._redrawMarksAndLabels=function(){var e=this;e._removeMarksAndLabels(),e._drawMarksAndLabels()},n.prototype._removeMarksAndLabels=function(){var e=this;t.each(e.labels,function(t,n){n.wijRemove(),e.labels[t]=null}),t.each(e.majorMarks,function(t,n){n.wijRemove(),e.majorMarks[t]=null}),t.each(e.minorMarks,function(t,n){n.wijRemove(),e.minorMarks[t]=null})},n.prototype._drawMarksAndLabels=function(){var e=this;e.labels=[],e.majorMarks=[],e.minorMarks=[],e._paintMarks()},n.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},n.prototype._createDisabledDiv=function(e){var n=this,r=n.options,i=e||n.element,s=i.offset(),o=r.width||i.outerWidth(),u=r.height||i.outerHeight(),a;return a=t("<div></div>").css({"z-index":"99999",position:"absolute",width:o,height:u,left:s.left,top:s.top}),Raphael.vml&&a.addClass(r.stateDisabled).css("background-color","#fff"),a},n.prototype._triggerPainted=function(){return this._trigger("painted")},n.prototype._draw=function(){var e=this,n=e.options;e.pointer=null,e._innerBbox={width:n.width-n.marginLeft-n.marginRight,height:n.height-n.marginTop-n.marginBottom,left:n.marginLeft,top:n.marginTop},e.face=e._paintFace(),e.ranges&&e._removeRanges(),e._paintRanges(),e._drawMarksAndLabels(),e._paintPointer(),e.pointer&&(e._setOffPointerValue(),e._setPointer()),t.wijraphael.clearRaphaelCache(),e._triggerPainted()},n.prototype.redraw=function(){var e=this,t=e.options;e.element.empty(),this._clearState(),e.canvas=Raphael(e.element[0],t.width,t.height),e._draw()},n.prototype.destroy=function(){var t=this;t._unbindEvents(t.majorMarks),t._unbindEvents(t.minorMarks),t._unbindEvents(t.labels),t.element.removeClass("ui-widget").empty(),t.disabledDiv&&(t.disabledDiv.remove(),t.disabledDiv=null),e.prototype.destroy.call(this)},n.prototype.getCanvas=function(){return this.canvas},n.prototype._percentage=function(){var e=this,t=e.options,n=t.max,r=t.min,i=t.value;return isNaN(i)?0:n===r?1:(i-r)/(n-r)},n.prototype._valueToLogical=function(e){var t=this,n=t.options,i=n.min,s=n.max,o=n.logarithmicBase,u,a;return e<i?0:s<e?1:(u=(e-i)/(s-i),n.islogarithmic?a=r.log(1+(o-1)*u,n.logarithmicBase):a=u,a)},n.prototype._logicalToValue=function(e){var t=this,n=t.options,r=n.max,i=n.min,s;if(e<0)return i;if(1<=e)return r;if(!n.islogarithmic)s=e;else{if(n.logarithmicBase<=1)return n.min;s=(Math.pow(n.logarithmicBase,e)-1)/(n.logarithmicBase-1)}return i+(r-i)*s},n.prototype._bindClickEvents=function(e){var n=this;t.each(e,function(e,r){t(r.node).bind("click."+n.widgetName,function(e){n._trigger("click",e,{ele:r})})})},n.prototype._unbindEvents=function(e){var n=this;t.each(e,function(e,r){t(r.node).unbind("."+n.widgetName)})},n.prototype._setOffPointerValue=function(){},n.prototype._setPointer=function(){},n.prototype._paintPointer=function(){},n.prototype._paintFace=function(){},n.prototype._paintRanges=function(){var e=this,n=e.options,r=n.ranges||[];e.ranges=[],t.each(r,function(t,n){e._paintRange(n)})},n.prototype._paintRange=function(e){},n.prototype._removeRanges=function(){var e=this;t.each(e.ranges,function(t,n){n.wijRemove(),e.ranges[t]=null})},n.prototype._paintMarks=function(){var e=this,n=e.options,i=r.generateValues,s=i(n.min,n.max,n.tickMajor.interval),o=i(n.min,n.max,n.tickMinor.interval),u=n.labels,a=u.visible;n.tickMajor.visible&&t.each(s,function(t,r){e.majorMarks.push(e._paintMark(r,n.tickMajor,!0)),a&&e.labels.push(e._paintLabel(r,u))}),n.tickMinor.visible&&t.each(o,function(r,i){var o=!1;t.each(s,function(e,t){if(i===t)return o=!0,!1}),o||e.minorMarks.push(e._paintMark(i,n.tickMinor,!1))}),e._bindClickEvents(e.majorMarks),e._bindClickEvents(e.minorMarks),e._bindClickEvents(e.labels)},n.prototype._paintMark=function(e,t,n){},n.prototype._paintLabel=function(e,t){},n}(e.wijmoWidget);e.WijmoGauge=i,i.prototype.options=t.extend({},e.wijmoWidget.prototype.options,{value:0,max:100,min:0,width:600,height:400,tickMajor:{position:"inside",style:{fill:"#1E395B",stroke:"none"},factor:2,visible:!0,marker:"rect",offset:0,interval:10},tickMinor:{position:"inside",style:{fill:"#1E395B",stroke:"none"},factor:1,visible:!1,marker:"rect",offset:0,interval:5},pointer:{length:1,style:{fill:"#1E395B",stroke:"#1E395B"},width:8,offset:0,shape:"tri",visible:!0,template:null},islogarithmic:!1,logarithmicBase:10,labels:{format:"",style:{fill:"#1E395B","font-size":12,"font-weight":"800"},visible:!0,offset:0},animation:{enabled:!0,duration:2e3,easing:">"},face:{style:{fill:"270-#FFFFFF-#D9E3F0",stroke:"#7BA0CC","stroke-width":4},template:null},marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,ranges:[],isInverted:!1,beforeValueChanged:null,valueChanged:null,painted:null})})(wijmo||(wijmo={}));