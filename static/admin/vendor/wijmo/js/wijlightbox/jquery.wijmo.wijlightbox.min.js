var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijlightbox";!window.S&&window.swfobject&&(window.S={flash:window.swfobject});var r=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._keyDownHandler=function(e){var t=this.options,n=this,r=n.getKeyCodeEnum();if(e.keyCode&&e.keyCode===r.ESCAPE){n._isFullSize()?n._toggleFullSize():t.closeOnEscape&&n._close(),e.preventDefault();return}if(t.keyNav&&e.keyCode)switch(e.keyCode){case r.LEFT:case r.DOWN:n.back(),e.preventDefault();break;case r.RIGHT:case r.UP:n.next(),e.preventDefault();break;case r.HOME:t.groupItems.length>0&&n.show(0),e.preventDefault();break;case r.END:t.groupItems.length>0&&n.show(t.groupItems.length-1),e.preventDefault()}},n.prototype.getKeyCodeEnum=function(){if(t.ui&&t.ui.keyCode)return t.ui.keyCode;if(t.mobile&&t.mobile.keyCode)return t.mobile.keyCode;throw"keyCode object is not found"},n.prototype._create=function(){var e=this.options,n=this;window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),e.groupItems||(e.groupItems=[]),this._defaults={transAnimation:{animated:"fade",duration:400,easing:"linear"},resizeAnimation:{animated:"sync",duration:400},textShowOption:{duration:300,easing:"linear"},textHideOption:{duration:300,easing:"linear"}},this._parse(),this.container=t("<div/>").addClass("wijmo-wijlightbox "+e.wijCSS.widget+" wijmo-wijlightbox-controls-"+e.controlsPosition).css("z-index",e.zIndex).attr({tabIndex:-1,role:"dialog"}).bind("keydown.wijlightbox",t.proxy(n,"_keyDownHandler")).appendTo(document.body).hide(),this.frame=t("<div></div>").addClass(["wijmo-wijlightbox-frame",e.wijCSS.content,e.wijCSS.cornerAll,e.wijCSS.helperClearFix].join(" ")).appendTo(this.container),this.content=t("<div></div>").addClass("wijmo-wijlightbox-content").appendTo(this.frame),e.activeIndex===undefined?(typeof e.activeIndex!="number"&&e.cookie&&(e.activeIndex=parseInt(n._cookie(),10)),e.activeIndex=e.activeIndex||(e.groupItems.length?0:-1)):e.activeIndex===null&&(e.activeIndex=-1),e.activeIndex=e.activeIndex>=0&&e.groupItems[e.activeIndex]||e.activeIndex<0?e.activeIndex:0,this._initClickBehavior(),this._createTimerBar(),this._createDialogButtons(),this._createCtrlButtons(),this._createText(),this._createCounter(),this._refreshCounter(),this.toolBox&&this.toolBox.find(".wijmo-wijlightbox-toolbox-button").bind({mouseover:function(){n._addState("hover",t(this))},mouseout:function(){n._removeState("hover",t(this))},mousedown:function(){n._addState("active",t(this))},mouseup:function(){n._removeState("active",t(this))}}),this._groupMode()&&this._createNavButtons(),this._initHoverBehavior(),this.container.width(this.frame.outerWidth())},n.prototype.destroy=function(){var e=this.options,n=this;return this._hideWaiting(),this._hideOverlay(),e.cookie&&this._cookie(null,e.cookie),this.container.remove(),t.Widget.prototype.destroy.apply(n,arguments),n},n.prototype._setOption=function(e,n){t.Widget.prototype._setOption.apply(this,arguments);switch(e){case"groupItems":this.options.activeIndex>=n.length?this.show(n.length-1):this.options.activeIndex<0&&n.length?this.show(0):this.show(this.options.activeIndex);break;case"activeIndex":this.show(n);break;case"textPosition":this._resetText();break;case"clickPause":this._initClickBehavior();break;case"showNavButtons":this._createNavButtons();break;case"showControlsOnHover":this._initHoverBehavior()}},n.prototype._initClickBehavior=function(){var e=this.options,n=this;this.content.unbind("click"),e.clickPause?this._groupMode()&&this.content.click(function(){n[n.isPlaying()?"stop":"play"]()}):this._groupMode()&&this.content.click(function(r){if(n.isPlaying())return!1;var i=t.extend({},t(this).offset(),{width:t(this).outerWidth(!0),height:t(this).outerHeight(!0)});r.pageX>=i.left&&r.pageX<i.left+i.width/2?n.backBtn.hasClass(e.wijCSS.stateDisabled)||n.back():n.nextBtn.hasClass(e.wijCSS.stateDisabled)||n.next()})},n.prototype._initHoverBehavior=function(){var e=this.options,t=this;this.frame.unbind(".wijlightbox"),e.showControlsOnHover&&this.frame.bind({"mouseenter.wijlightbox":function(){if(t.container.data("moving.wijlightbox"))return!1;t._showAccessories(!0)},"mouseleave.wijlightbox":function(){if(t.container.data("moving.wijlightbox"))return!1;t._hideAccessories(!0)},"mousemove.wijlightbox":function(){t.container.data("moving.wijlightbox")===!1&&t.container.data("accessvisible.wijlightbox")===!1&&t.frame.trigger("mouseenter")}})},n.prototype._getPlugins=function(){var e=this.container.data("plugins.wijlightbox"),n,r,i;return e||(e={},window.navigator.plugins&&window.navigator.plugins.length?(n=[],t.each(window.navigator.plugins,function(e,t){n.push(t.name)}),n=n.join(","),i=n.indexOf("Flip4Mac")>-1,e={fla:n.indexOf("Shockwave Flash")>-1,qt:n.indexOf("QuickTime")>-1,wmp:!i&&n.indexOf("Windows Media")>-1,f4m:i}):(r=function(e){var t;try{t=new ActiveXObject(e)}catch(n){}return!!t},e={fla:r("ShockwaveFlash.ShockwaveFlash"),qt:r("QuickTime.QuickTime"),wmp:r("wmplayer.ocx"),f4m:!1}),this.container.data("plugins.wijlightbox",e)),e},n.prototype._sanitizeSelector=function(e){return e.replace(/:/g,"\\:")},n.prototype._getFragmentId=function(e){var n=/^#.+/,r=t(e).attr("href")||"",i=r.split("#")[0],s=t("base")[0];return i&&(i===window.location.toString().split("#")[0]||s&&i===s.attributes.href)&&(r=e.hash,e.href=r),n.test(r)?this._sanitizeSelector(r):""},n.prototype._parseLink=function(e){var n=this,r=this.options,i=t(e),s={href:undefined,player:undefined,img:undefined,gallery:undefined},o,u,a,f,l=["href","player","title","alt","height","width","gallery","wijvideosrc"];if(i.length>0&&i[0].tagName.toLowerCase()==="a"){o=i.attr("rel"),t.each(l,function(e,t){s[t]=i.attr(t)||""});if(!s.href)return;s.player||(s.player=r.player||n._getPlayerName(s.href)),u=i.find("img"),u&&u.length===0&&(u=i),u&&u.length>=1&&(t.each(["title","alt"],function(e,t){s[t]=u.attr(t)||s[t]}),s.img=u),o&&(a=o.match(/\[(.*?)\]/),a&&(s.gallery=a[1]||s.gallery),t.each(o.split(";"),function(e,t){var n=t.match(/\s*([a-z_]*?)\s*=\s*(.+)\s*/);n&&(s[n[1]]=n[2])})),s.player==="inline"&&(s.href=n._getFragmentId(e)),s.gallery?(f=r.groupItems.length,r.groupItems[f]=s,i.bind({click:function(e){return e.stopPropagation(),e.preventDefault(),r.disabled||n._open(u,f),!1}})):i.bind({click:function(e){return e.stopPropagation(),e.preventDefault(),r.disabled||n._open(u,s),!1}})}},n.prototype._parse=function(){var e=this;this._parseLink(this.element),this.element.find('a[rel^="wijlightbox"], a[rel^="lightbox"]').each(function(t,n){e._parseLink(n)})},n.prototype._showAccessories=function(e){this.container.data("accessvisible.wijlightbox",!0),this._showNavButtons(e),this._showToolboxButtons(e),this._showCounter(e)},n.prototype._hideAccessories=function(e){this.container.data("accessvisible.wijlightbox",!1),this._hideNavButtons(e),this._hideToolboxButtons(e),this._hideCounter(e)},n.prototype._groupMode=function(){var e=this.options;return e.groupItems&&e.groupItems.length>1},n.prototype._resetText=function(){this._removeText(),this._createText()},n.prototype._createText=function(e){var n=this,r=n.options,i,s,o,u,a;if(r.textPosition==="none")return;if(this.container.find(".wijmo-wijlightbox-text").length)return;i=r.textPosition.toLowerCase(),s=t("<div></div>").addClass("wijmo-wijlightbox-text wijmo-wijlightbox-text-"+i+" "+r.wijCSS.content+" "+r.wijCSS.helperClearFix),u=t("<h3></h3>").addClass("wijmo-wijlightbox-title wijmo-wijlightbox-title-"+i+" "+r.wijCSS.helperClearFix).appendTo(s),a=t("<p></p>").addClass("wijmo-wijlightbox-detail wijmo-wijlightbox-detail-"+i+" "+r.wijCSS.helperClearFix).appendTo(s);if(r.textPosition==="inside")s.addClass(r.wijCSS.content+" "+r.wijCSS.helperClearFix).width(this.frame.width()).appendTo(this.frame);else if(r.textPosition==="outside")s.addClass([r.wijCSS.content,r.wijCSS.cornerAll,r.wijCSS.helperClearFix].join(" ")).width(this.frame.width()).appendTo(this.container);else if(r.textPosition==="overlay"||r.textPosition==="titleOverlay")o=t("<div></div>").addClass("wijmo-wijlightbox-mask wijmo-wijlightbox-mask-"+i+" "+r.wijCSS.helperClearFix).width(this.frame.width()).appendTo(this.frame),s.width(this.frame.width()).appendTo(this.frame),r.textPosition==="titleOverlay"&&s.bind({mouseenter:function(){o.stop(),s.stop();var e=u.outerHeight(!0)+a.outerHeight(!0),i=t.extend({},n._defaults.textShowOption,r.textShowOption,{queue:!1});o.animate({height:e},i),s.animate({height:e},i)},mouseleave:function(){o.stop(),s.stop();var e=u.height(),i=t.extend({},n._defaults.textHideOption,r.textHideOption,{queue:!1});o.animate({height:e},i),s.animate({height:e},i)}});this._refreshText(e)},n.prototype._removeText=function(){this.container.find(".wijmo-wijlightbox-text,.wijmo-wijlightbox-mask").remove()},n.prototype._getActiveItem=function(){var e=this.options;return e.groupItems&&e.groupItems.length&&e.activeIndex>=0&&e.activeIndex<e.groupItems.length?e.groupItems[e.activeIndex]:null},n.prototype._refreshText=function(e){var n=this,r=this.options,i,s,o,u,a;if(r.textPosition==="none")return;i=this.container.data("item.wijlightbox")||this._getActiveItem();if(!i)return;s=this.container.find(".wijmo-wijlightbox-text"),o=this.container.find(".wijmo-wijlightbox-title"),u=this.container.find(".wijmo-wijlightbox-detail"),a=this.container.find(".wijmo-wijlightbox-mask"),a.stop(),s.stop(),o.html(i.title),u.html(i.alt),r.textPosition==="outside"&&s.width(this.frame.width());var f=o.outerHeight(!0),l=u.outerHeight(!0),c=t.extend({},n._defaults.textShowOption,r.textShowOption,{queue:!1});if(r.textPosition==="overlay"||r.textPosition==="titleOverlay"){var h=f+(r.textPosition==="overlay"?l:0);s.height(0),a.height(0),s.animate({height:h},c),a.animate({height:h},c)}else e?s.height(f+l):(s.height(0),s.animate({height:f+l},c))},n.prototype._addState=function(e,t){t.is(":not(."+this.options.wijCSS.stateDisabled+")")&&t.addClass("ui-state-"+e)},n.prototype._removeState=function(e,t){t.removeClass("ui-state-"+e)},n.prototype._createNavButtons=function(){var e=this,n=this.options;if(!n.showNavButtons||!this._groupMode()){this._removeNavButtons();return}this.backBtn||(this.backBtn=t("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-prev "+n.wijCSS.stateDefault+" "+(n.controlsPosition==="inside"?n.wijCSS.cornerRight:n.wijCSS.cornerLeft)).append("<span class='"+n.wijCSS.icon+" "+n.wijCSS.iconArrowLeft+"'></span>").hide().appendTo(this.frame).bind({click:function(){return t(this).hasClass(n.wijCSS.stateDisabled)||e.back(),!1},mouseover:function(){e._addState("hover",t(this))},mouseout:function(){e._removeState("hover",t(this))},mousedown:function(){e._addState("active",t(this))},mouseup:function(){e._removeState("active",t(this))}})),this.nextBtn||(this.nextBtn=t("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-next "+n.wijCSS.stateDefault+" "+(n.controlsPosition==="inside"?n.wijCSS.cornerLeft:n.wijCSS.cornerRight)).append("<span class='"+n.wijCSS.icon+" "+n.wijCSS.iconArrowRight+"'></span>").hide().appendTo(this.frame).bind({click:function(){return t(this).hasClass(n.wijCSS.stateDisabled)||e.next(),!1},mouseover:function(){e._addState("hover",t(this))},mouseout:function(){e._removeState("hover",t(this))},mousedown:function(){e._addState("active",t(this))},mouseup:function(){e._removeState("active",t(this))}}))},n.prototype._removeNavButtons=function(){this.backBtn&&(this.backBtn.remove(),this.backBtn=undefined),this.nextBtn&&(this.nextBtn.remove(),this.nextBtn=undefined)},n.prototype._refreshNavButtons=function(){var e=this.options,t;this.backBtn&&(t=e.activeIndex===0?"addClass":"removeClass",this.backBtn[t](e.wijCSS.stateDisabled)),this.nextBtn&&(t=e.activeIndex>=e.groupItems.length-1?"addClass":"removeClass",this.nextBtn[t](e.wijCSS.stateDisabled))},n.prototype._showNavButtons=function(e){if(this.isPlaying())return;this.container.find(".wijmo-wijlightbox-button").stop(!0,!0).fadeIn(e?600:0,function(){t(this).css("opacity","")})},n.prototype._hideNavButtons=function(e){this.container.find(".wijmo-wijlightbox-button").stop(!0,!0).fadeOut(e?600:0)},n.prototype._createToolbox=function(){this.toolBox||(this.toolBox=t("<div></div>").addClass("wijmo-wijlightbox-toolbox").appendTo(this.frame))},n.prototype._showToolboxButtons=function(e){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(!0,!0).fadeIn(e?600:0,function(){t(this).css("opacity","")})},n.prototype._hideToolboxButtons=function(e){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(!0,!0).fadeOut(e?600:0)},n.prototype._createCtrlButtons=function(){var e=this,n=this.options,r=n.wijCSS;if(!n.ctrlButtons||n.ctrlButtons.length===0||!this._groupMode()){this._removeCtrlButtons();return}this._createToolbox();var i=n.ctrlButtons.split("|");i.length===1&&i[0]===n.ctrlButtons&&(i=n.ctrlButtons.split(",")),t.each(i,function(i,s){s=t.trim(s),s==="play"&&!this.playBtn?e.playBtn=t("<a href='#'/>").addClass(["wijmo-wijlightbox-toolbox-button"," wijmo-wijlightbox-toolbox-button-play ",r.stateDefault,r.cornerAll].join(" ")).append("<span class='"+r.icon+" "+r.iconPlay+"'></span>").hide().click(function(){return e.isPlaying()?e.stop():(n.activeIndex>=n.groupItems.length-1&&e.show(0),e.play()),!1}):s==="stop"&&!this.stopBtn&&(e.stopBtn=t("<a href='#'/>").addClass(["wijmo-wijlightbox-toolbox-button","wijmo-wijlightbox-toolbox-button-stop",r.stateDefault,r.stateDisabled,r.cornerAll].join(" ")).append("<span class='"+r.icon+" "+r.iconStop+"'></span>").hide().click(function(){return e.isPlaying()&&(e.stop(),e.show(0)),!1}))}),this.stopBtn&&this.stopBtn.appendTo(this.toolBox),this.playBtn&&this.playBtn.appendTo(this.toolBox)},n.prototype._removeCtrlButtons=function(){this.playBtn&&(this.playBtn.remove(),this.playBtn=undefined),this.stopBtn&&(this.stopBtn.remove(),this.stopBtn=undefined)},n.prototype._refreshCtrlButtons=function(){var e=this.options.wijCSS;if(this.playBtn){var t=this.playBtn.find("."+e.icon);t&&(t.removeClass(e.iconPause+" "+e.iconPlay),t.addClass(this.isPlaying()?e.iconPause:e.iconPlay))}this.stopBtn&&this.stopBtn[this.isPlaying()?"removeClass":"addClass"](e.stateDisabled)},n.prototype._createDialogButtons=function(){var e=this,n=this.options,r;if(!n.dialogButtons||n.dialogButtons.length===0){this._removeDialogButtons();return}this._createToolbox(),r=n.dialogButtons.split("|"),r.length===1&&r[0]===n.dialogButtons&&(r=n.dialogButtons.split(",")),t.each(r,function(r,i){i=t.trim(i),i==="close"&&!this.closeBtn?e.closeBtn=t("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-close "+n.wijCSS.stateDefault+" "+n.wijCSS.cornerAll).append("<span class='"+n.wijCSS.icon+" "+n.wijCSS.iconClose+"'></span>").hide().click(function(){return e._close(),!1}):i==="fullSize"&&!this.fullBtn&&(e.fullBtn=t("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-fullsize "+n.wijCSS.stateDefault+" "+n.wijCSS.cornerAll).append("<span class='"+n.wijCSS.icon+" "+n.wijCSS.iconArrow4Diag+"'></span>").hide().click(function(){return e._toggleFullSize(),!1}))}),this.closeBtn&&this.closeBtn.appendTo(this.toolBox),this.fullBtn&&this.fullBtn.appendTo(this.toolBox),this.btnSep||(this.btnSep=t("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-separator").appendTo(this.toolBox))},n.prototype._removeDialogButtons=function(){this.closeBtn&&(this.closeBtn.remove(),this.closeBtn=undefined),this.fullBtn&&(this.fullBtn.remove(),this.fullBtn=undefined)},n.prototype._refreshDialogButtons=function(){var e=this.options.wijCSS;if(this.fullBtn){var t=this.fullBtn.find("."+e.icon);t&&(t.removeClass(e.iconArrow4Diag+" "+e.iconNewWin),t.addClass(this._isFullSize()?e.iconNewWin:e.iconArrow4Diag))}},n.prototype._createTimerBar=function(){var e=this,n=e.options;if(!n.showTimer||!e._groupMode()){e._removeTimerBar();return}e._createToolbox(),e.timerBar||(e.timerBar=t("<div></div>").addClass("wijmo-wijlightbox-timerbar "+n.wijCSS.content+" ui-priority-secondary "+n.wijCSS.cornerAll).appendTo(e.toolBox),e.timerMeter=t("<div></div>").addClass("wijmo-wijlightbox-timermeter ui-progressbar-value "+n.wijCSS.content+" "+n.wijCSS.cornerAll).appendTo(e.toolBox))},n.prototype._removeTimerBar=function(){this.timerMeter&&(this.timerMeter.remove(),this.timerMeter=undefined),this.timerBar&&(this.timerBar.remove(),this.timerBar=undefined)},n.prototype._createCounter=function(){var e=this,n=e.options;if(!n.showCounter||!e._groupMode()){e._removeCounter();return}e.counter||(e.counter=t("<div></div>").addClass("wijmo-wijlightbox-counter "+n.wijCSS.stateDefault+" "+(n.controlsPosition==="inside"?n.wijCSS.cornerTL:n.wijCSS.cornerAll)).hide().appendTo(e.frame))},n.prototype._removeCounter=function(){this.counter&&(this.counter.remove(),this.counter=undefined)},n.prototype._refreshCounter=function(e){var n=this,r=this.options,i="";if(!this.counter||!this._groupMode())return;this.counter.empty();if(r.showCounter&&r.groupItems.length>1&&this.counter){e===undefined&&(e=r.activeIndex);var s=r.groupItems.length;if(r.counterType==="sequence"){var o=0,u=s,a=parseInt(r.counterLimit,10)||0;if(a>=2&&a<s){var f=Math.floor(a/2);o=Math.min(u-a,Math.max(o,e-f)),u=Math.min(u,o+a)}while(o!==u)t("<a></a>").addClass("wijmo-wijlightbox-counter-item "+r.wijCSS.content+" "+r.wijCSS.stateDefault+(o===e?" wijmo-wijlightbox-counter-active "+r.wijCSS.stateActive:"")).text((++o).toString()).appendTo(this.counter);this.counter.find("a").click(function(e,r){return t(this).hasClass("wijmo-wijlightbox-counter-active")?!1:(n.show(parseInt(t(this).text(),10)-1),!1)})}else{var l=r.counterFormat||"[i] of [n]";i=l.replace("[i]",e+1),i=i.replace("[n]",s),t("<span></span>").text(i).appendTo(this.counter)}}},n.prototype._showCounter=function(e){this.container.find(".wijmo-wijlightbox-counter").stop(!0,!0).fadeIn(e?600:0,function(){t(this).css("opacity","")})},n.prototype._hideCounter=function(e){this.container.find(".wijmo-wijlightbox-counter").stop(!0,!0).fadeOut(e?600:0)},n.prototype._cookie=function(e,n){var r=this.cookie||(this.cookie=this.options.cookie.name);return t.cookie.apply(null,[r].concat(t.makeArray(arguments)))},n.prototype._showOverlay=function(){if(this.container.data("overlay.wijlightbox"))return;this.container.data("overlay.wijlightbox",new t.wijmo.wijlightbox.overlay(this))},n.prototype._hideOverlay=function(){var e=this.container.data("overlay.wijlightbox");if(!e)return;e.close(),this.container.removeData("overlay.wijlightbox")},n.prototype._hasOverlay=function(){return this.container.hasData("overlay.wijlightbox")},n.prototype._showWaiting=function(){if(this.container.data("waiting.wijlightbox"))return;this.container.data("waiting.wijlightbox",new t.wijmo.wijlightbox.overlay(this,!0))},n.prototype._hideWaiting=function(){var e=this.container.data("waiting.wijlightbox");if(!e)return;e.close(),this.container.removeData("waiting.wijlightbox")},n.prototype._hasWaiting=function(){return this.container.hasData("waiting.wijlightbox")},n.prototype._getUrl=function(e){var t=this.options,n=typeof e=="string"?e:e.href,r=t.rootUrl;return r&&r.length>0&&(r.indexOf("//")===-1&&(r=window.location.protocol+"//"+window.location.host+(r.startsWith("/")?"":"/")+r),r.substr(r.length-1,1)!=="/"&&(r+="/"),n=r+(n.substr(0,1)==="/"?n.substr(1):n)),n},n.prototype._preload=function(){var e=this.options,t;for(t=Math.max(0,e.activeIndex);t<Math.min(e.activeIndex+5,e.groupItems.length);t++)e.groupItems[t].image||(e.groupItems[t].image=new Image,e.groupItems[t].image.src=this._getUrl(e.groupItems[t]))},n.prototype._slideAnimate=function(e,n,r){var i=["position","top","bottom","left","right","width","height"],s=t.setMode(n,e.mode||"show"),o=s==="show",u=e.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};t.save(n,i),n.show(),l=e.distance||n[a==="top"?"outerHeight":"outerWidth"](!0),t.createWrapper(n).css({overflow:"hidden"}),o&&n.css(a,f?isNaN(l)?parseInt("-"+l):-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,n.animate(c,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){s==="hide"&&n.hide(),t.restore(n,i),t.removeWrapper(n),r()}})},n.prototype._slideTo=function(e,n,r,i,s){var o=this.options,u=this,a=e.getElement(),f,l,c,h,p,d,v,m;a.parent().is(".wijmo-wijlightbox-aniwrapper")?f=a.parent():(f=t.createWrapper(a).css({overflow:"hidden"}),f.removeClass("ui-effects-wrapper"),f.addClass("wijmo-wijlightbox-aniwrapper")),f.parent().is(".wijmo-wijlightbox-aniwrapper")?l=f.parent():(l=t.createWrapper(f).css({overflow:"hidden"}),l.removeClass("ui-effects-wrapper"),l.addClass("wijmo-wijlightbox-aniwrapper")),c=o.slideDirection||"horizontal",h=a.outerWidth(),p=a.outerHeight(),c==="horizontal"?(a.width(h).css("float",i?"left":"right"),f.width(2*h).css({left:i?0:-1*h,position:"absolute"})):(a.height(p),f.width(h).css({top:i?0:-1*p,position:"absolute"}).height(2*p)),n.appendTo(f),d=n.getElement(),c==="horizontal"?d.width(h).css("float",i?"left":"right"):d.height(p),this.container.data("animating.wijlightbox",!0),v=function(){a=f.children(":last");while(a.parent().is(".wijmo-wijlightbox-aniwrapper"))a.parent().replaceWith(a);a.css({"float":"",width:"",height:""}),o.autoSize&&!u._isFullSize()?u._resize(s):(t.isFunction(s)&&s.apply(u),u._refreshText())},m={mode:"hide",direction:c==="horizontal"?i?"left":"right":i?"up":"down",easing:r.easing,distance:c==="horizontal"?h:p,duration:r.duration},t.effects?f.effect("slide",m,v):u._slideAnimate(m,f,v)},n.prototype._moveFrom=function(e,n,r){var i=this,s=this.options,o;t.isFunction(n)?(r=n,n=t.extend({},i._defaults.resizeAnimation,s.resizeAnimation)):n=t.extend({},i._defaults.resizeAnimation,s.resizeAnimation,n),i._removeText();if(n.animated==="none"||n.duration<=0){i._createText(),t.isFunction(r)&&r.apply(i),this.container.data("moving.wijlightbox",!1);return}o=t.extend({width:i.frame.width(),height:i.frame.height()},i.container.offset()),i.frame.width(e.width).height(e.height),i.container.css({left:e.left,top:e.top,width:i.frame.outerWidth(),position:"absolute",opacity:""}),i._moveTo(o,n,function(){i.frame.width(o.width),i.container.width(i.frame.outerWidth()),i._createText(),i.container.data("moving.wijlightbox",!1),t.isFunction(r)&&r.apply(i)})},n.prototype._moveTo=function(e,n,r){var i=this,s=this.options;t.isFunction(n)?(r=n,n=t.extend({},i._defaults.resizeAnimation,s.resizeAnimation)):n=t.extend({},i._defaults.resizeAnimation,s.resizeAnimation,n);var o=n.duration/2,u=n.animated,a=i._isOpen(),f=u==="wh"?{left:e.left,top:undefined}:{top:e.top},l=u==="wh"?{top:e.top,left:undefined}:{left:e.left},c=u==="wh"?{width:e.width,height:undefined}:{height:e.height},h=u==="wh"?{height:e.height,width:undefined}:{width:e.width};if(u==="wh"||u==="hw"){a&&i.container.animate(f,{duration:o,easing:n.easing,queue:!0}),i.frame.animate(c,{duration:o,easing:n.easing,complete:function(){a&&i.container.animate(l,{duration:o,easing:n.easing,queue:!0}),i.frame.animate(h,{duration:o,easing:n.easing,complete:function(){i.container.data("moving.wijlightbox",!1),t.isFunction(r)&&r.apply(i)}})}});return}a&&i.container.animate({left:e.left,top:e.top},{duration:n.duration,easing:n.easing,queue:!0}),i.frame.animate({width:e.width,height:e.height,opacity:1},{duration:n.duration,easing:n.easing,complete:function(){i.container.data("moving.wijlightbox",!1),t.isFunction(r)&&r.apply(i)}})},n.prototype.show=function(e){return this._show(e),this},n.prototype._resize=function(e){var n=this,r=t.extend({},n.container.offset(),{width:n.frame.width(),height:n.frame.height()});n._size(),n._isOpen()&&n._position(),n._moveFrom(r,e)},n.prototype._onAfterShow=function(){var e=this,t=this.options,n;e._refreshNavButtons(),e.container.data("animating.wijlightbox",!1),t.modal||e._hideOverlay(),n={index:t.activeIndex,item:t.groupItems[t.activeIndex]},e._trigger("show",null,n),e._startTimer()},n.prototype._show=function(e,n,r){var i=this,s=this.options,o,u;if(this.container.data("showing.wijlightbox"))return o=[function(){i._show(e,n,r)}],this.container.queue("showqueue",o),this;u=s.activeIndex;if(!t.isPlainObject(e)){u=e;if(u<0||u>=s.groupItems.length)return this;e=s.groupItems[u]}e&&this.container.data("item.wijlightbox",e),this._groupMode()&&this._preload(),t.isFunction(n)&&(r=n,n=undefined),r||(r=i._onAfterShow);var a={index:u,item:e};if(i._trigger("beforeShow",null,a)===!1)return this;this.container.data("showing.wijlightbox",!0);var f=function(){t.isFunction(r)&&r.apply(i),i.container.data("showing.wijlightbox",!1),i.container.dequeue("showqueue"),i.container.clearQueue("showqueue")};i._refreshCounter(u);var l=this.container.data("player.wijlightbox"),c,h=function(){i.container.data("playerwidth.wijlightbox",c.width),i.container.data("playerheight.wijlightbox",c.height);var e=t.extend({},i._defaults.transAnimation,s.transAnimation);if(s.activeIndex===u||e.animated==="none"||e.duration<=0||!i._isOpen()){s.activeIndex=u,l&&l.remove(),c.appendTo(i.content),i._refreshText(),f();return}s.cookie&&i._cookie(s.activeIndex,s.cookie);if(e.animated==="slide")n=n===undefined?u>s.activeIndex:n,i._slideTo(l,c,e,n,f),s.activeIndex=u;else{s.activeIndex=u;var r=function(){c&&(c.appendTo(i.content,!0),c.fadeIn(e.duration,f))};t.browser.msie&&i.frame.trigger("mouseleave");var o=function(){l&&l.remove(),s.autoSize&&!i._isFullSize()?i._resize(r):(r(),i._refreshText())};l?l.fadeOut(e.duration*.4,o):o()}};return c=this._createPlayer(e,h),this},n.prototype.next=function(){var e=this.options;if(!this._groupMode())return!1;var t=e.activeIndex+1;return e.loop&&(t%=e.groupItems.length),t<e.groupItems.length?(this._show(t,!0),!0):!1},n.prototype.back=function(){var e=this.options;if(!this._groupMode())return!1;var t=e.activeIndex-1;return e.loop&&(t=t<0?e.groupItems.length-1:t),t>=0?(this._show(t,!1),!0):!1},n.prototype.adjustPosition=function(){this._position()},n.prototype.isPlaying=function(){return!!this.container.data("playing.wijlightbox")},n.prototype._startTimer=function(){if(!this.isPlaying()||!this._groupMode())return;var e=this.options,t=this,n;e.showTimer===!0?(this.timerMeter||this._createTimerBar(),n=this.timerBar.width(),t.timerMeter.width("0"),t.timerMeter.animate({width:n},e.delay,null,function(){t.isPlaying()&&!t.next()&&t.stop()})):window.setTimeout(function(){t.isPlaying()&&!t.next()&&t.stop()},e.delay)},n.prototype.play=function(){if(!this._groupMode())return!1;this.container.data("playing.wijlightbox")||this.container.data("playing.wijlightbox",!0),this._refreshCtrlButtons(),this._hideNavButtons(),this._startTimer()},n.prototype.stop=function(){this.container.removeData("playing.wijlightbox"),this._refreshCtrlButtons(),this._removeTimerBar()},n.prototype._size=function(e,n){var r=this.options,i=r.width,s=r.height,o=r.autoSize?this.container.data("playerwidth.wijlightbox")||i:i,u=r.autoSize?this.container.data("playerheight.wijlightbox")||s:s,a,f=u/o;if(typeof e=="boolean")n=e;else if(t.isPlainObject(e)&&"width"in e&&"height"in e)i=e.width,s=e.height;else{a=this.container.data("player.wijlightbox"),r.autoSize&&a&&a.name==="img"&&(o>i&&(o=i,u=Math.round(i*f)),u>s&&(u=s,o=Math.round(s/f))),i=o,s=u;if(n)return{width:i,height:s}}this.frame.width(i).height(s),this.container.width(this.frame.outerWidth(!0))},n.prototype._position=function(){var e=this.options,n=[],r=[0,0],i,s=e.position;if(s){if(typeof s=="string"||typeof s=="object"&&"0"in s)n=s.split?s.split(" "):[s[0],s[1]],n.length===1&&(n[1]=n[0]),t.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),s={my:n.join(" "),at:n.join(" "),offset:r.join(" ")};s=t.extend({},e.position,s)}i=this.container.is(":visible"),i||this.container.show(),this.container.css({top:0,left:0}).position(s),i||this.container.hide()},n.prototype._getRelRect=function(e){var n;return e&&(t.isPlainObject(e)&&"left"in e&&"top"in e&&"width"in e&&"height"in e?n=t.merge({},e):e=t(e),e.jquery&&e.length&&(n=t.extend({},e.offset(),{width:e.width(),height:e.height()}))),n},n.prototype._close=function(e){var n=this.options,r=this,i,s,o;if(!this._isOpen())return;s={rel:e};if(!1===this._trigger("beforeClose",null,s))return;e=s.rel,!e&&this._groupMode()&&(e=n.groupItems[n.activeIndex].img),this.container.data("moving.wijlightbox",!0),this._hideAccessories(!1),this._hideWaiting(),this._hideOverlay(),this.stop(),o=function(){r._removePlayer(),r.container.hide(),r._trigger("close"),r.container.unbind("keypress.wijlightbox"),r.container.removeData("open.wijlightbox").removeData("rect.wijlightbox").removeData("moving.wijlightbox").removeData("fullsize.wijlightbox"),t(document).unbind("keydown.wijlightbox").unbind("click.wijlightbox")},i=this._getRelRect(e),i||this.container.data("rect.wijlightbox")&&(i=this.container.data("rect.wijlightbox")),this._removeText();if(i){this._moveTo(i,{animated:"sync",duration:200},o);return}return o.call(),this},n.prototype._isOpen=function(){return!!this.container.data("open.wijlightbox")},n.prototype._open=function(e,n){if(this._isOpen())return;var r=this.options,i=this;this.toolBox&&(this._isFullSize()?this.toolBox.css({top:"2px",right:"4px"}):this.toolBox.css({top:"",right:""}));var s=function(){r.modal&&i._showOverlay(),r.showControlsOnHover?this._hideAccessories(!1):this._showAccessories(!1);var n=i._getRelRect(e);i.container.css("opacity",0),i.container.show(),i._size(),i._createText(!0),i._refreshText(!0),i._position(),i.container.data("open.wijlightbox",!0);if(e&&n)i.container.data("rect.wijlightbox",n),i._moveFrom(n,{animated:"sync"});else{var s=t.extend({},i._defaults.transAnimation,r.transAnimation);s.animated==="fade"?(i.container.hide(),i.container.fadeIn(s.duration,function(){i._createText()})):i._createText(),this.container.data("moving.wijlightbox",!1)}t(document).bind("keydown.wijlightbox",t.proxy(i,"_keyDownHandler")).bind("click.wijlightbox",function(e){var n=e.target||e.srcElement;i._isOpen()&&!!r.closeOnOuterClick&&n!==i.container.get(0)&&t(n).parents().index(i.container)<0&&i._close()}),r.autoPlay&&this.play(),i._refreshNavButtons(),i._refreshDialogButtons();var u={index:r.activeIndex,item:r.groupItems[r.activeIndex]};i._trigger("show",null,u),i._trigger("open")};return this.container.data("moving.wijlightbox",!0),this._show(n,!0,s),this},n.prototype._getWinRect=function(){var e=t(window);return t.extend({width:e.width(),height:e.height()},e.offset()||{left:2,top:2})},n.prototype._resizeHandler=function(){var e=this;e._removeText(),e._size(e._getWinRect()),e._createText()},n.prototype._isFullSize=function(){return!!this.container.data("fullsize.wijlightbox")},n.prototype._toggleFullSize=function(){var e=this,n=t(window);if(!e._isOpen())return;if(this._isFullSize())e.toolBox&&e.toolBox.css({top:"",right:""}),this.container.data("fullsize.wijlightbox",!1),n.unbind("resize.wijlightbox",t.proxy(this,"_resizeHandler")),e._resize(function(){e._adjustPlayerSize(e.content.innerWidth(),e.content.innerHeight())});else{this.container.data("fullsize.wijlightbox",!0),n.bind("resize.wijlightbox",t.proxy(this,"_resizeHandler"));var r=e._getWinRect(),i=this.frame.borderSize();r.width-=i.width,r.height-=i.height,e._removeText(),e._moveTo(r,{animated:"sync"},function(){e.toolBox&&e.toolBox.css({top:"2px",right:"4px"}),e.frame.width(r.width),e.container.width(e.frame.outerWidth()),e._createText(),e._adjustPlayerSize(e.content.innerWidth(),e.content.innerHeight())})}this._refreshDialogButtons()},n.prototype._getExt=function(e){var t,n,r=/[0-9a-z]+$/i,i=e.indexOf("?");return i>-1&&(e=e.substring(0,i)),n=e.match(r),n&&(t=n[0].toLowerCase()),t},n.prototype._getPlayerName=function(e){if(e.indexOf("#")===0||e.indexOf("#")>0&&e.indexOf(document.location.href)===0)return"inline";var n=["bmp","gif","jpg","jpeg","png"],r=["swf"],i=["flv","m4v"],s=["dv","mov","moov","movie","mp4","avi","mpg","mpeg"],o=["asf","avi","mpg","mpeg","wm","wmv"],u=["mp4","mpg","mpeg","ogg","ogv"],a=this._getExt(e);if(a){if(t.inArray(a,n)>=0)return"img";if(t.inArray(a,r)>=0)return"swf";if(t.inArray(a,i)>=0)return"flv";if(t.inArray(a,o)>=0)return"wmp";if(t.inArray(a,s)>=0)return"qt";if(t.inArray(a,u)>=0)return"wijvideo"}return"iframe"},n.prototype._adjustPlayerSize=function(e,t){var n=this.container.data("player.wijlightbox");n&&n.adjustSize&&n.adjustSize(e,t)},n.prototype._removePlayer=function(){var e=this.container.data("player.wijlightbox");e&&(e.remove(),this.container.data("player.wijlightbox",null))},n.prototype._createPlayer=function(e,n,r){var i=e.player;if(!t.isFunction(t.wijmo.wijlightbox[i]))throw"unknown player "+i;var s=this,o=!1,u,a=function(){o=!0,this._hideWaiting(),t.isFunction(n)&&window.setTimeout(function(){n.apply(s)},1)},f=function(){this._hideWaiting(),t.isFunction(r)&&r.apply(s)};return u=new t.wijmo.wijlightbox[i](this,e,a,f),this.container.data("player.wijlightbox",u),window.setTimeout(function(){o===!1&&s._showWaiting()},200),u},n}(e.wijmoWidget);e.WijLightBox=r,r.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-a",iconPlay:"ui-icon-arrow-r",iconPause:"ui-icon-grid"},initSelector:":jqmData(role='wijlightbox')",textPosition:"overlay",width:600,height:400,autoSize:!0,player:"",groupItems:null,rootUrl:"",ctrlButtons:"",dialogButtons:"close",counterType:"default",counterFormat:"[i] of [n]",counterLimit:10,showCounter:!0,showNavButtons:!0,showTimer:!1,controlsPosition:"inside",showControlsOnHover:!0,clickPause:!1,keyNav:!1,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var n=t(this).css(e).offset().top;n<0&&t(this).css("top",e.top-n)}},zIndex:1e3,closeOnEscape:!0,closeOnOuterClick:!0,autoPlay:!1,delay:2e3,loop:!0,cookie:null,transAnimation:{animated:"fade",duration:400,easing:"linear"},slideDirection:"horizontal",resizeAnimation:{animated:"sync",duration:400},textShowOption:{duration:300,easing:"linear"},textHideOption:{duration:300,easing:"linear"},showMovieControls:!0,autoPlayMovies:!0,flashParams:{bgcolor:"#000000",allowfullscreen:!0},flashVars:{},flashVersion:"9.0.115",flvPlayer:"player\\player.swf",flashInstall:"player\\expressInstall.swf",beforeShow:null,show:null,open:null,beforeClose:null,close:null}),t.wijmo.registerWidget("wijlightbox",r.prototype),t.extend(t.wijmo.wijlightbox,{img:function(e,n,r,i){this.name="img",this.lightbox=e,this.item=n,this.url=this.lightbox._getUrl(n);var s=this;t("<img></img>").css({width:"auto",height:"auto",display:"none"}).appendTo(document.body).bind({load:function(){var i=t(this);s.width=n.width?parseInt(n.width,10):i.width(),s.height=n.height?parseInt(n.height,10):i.height(),i.remove(),r&&t.isFunction(r)&&r.apply(e)},error:function(){t(this).remove(),i&&t.isFunction(i)&&i.apply(e)}}).attr("src",this.url)},swf:function(e,n,r,i){this.name="swf";var s=e.options;this.id="flashhost",this.lightbox=e,this.item=n,this.url=this.lightbox._getUrl(n),this.width=n.width?parseInt(n.width,10):s.width,this.height=n.height?parseInt(n.height,10):s.height,r&&t.isFunction(r)&&r.apply(e)},iframe:function(e,n,r,i){this.name="swf",this.lightbox=e,this.item=n,this.url=this.lightbox._getUrl(n),n.width&&(this.width=parseInt(n.width,10)),n.height&&(this.height=parseInt(n.height,10)),this.$iframe=t("<iframe></iframe>").addClass("wijmo-wijlightbox-iframe").attr({frameborder:"0",marginwidth:"0",marginheight:"0",scrolling:"auto",allowtransparency:"true"}).hide().appendTo(e.content).bind("load",function(){r&&t.isFunction(r)&&r.apply(e)}).attr("src",this.url)},inline:function(e,n,r,i){this.name="inline";var s=e.options,o=s.wijCSS,u="wijmo-wijlightbox-frame "+o.content;" "+o.cornerAll+" "+o.helperClearFix,this.lightbox=e,this.item=n,this.width=n.width?parseInt(n.width,10):s.width;if(n.height)this.height=parseInt(n.height,10);else{var a=t(this.item.href).clone().show().append('<br clear="all" />').wrap('<div class="wijmo-wijlightbox '+o.widget+'">'+'<div class="'+u+'">'+'<div class="'+u+'">'+'<div class="wijmo-wijlightbox-content"> '+"</div></div></div></div>").appendTo(document.body).width(this.width);this.height=a.outerHeight(!0)+10,a.unwrap(),a.remove()}r&&t.isFunction(r)&&r.apply(e)},flv:function(e,n,r,i){this.name="flv";var s=e.options;this.id="flvhost",this.lightbox=e,this.item=n,this.url=this.lightbox._getUrl(n);var o=20;this.width=n.width?parseInt(n.width,10):s.width,this.height=n.height?parseInt(n.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&t.isFunction(r)&&r.apply(e)},wmp:function(e,n,r,i){var s=e.options,o;this.name="wmp",this.id="wmphost",this.lightbox=e,this.item=n,this.url=this.lightbox._getUrl(n),o=t.browser.msie?70:45,this.width=n.width?parseInt(n.width,10):s.width,this.height=n.height?parseInt(n.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&t.isFunction(r)&&r.apply(e)},qt:function(e,n,r,i){var s=e.options,o=16;this.name="qt",this.id="qthost",this.lightbox=e,this.item=n,this.url=this.lightbox._getUrl(n),this.width=n.width?parseInt(n.width,10):s.width,this.height=n.height?parseInt(n.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&t.isFunction(r)&&r.apply(e)},wijvideo:function(e,n,r,i){var s=e.options;this.name="wijvideo",this.id="wijvideohost",this.lightbox=e,this.item=n,this.url=this.lightbox._getUrl(n),this.wijvideosrc=!n.wijvideosrc||n.wijvideosrc===""?null:this.lightbox._getUrl(n.wijvideosrc),this.width=n.width?parseInt(n.width,10):s.width,this.height=n.height?parseInt(n.height,10):s.height,r&&t.isFunction(r)&&r.apply(e)}}),t.extend(t.wijmo.wijlightbox.img.prototype,{appendTo:function(e,n){this.$element=t("<img></img>").addClass("wijmo-wijlightbox-image").attr("src",this.url),n&&this.$element.hide(),this.lightbox.options.transAnimation&&this.lightbox.options.transAnimation.animated=="fade"?(e.children().length&&e.empty(),this.$element.prependTo(e)):this.$element.appendTo(e)},remove:function(){this.$element&&this.$element.remove()},fadeOut:function(e,t){this.$element&&this.$element.fadeOut(e,t)},fadeIn:function(e,t){this.$element&&this.$element.fadeIn(e,t)},getElement:function(){return this.$element}}),t.extend(t.wijmo.wijlightbox.swf.prototype,{appendTo:function(e){this.$container=t("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",this.id).appendTo(e);var n=this.lightbox.options,r=n.flashInstall,i=n.flashVersion,s=n.flashVars,o=n.flashParams;S.flash.embedSWF(this.item.href,this.id,"100%","100%",i,r,s,o)},remove:function(){S.flash.expressInstallCallback(),S.flash.removeSWF(this.id),this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),t.extend(t.wijmo.wijlightbox.iframe.prototype,{appendTo:function(e,t){t||this.$iframe.show()},remove:function(){this.$iframe&&this.$iframe.remove()},fadeOut:function(e,t){this.$iframe&&this.$iframe.fadeOut(e,t)},fadeIn:function(e,t){this.$iframe&&this.$iframe.fadeIn(e,t)},getElement:function(){return this.$iframe}}),t.extend(t.wijmo.wijlightbox.inline.prototype,{appendTo:function(e,n){this.$element=t(this.item.href).clone().appendTo(e),n||this.$element.show()},remove:function(){this.$element&&this.$element.remove()},fadeOut:function(e,t){this.$element&&this.$element.fadeOut(e,t)},fadeIn:function(e,t){this.$element&&this.$element.fadeIn(e,t)},getElement:function(){return this.$element}}),t.extend(t.wijmo.wijlightbox.flv.prototype,{appendTo:function(e){this.$container=t("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",this.id).appendTo(e);var n=this.lightbox.options,r="100%",i="100%",s=n.flvPlayer,o=n.flashInstall,u=n.flashVersion,a=t.extend({file:this.url,width:r,height:i,autostart:n.autoPlayMovies?"true":"false",controlbar:n.showMovieControls?"bottom":"none",backcolor:"0x000000",frontcolor:"0xCCCCCC",lightcolor:"0x557722"},n.flashVars),f=t.extend({autostart:n.autoPlayMovies?"true":"false",allowscriptaccess:"always"},n.flashParams);S.flash.embedSWF(s,this.id,r,i,u,o,a,f)},remove:function(){S.flash.expressInstallCallback(),S.flash.removeSWF(this.id),this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),t.extend(t.wijmo.wijlightbox.wmp.prototype,{appendTo:function(e){this.$container=t("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).appendTo(e);var n=this.lightbox.options,r='<object id="'+this.id+'" name="'+this.id+'" height="'+this.height+'" width="'+this.width+'"',i={autostart:n.autoPlayMovies?1:0,url:undefined,uimode:undefined,showcontrols:undefined},s;t.browser.msie?(r+=' classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6"',i.url=this.url,i.uimode=n.showMovieControls?"full":"none"):(r+=' type="video/x-ms-wmv"',r+=' data="'+this.url+'"',i.showcontrols=n.showMovieControls?1:0),r+=">";for(s in i)r+='<param name="'+s+'" value="'+i[s]+'">';r+="</object>",this.$container.html(r)},remove:function(){if(t.browser.msie)try{window[this.id].controls.stop(),window[this.id].URL="movie"+now()+".wmv",window[this.id]=function(){}}catch(e){}this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),t.extend(t.wijmo.wijlightbox.qt.prototype,{appendTo:function(e,n){this.$container=t("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).appendTo(e);var r=this.lightbox.options,i=r.autoPlayMovies?"true":"false",s=r.showMovieControls?"true":"false",o="<object",u={id:this.id,name:this.id,width:this.width,height:this.height,kioskmode:"true",classid:undefined,codebase:undefined,type:undefined,data:undefined},a,f;t.browser.msie?(u.classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",u.codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0"):(u.type="video/quicktime",u.data=this.url);for(a in u)o+=" "+a+'="'+u[a]+'"';o+=">";var l={src:this.url,scale:"aspect",controller:s,autoplay:i};for(f in l)o+='<param name="'+f+'" value="'+l[f]+'">';o+="</object>",n&&e.hide(),this.$container.html(o),n&&e.show()},remove:function(){try{document[this.id].Stop(),document[this.id]=null}catch(e){}this.$container.remove()},fadeOut:function(e,t){t.call();return},fadeIn:function(e,t){t.call();return},getElement:function(){return this.$container}}),t.extend(t.wijmo.wijlightbox.wijvideo.prototype,{appendTo:function(e){var n=this.lightbox.options;this.$container=t("<video/>").css({overflow:"hidden"}).attr({width:this.width,height:this.height,autoPlay:n.autoPlayMovies?"true":"false",controls:n.showMovieControls?"controls":""}).appendTo(e),!this.url||t("<source/>").attr({src:this.url}).appendTo(this.$container),!this.wijvideosrc||t("<source/>").attr({src:this.wijvideosrc}).appendTo(this.$container),this.$container.wijvideo({fullScreenButtonVisible:!1})},remove:function(){this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container},adjustSize:function(e,t){this.$container.wijvideo("setWidth",e),this.$container.wijvideo("setHeight",t)}}),t.extend(t.wijmo.wijlightbox,{overlay:function(e,n){this.mask=t("<div></div>").addClass(e.options.wijCSS.overlay+" wijmo-wijlightbox-overlay"+(n?" wijmo-wijlightbox-waitingoverlay":"")).appendTo(document.body).css({width:this.width(),height:this.height()}).bind("click",function(){return e._close(),!1}),t.fn.bgiframe&&this.mask.bgiframe();if(n){this.mask.css("z-index",this.zIndex);var r=t("<div></div>").addClass("wijmo-wijlightbox-waiting").css("z-index",this.zIndex+1).appendTo(this.mask);r.css({left:(this.mask.width()-r.width())/2,top:(this.mask.height()-r.height())/2})}t(window).bind("resize.wijlightbox-overlay",t.proxy(this,"resize")),window.setTimeout(function(){var e;this.mask&&(e=t.wijmo.wijlightbox.overlay,t(document).bind(e.events,function(n){if(t(n.target).zIndex()<e.zIndex)return!1}))},1)}}),t.extend(t.wijmo.wijlightbox.overlay.prototype,{mask:null,zIndex:1e3,events:t.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".wijlightbox-overlay"}).join(" "),close:function(){t(document).unbind(".wijlightbox-overlay"),t(window).unbind(".wijlightbox-overlay"),this.mask.remove(),this.mask=undefined},height:function(){var e,n;return t.browser.msie&&parseInt(t.browser.version)<7?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<n?t(window).height():e):t(document).height()},width:function(){var e,n;return t.browser.msie&&parseInt(t.browser.version)<7?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<n?t(window).width():e):t(document).width()},resize:function(){this.mask&&this.mask.css({width:this.width(),height:this.height()})}})})(wijmo||(wijmo={}));