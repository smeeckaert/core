var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n="wijexpander",r=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._setOption=function(e,n){switch(e){case"contentUrl":n?this.element.find("> ."+this.options.wijCSS.content).wijContent(n):this.element.find("> ."+this.options.wijCSS.content).html("");break;case"disabled":n?(this.element.addClass(this.options.wijCSS.stateDisabled).find("> .ui-expander-header").addClass(this.options.wijCSS.stateDisabled),this.element.find("> ."+this.options.wijCSS.content).addClass(this.options.wijCSS.stateDisabled)):(this.element.removeClass(this.options.wijCSS.stateDisabled).find("> .ui-expander-header").removeClass(this.options.wijCSS.stateDisabled),this.element.find("> ."+this.options.wijCSS.content).removeClass(this.options.wijCSS.stateDisabled));break;case"expandDirection":this._onDirectionChange(n,!0,this.options.expandDirection);break;case"expanded":n?this.expand():this.collapse();return;default:}t.wijmo.widget.prototype._setOption.apply(this,arguments)},n.prototype._create=function(){var e=this.options,n=this.element.children(),r,i;window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),this.element.addClass("wijmo-wijexpander ui-expander "+e.wijCSS.widget+" ui-expander-icons"),r=t(n[0]),i=t(n[1]);if(e.expandDirection==="left"||e.expandDirection==="top")r.remove(),r.insertAfter(i);r.addClass("ui-expander-header"),r.attr("role","tab"),i.attr("role","tabpanel"),r.find("> a").length===0&&r.wrapInner('<a href="javascript:void(null)"></a>'),r.find("> .ui-icon").length===0&&t('<span class="ui-icon"></span>').insertBefore(t("> a",r)[0]),i.addClass("ui-expander-content "+e.wijCSS.content)},n.prototype._init=function(){var e=this.options;this._onDirectionChange(e.expandDirection,!1),e.contentUrl&&t("."+e.wijCSS.content,this.element).wijContent(this.options.contentUrl),e.expanded?(this.element.find("> .ui-expander-header").addClass(e.wijCSS.stateActive).attr({"aria-expanded":"true",tabIndex:0}).addClass(this._headerCornerOpened).find("> .ui-icon").addClass(this._triangleIconOpened),this.element.find("> .ui-expander-content").addClass("ui-expander-content-active").addClass(this._contentCornerOpened).wijTriggerVisibility()):(this.element.find("> .ui-expander-content").hide(),this.element.find("> .ui-expander-header").addClass(e.wijCSS.stateDefault+" "+e.wijCSS.cornerAll).attr({"aria-expanded":"false",tabIndex:-1}).find("> .ui-icon").addClass(this._triangleIconClosed)),e.disabled&&(this.element.addClass(e.wijCSS.stateDisabled).find("> .ui-expander-header").addClass(e.wijCSS.stateDisabled),this.element.find("> .ui-expander-content").addClass(e.wijCSS.stateDisabled)),this._bindLiveEvents()},n.prototype.destroy=function(){var e=this.options;this._unbindLiveEvents(),this.element.removeClass("wijmo-wijexpander ui-expander "+e.wijCSS.widget+" ui-helper-reset ui-expander-icons"),t.wijmo.widget.prototype.destroy.apply(this,arguments)},n.prototype._bindLiveEvents=function(){var e=this.options;this.element.on("click.wijexpander",">.ui-expander-header",jQuery.proxy(this._onHeaderClick,this)),this.element.on("mouseenter.wijexpander",".ui-expander-header",function(){t(this).addClass(e.wijCSS.stateHover)}),this.element.on("mouseleave.wijexpander",".ui-expander-header",function(){t(this).removeClass(e.wijCSS.stateHover)}),this.element.on("focus.wijexpander",".ui-expander-header",function(){t(this).addClass(e.wijCSS.stateFocus)}),this.element.on("blur.wijexpander",".ui-expander-header",function(){t(this).removeClass(e.wijCSS.stateFocus)})},n.prototype._unbindLiveEvents=function(){this.element.off(".wijexpander",".ui-expander-header")},n.prototype._onDirectionChange=function(e,n,r){typeof r=="undefined"&&(r=null);var i,s,o,u,a,f,l,c,h=this.options;r&&r!==e&&this.element.removeClass("ui-expander-"+r),n&&(s=this.element.find(".ui-expander-header."+this._headerCornerOpened),s.removeClass(this._headerCornerOpened),o=this.element.find(".ui-expander-content."+this._contentCornerOpened),o.removeClass(this._contentCornerOpened),u=this.element.find("."+this._triangleIconOpened),a=this.element.find("."+this._triangleIconClosed),u.removeClass(this._triangleIconOpened),a.removeClass(this._triangleIconClosed));switch(e){case"top":this._headerCornerOpened="ui-corner-bottom",this._contentCornerOpened="ui-corner-top",this._triangleIconOpened=h.wijCSS.iconArrowUp,this._triangleIconClosed=h.wijCSS.iconArrowRight,i=!0,this.element.removeClass("ui-helper-horizontal"),this.element.addClass("ui-expander-top");break;case"right":this._headerCornerOpened="ui-corner-left",this._contentCornerOpened="ui-corner-right",this._triangleIconOpened=h.wijCSS.iconArrowRight,this._triangleIconClosed=h.wijCSS.iconArrowDown,i=!1,this.element.addClass("ui-helper-horizontal"),this.element.addClass("ui-expander-right");break;case"left":this._headerCornerOpened="ui-corner-right",this._contentCornerOpened="ui-corner-left",this._triangleIconOpened=h.wijCSS.iconArrowLeft,this._triangleIconClosed=h.wijCSS.iconArrowDown,i=!0,this.element.addClass("ui-helper-horizontal"),this.element.addClass("ui-expander-left");break;default:this._headerCornerOpened="ui-corner-top",this._contentCornerOpened="ui-corner-bottom",this._triangleIconOpened=h.wijCSS.iconArrowDown,this._triangleIconClosed=h.wijCSS.iconArrowRight,i=!1,this.element.removeClass("ui-helper-horizontal"),this.element.addClass("ui-expander-bottom")}f=this.element.data("rightToLeft"),this.element.data("rightToLeft",i),n&&(u.addClass(this._triangleIconOpened),a.addClass(this._triangleIconClosed),s.addClass(this._headerCornerOpened),o.addClass(this._contentCornerOpened)),n&&i!==f&&this.element.children(".ui-expander-header").each(function(e,n){c=t(this),i?(l=c.next(".ui-expander-content"),c.remove(),c.insertAfter(l)):(l=c.prev(".ui-expander-content"),c.remove(),c.insertBefore(l))})},n.prototype.collapse=function(){var e=this.options,n,r,i,s;if(!e.allowExpand)return;return this.element.hasClass(e.wijCSS.stateDisabled)?!1:this._trigger("beforeCollapse")?(e.animated?(n={expand:!1,content:this.element.find("> .ui-expander-content"),complete:jQuery.proxy(function(){this.element.find("> .ui-expander-content").removeClass("ui-expander-content-active"),this._trigger("afterCollapse"),this.element.find("> .ui-expander-content").css("display","")},this),horizontal:this.element.hasClass("ui-helper-horizontal")},r=t.wijmo.wijexpander.animations,i=e.duration,s=e.animated,s&&!r[s]&&!t.easing[s]&&(s="slide"),r[s]||(r[s]=function(e){this.slide(e,{easing:s,duration:i||700})}),r[s](n)):(this.element.find("> .ui-expander-content").hide(),this._trigger("afterCollapse")),this.element.find("> .ui-expander-header").removeClass(e.wijCSS.stateActive).removeClass(this._headerCornerOpened).attr({"aria-expanded":"false",tabIndex:-1}).addClass(e.wijCSS.stateDefault+" "+e.wijCSS.cornerAll).find("> .ui-icon").removeClass(this._triangleIconOpened).addClass(this._triangleIconClosed),this.options.expanded=!1,!0):!1},n.prototype.expand=function(){var e=this.options,n,r,i,s;if(!e.allowExpand)return;return this.element.hasClass(e.wijCSS.stateDisabled)?!1:this._trigger("beforeExpand")?(e.animated?(n={expand:!0,content:this.element.find("> .ui-expander-content"),complete:jQuery.proxy(function(){this.element.find("> .ui-expander-content").addClass("ui-expander-content-active").addClass(this._contentCornerOpened).wijTriggerVisibility(),this._trigger("afterExpand"),this.element.find("> .ui-expander-content").css("display","")},this),horizontal:this.element.hasClass("ui-helper-horizontal")},r=t.wijmo.wijexpander.animations,i=e.duration,s=e.animated,s&&!r[s]&&!t.easing[s]&&(s="slide"),r[s]||(r[s]=function(e){this.slide(e,{easing:s,duration:i||700})}),r[s](n)):(this.element.find("> .ui-expander-content").show(),this._trigger("afterExpand")),this.element.find("> .ui-expander-header").removeClass(e.wijCSS.stateDefault+" "+e.wijCSS.cornerAll).addClass(e.wijCSS.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}).find("> .ui-icon").removeClass(this._triangleIconClosed).addClass(this._triangleIconOpened),this.options.expanded=!0,!0):!1},n.prototype._onHeaderClick=function(e){this.option("expanded",!this.options.expanded)},n}(e.wijmoWidget);e.wijexpander=r,r.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-content ui-body ui-body-c"},initSelector:":jqmData(role='wijexpander')",allowExpand:!0,animated:"slide",contentUrl:"",expanded:!0,expandDirection:"bottom"}),t.wijmo.registerWidget(n,r.prototype),t.extend(t.wijmo.wijexpander,{animations:{slide:function(e,n){var r;e=t.extend({easing:"swing",duration:300},e,n),e.expand?(e.horizontal?r={width:"show",opacity:"show"}:r={height:"show",opacity:"show"},e.content.stop(!0,!0).animate(r,e)):(e.horizontal?r={width:"hide",opacity:"hide"}:r={height:"hide",opacity:"hide"},e.content.stop(!0,!0).animate(r,e))}}})})(wijmo||(wijmo={}));