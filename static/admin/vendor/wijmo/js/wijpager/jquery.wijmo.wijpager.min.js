var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){"use strict";var t=jQuery,n=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype._create=function(){window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),this.element.addClass(this.options.wijCSS.widget+" wijmo-wijpager "+this.options.wijCSS.helperClearFix),this.options.disabled&&this.disable(),this._refresh()},n.prototype._destroy=function(){this.element.removeClass(this.options.wijCSS.widget+" wijmo-wijpager "+this.options.wijCSS.helperClearFix),this.$ul.remove()},n.prototype._setOption=function(e,t){this._super(e,t),this._refresh()},n.prototype._refresh=function(){this._validate(),this.$ul&&this.$ul.remove(),this.element.append(this.$ul=t('<ul class="ui-list '+this.options.wijCSS.cornerAll+" "+this.options.wijCSS.content+" "+this.options.wijCSS.helperClearFix+'" role="tablist"></ul>'));switch((this.options.mode||"").toLowerCase()){case"nextprevious":this._createNextPrev(!1);break;case"nextpreviousfirstlast":this._createNextPrev(!0);break;case"numeric":this._createNumeric(!1);break;case"numericfirstlast":this._createNumeric(!0)}},n.prototype._validate=function(){var e=this.options;if(isNaN(e.pageCount)||e.pageCount<1)e.pageCount=1;isNaN(e.pageIndex)||e.pageIndex<0?e.pageIndex=0:e.pageIndex>=e.pageCount&&(e.pageIndex=e.pageCount-1);if(isNaN(e.pageButtonCount)||e.pageButtonCount<1)e.pageButtonCount=1},n.prototype._createNextPrev=function(e){var t=this.options;e&&t.pageIndex&&this.$ul.append(this._createPagerItem(!1,t.firstPageText,1,t.firstPageClass)),t.pageIndex&&this.$ul.append(this._createPagerItem(!1,t.previousPageText,t.pageIndex,t.previousPageClass)),t.pageIndex+1<t.pageCount&&this.$ul.append(this._createPagerItem(!1,t.nextPageText,t.pageIndex+2,t.nextPageClass)),e&&t.pageIndex+1<t.pageCount&&this.$ul.append(this._createPagerItem(!1,t.lastPageText,t.pageCount,t.lastPageClass))},n.prototype._createNumeric=function(e){var t=this.options,n=t.pageIndex+1,r=1,i=Math.min(t.pageCount,t.pageButtonCount),s;n>i&&(r=Math.floor(t.pageIndex/t.pageButtonCount)*t.pageButtonCount+1,i=r+t.pageButtonCount-1,i=Math.min(i,t.pageCount),i-r+1<t.pageButtonCount&&(r=Math.max(1,i-t.pageButtonCount+1))),r!==1&&(e&&this.$ul.append(this._createPagerItem(!1,t.firstPageText,1,t.firstPageClass)),this.$ul.append(this._createPagerItem(!1,"...",r-1,"")));for(s=r;s<=i;s++)this.$ul.append(this._createPagerItem(s===n,s.toString(),s,""));t.pageCount>i&&(this.$ul.append(this._createPagerItem(!1,"...",i+1,"")),e&&this.$ul.append(this._createPagerItem(!1,t.lastPageText,t.pageCount,t.lastPageClass)))},n.prototype._createPagerItem=function(e,n,r,i){var s,o=this.options.wijCSS,u=this,a=t("<li />").addClass("wijmo-wijpager-button "+o.cornerAll).attr({role:"tab","aria-label":n,title:n});return e?a.addClass(o.stateActive).attr("aria-selected","true"):a.addClass(o.stateDefault).hover(function(){u.options.disabled||t(this).removeClass(o.stateDefault).addClass(o.stateHover)},function(){u.options.disabled||t(this).removeClass(o.stateHover).addClass(o.stateDefault)}).bind("click."+this.widgetName,{newPageIndex:r-1},t.proxy(this._onClick,this)),e?s=t("<span />"):s=i?t("<span />").addClass(o.icon+" "+i):t("<a/>").attr("href","#"),s.text(n),a.append(s),a},n.prototype._onClick=function(e){if(this.options.disabled)return!1;var t={newPageIndex:e.data.newPageIndex,handled:!1};return this._trigger("pageIndexChanging",null,t)!==!1&&this.options.pageIndex!==t.newPageIndex&&(this.options.pageIndex=t.newPageIndex,t.handled||this._refresh(),this._trigger("pageIndexChanged",null,{newPageIndex:t.newPageIndex})),!1},n}(e.wijmoWidget);e.wijpager=n,n.prototype.widgetEventPrefix="wijpager",n.prototype.options=t.extend(!0,{},e.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-b",stateActive:"ui-btn-down-c"},firstPageClass:t.wijmo.widget.prototype.options.wijCSS.iconSeekFirst,firstPageText:"First",lastPageClass:t.wijmo.widget.prototype.options.wijCSS.iconSeekEnd,lastPageText:"Last",mode:"numeric",nextPageClass:t.wijmo.widget.prototype.options.wijCSS.iconSeekNext,nextPageText:"Next",pageButtonCount:10,previousPageClass:t.wijmo.widget.prototype.options.wijCSS.iconSeekPrev,previousPageText:"Previous",pageCount:1,pageIndex:0,pageIndexChanging:null,pageIndexChanged:null}),t.wijmo.registerWidget("wijpager",n.prototype)})(wijmo||(wijmo={}));